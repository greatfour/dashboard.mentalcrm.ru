import{d as $n,u as Vn,g as Qi,i as Jn,k as Ae,n as qa,o as Q,c as Le,a as je,e as dt,b as q,m as Ge,p as Ye,w as Bt,q as vr,t as Ft,s as yr,V as Ki,r as Ga,h as Ya,f as Wa,v as za,x as Ha}from"./index-D2tFxEgP.js";import{u as Qa}from"./Sessions-DW_fmuRD.js";import{h as kt}from"./moment-zH0z38ay.js";import{_ as Ka}from"./Logo.vue_vue_type_script_setup_true_lang-BXpZjg1I.js";import{_ as Xa}from"./AddEventModal.vue_vue_type_style_index_0_lang-C5IplA1r.js";import{_ as Za}from"./AddNoteModal.vue_vue_type_style_index_0_lang-CR3u_zqA.js";import{N as es}from"./Notification-CBmotwiz.js";import{_ as ts}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./maska-Cp-LWreF.js";import"./Client-D0Y0OEjf.js";import"./Rules-BG1yOtK0.js";import"./Notes-C9oFSAST.js";function _r(t,e){if(t==null)return{};var n,r,a=function(o,u){if(o==null)return{};var d,p,h={},m=Object.keys(o);for(p=0;p<m.length;p++)d=m[p],u.indexOf(d)>=0||(h[d]=o[d]);return h}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function ae(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function L(t){return L=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(t)}function Xi(t){var e=function(n,r){if(L(n)!=="object"||n===null)return n;var a=n[Symbol.toPrimitive];if(a!==void 0){var s=a.call(n,r||"default");if(L(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return L(e)==="symbol"?e:String(e)}function br(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xi(r.key),r)}}function se(t,e,n){return e&&br(t.prototype,e),n&&br(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},ft(t,e)}function Kt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}function Xt(t,e){if(e&&(L(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pe(t)}function re(t){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(t)}function we(t,e,n){return(e=Xi(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wr(t,e,n,r,a,s,o){try{var u=t[s](o),d=u.value}catch(p){return void n(p)}u.done?e(d):Promise.resolve(d).then(r,a)}function M(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var s=t.apply(e,n);function o(d){wr(s,r,a,o,u,"next",d)}function u(d){wr(s,r,a,o,u,"throw",d)}o(void 0)})}}function Sr(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Be(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var a=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(a!=null){var s,o,u,d,p=[],h=!0,m=!1;try{if(u=(a=a.call(n)).next,r===0){if(Object(a)!==a)return;h=!1}else for(;!(h=(s=u.call(a)).done)&&(p.push(s.value),p.length!==r);h=!0);}catch(_){m=!0,o=_}finally{try{if(!h&&a.return!=null&&(d=a.return(),Object(d)!==d))return}finally{if(m)throw o}}return p}}(t,e)||function(n,r){if(n){if(typeof n=="string")return Sr(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Sr(n,r):void 0}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var Zi,ge={},ns={get exports(){return ge},set exports(t){ge=t}},He=typeof Reflect=="object"?Reflect:null,kr=He&&typeof He.apply=="function"?He.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};Zi=He&&typeof He.ownKeys=="function"?He.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var Er=Number.isNaN||function(t){return t!=t};function j(){j.init.call(this)}ns.exports=j,ge.once=function(t,e){return new Promise(function(n,r){function a(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",a),n([].slice.call(arguments))}xr(t,e,s,{once:!0}),e!=="error"&&function(o,u,d){typeof o.on=="function"&&xr(o,"error",u,d)}(t,a,{once:!0})})},j.EventEmitter=j,j.prototype._events=void 0,j.prototype._eventsCount=0,j.prototype._maxListeners=void 0;var Cr=10;function Ut(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function ea(t){return t._maxListeners===void 0?j.defaultMaxListeners:t._maxListeners}function Mr(t,e,n,r){var a,s,o,u;if(Ut(n),(s=t._events)===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(a=ea(t))>0&&o.length>a&&!o.warned){o.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=t,d.type=e,d.count=o.length,u=d,console&&console.warn&&console.warn(u)}return t}function rs(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Tr(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},a=rs.bind(r);return a.listener=n,r.wrapFn=a,a}function Or(t,e,n){var r=t._events;if(r===void 0)return[];var a=r[e];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?function(s){for(var o=new Array(s.length),u=0;u<o.length;++u)o[u]=s[u].listener||s[u];return o}(a):ta(a,a.length)}function Pr(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}function ta(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function xr(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else{if(typeof t.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function a(s){r.once&&t.removeEventListener(e,a),n(s)})}}Object.defineProperty(j,"defaultMaxListeners",{enumerable:!0,get:function(){return Cr},set:function(t){if(typeof t!="number"||t<0||Er(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Cr=t}}),j.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},j.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Er(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},j.prototype.getMaxListeners=function(){return ea(this)},j.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r=t==="error",a=this._events;if(a!==void 0)r=r&&a.error===void 0;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=a[t];if(u===void 0)return!1;if(typeof u=="function")kr(u,this,e);else{var d=u.length,p=ta(u,d);for(n=0;n<d;++n)kr(p[n],this,e)}return!0},j.prototype.addListener=function(t,e){return Mr(this,t,e,!1)},j.prototype.on=j.prototype.addListener,j.prototype.prependListener=function(t,e){return Mr(this,t,e,!0)},j.prototype.once=function(t,e){return Ut(e),this.on(t,Tr(this,t,e)),this},j.prototype.prependOnceListener=function(t,e){return Ut(e),this.prependListener(t,Tr(this,t,e)),this},j.prototype.removeListener=function(t,e){var n,r,a,s,o;if(Ut(e),(r=this._events)===void 0)return this;if((n=r[t])===void 0)return this;if(n===e||n.listener===e)--this._eventsCount==0?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if(typeof n!="function"){for(a=-1,s=n.length-1;s>=0;s--)if(n[s]===e||n[s].listener===e){o=n[s].listener,a=s;break}if(a<0)return this;a===0?n.shift():function(u,d){for(;d+1<u.length;d++)u[d]=u[d+1];u.pop()}(n,a),n.length===1&&(r[t]=n[0]),r.removeListener!==void 0&&this.emit("removeListener",t,o||e)}return this},j.prototype.off=j.prototype.removeListener,j.prototype.removeAllListeners=function(t){var e,n,r;if((n=this._events)===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a,s=Object.keys(n);for(r=0;r<s.length;++r)(a=s[r])!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(e=n[t])=="function")this.removeListener(t,e);else if(e!==void 0)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},j.prototype.listeners=function(t){return Or(this,t,!0)},j.prototype.rawListeners=function(t){return Or(this,t,!1)},j.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Pr.call(t,e)},j.prototype.listenerCount=Pr,j.prototype.eventNames=function(){return this._eventsCount>0?Zi(this._events):[]};var Dr=Object.prototype.hasOwnProperty;function Ar(t,e,n){for(n of t.keys())if(z(n,e))return n}function z(t,e){var n,r,a;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&z(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if((a=r)&&typeof a=="object"&&!(a=Ar(e,a))||!e.has(a))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if((a=r[0])&&typeof a=="object"&&!(a=Ar(e,a))||!z(r[1],e.get(a)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){for(n in r=0,t)if(Dr.call(t,n)&&++r&&!Dr.call(e,n)||!(n in e)||!z(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!=t&&e!=e}const is={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},na={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},F={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},Y={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},be={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class y{static getFirstMatch(e,n){const r=n.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,n){const r=n.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,n,r){if(e.test(n))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),n[0]===10)switch(n[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){const n=e.split(".").splice(0,2).map(r=>parseInt(r,10)||0);if(n.push(0),!(n[0]===1&&n[1]<5))return n[0]===1&&n[1]<6?"Cupcake":n[0]===1&&n[1]>=6?"Donut":n[0]===2&&n[1]<2?"Eclair":n[0]===2&&n[1]===2?"Froyo":n[0]===2&&n[1]>2?"Gingerbread":n[0]===3?"Honeycomb":n[0]===4&&n[1]<1?"Ice Cream Sandwich":n[0]===4&&n[1]<4?"Jelly Bean":n[0]===4&&n[1]>=4?"KitKat":n[0]===5?"Lollipop":n[0]===6?"Marshmallow":n[0]===7?"Nougat":n[0]===8?"Oreo":n[0]===9?"Pie":void 0}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,n,r=!1){const a=y.getVersionPrecision(e),s=y.getVersionPrecision(n);let o=Math.max(a,s),u=0;const d=y.map([e,n],p=>{const h=o-y.getVersionPrecision(p),m=p+new Array(h+1).join(".0");return y.map(m.split("."),_=>new Array(20-_.length).join("0")+_).reverse()});for(r&&(u=o-Math.min(a,s)),o-=1;o>=u;){if(d[0][o]>d[1][o])return 1;if(d[0][o]===d[1][o]){if(o===u)return 0;o-=1}else if(d[0][o]<d[1][o])return-1}}static map(e,n){const r=[];let a;if(Array.prototype.map)return Array.prototype.map.call(e,n);for(a=0;a<e.length;a+=1)r.push(n(e[a]));return r}static find(e,n){let r,a;if(Array.prototype.find)return Array.prototype.find.call(e,n);for(r=0,a=e.length;r<a;r+=1){const s=e[r];if(n(s,r))return s}}static assign(e,...n){const r=e;let a,s;if(Object.assign)return Object.assign(e,...n);for(a=0,s=n.length;a<s;a+=1){const o=n[a];typeof o=="object"&&o!==null&&Object.keys(o).forEach(u=>{r[u]=o[u]})}return e}static getBrowserAlias(e){return is[e]}static getBrowserTypeByAlias(e){return na[e]||""}}const I=/version\/(\d+(\.?_?\d+)+)/i,as=[{test:[/googlebot/i],describe(t){const e={name:"Googlebot"},n=y.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/opera/i],describe(t){const e={name:"Opera"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opr\/|opios/i],describe(t){const e={name:"Opera"},n=y.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/SamsungBrowser/i],describe(t){const e={name:"Samsung Internet for Android"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Whale/i],describe(t){const e={name:"NAVER Whale Browser"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MZBrowser/i],describe(t){const e={name:"MZ Browser"},n=y.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/focus/i],describe(t){const e={name:"Focus"},n=y.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/swing/i],describe(t){const e={name:"Swing"},n=y.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/coast/i],describe(t){const e={name:"Opera Coast"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(t){const e={name:"Opera Touch"},n=y.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/yabrowser/i],describe(t){const e={name:"Yandex Browser"},n=y.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/ucbrowser/i],describe(t){const e={name:"UC Browser"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/Maxthon|mxios/i],describe(t){const e={name:"Maxthon"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/epiphany/i],describe(t){const e={name:"Epiphany"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/puffin/i],describe(t){const e={name:"Puffin"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sleipnir/i],describe(t){const e={name:"Sleipnir"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/k-meleon/i],describe(t){const e={name:"K-Meleon"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/micromessenger/i],describe(t){const e={name:"WeChat"},n=y.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/qqbrowser/i],describe(t){const e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},n=y.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/msie|trident/i],describe(t){const e={name:"Internet Explorer"},n=y.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/\sedg\//i],describe(t){const e={name:"Microsoft Edge"},n=y.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/edg([ea]|ios)/i],describe(t){const e={name:"Microsoft Edge"},n=y.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/vivaldi/i],describe(t){const e={name:"Vivaldi"},n=y.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/seamonkey/i],describe(t){const e={name:"SeaMonkey"},n=y.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/sailfish/i],describe(t){const e={name:"Sailfish"},n=y.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return n&&(e.version=n),e}},{test:[/silk/i],describe(t){const e={name:"Amazon Silk"},n=y.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/phantom/i],describe(t){const e={name:"PhantomJS"},n=y.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/slimerjs/i],describe(t){const e={name:"SlimerJS"},n=y.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e={name:"BlackBerry"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(web|hpw)[o0]s/i],describe(t){const e={name:"WebOS Browser"},n=y.getFirstMatch(I,t)||y.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/bada/i],describe(t){const e={name:"Bada"},n=y.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/tizen/i],describe(t){const e={name:"Tizen"},n=y.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/qupzilla/i],describe(t){const e={name:"QupZilla"},n=y.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/firefox|iceweasel|fxios/i],describe(t){const e={name:"Firefox"},n=y.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/electron/i],describe(t){const e={name:"Electron"},n=y.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/MiuiBrowser/i],describe(t){const e={name:"Miui"},n=y.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/chromium/i],describe(t){const e={name:"Chromium"},n=y.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/chrome|crios|crmo/i],describe(t){const e={name:"Chrome"},n=y.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/GSA/i],describe(t){const e={name:"Google Search"},n=y.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e={name:"Android Browser"},n=y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/playstation 4/i],describe(t){const e={name:"PlayStation 4"},n=y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/safari|applewebkit/i],describe(t){const e={name:"Safari"},n=y.getFirstMatch(I,t);return n&&(e.version=n),e}},{test:[/.*/i],describe(t){const e=t.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:y.getFirstMatch(e,t),version:y.getSecondMatch(e,t)}}}];var ss=[{test:[/Roku\/DVP/],describe(t){const e=y.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:Y.Roku,version:e}}},{test:[/windows phone/i],describe(t){const e=y.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:Y.WindowsPhone,version:e}}},{test:[/windows /i],describe(t){const e=y.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),n=y.getWindowsVersionName(e);return{name:Y.Windows,version:e,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(t){const e={name:Y.iOS},n=y.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return n&&(e.version=n),e}},{test:[/macintosh/i],describe(t){const e=y.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),n=y.getMacOSVersionName(e),r={name:Y.MacOS,version:e};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe(t){const e=y.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:Y.iOS,version:e}}},{test(t){const e=!t.test(/like android/i),n=t.test(/android/i);return e&&n},describe(t){const e=y.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),n=y.getAndroidVersionName(e),r={name:Y.Android,version:e};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe(t){const e=y.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),n={name:Y.WebOS};return e&&e.length&&(n.version=e),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(t){const e=y.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||y.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||y.getFirstMatch(/\bbb(\d+)/i,t);return{name:Y.BlackBerry,version:e}}},{test:[/bada/i],describe(t){const e=y.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:Y.Bada,version:e}}},{test:[/tizen/i],describe(t){const e=y.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:Y.Tizen,version:e}}},{test:[/linux/i],describe:()=>({name:Y.Linux})},{test:[/CrOS/],describe:()=>({name:Y.ChromeOS})},{test:[/PlayStation 4/],describe(t){const e=y.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:Y.PlayStation4,version:e}}}],os=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(t){const e=y.getFirstMatch(/(can-l01)/i,t)&&"Nova",n={type:F.mobile,vendor:"Huawei"};return e&&(n.model=e),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:F.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:F.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:F.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:F.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:F.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:F.tablet})},{test(t){const e=t.test(/ipod|iphone/i),n=t.test(/like (ipod|iphone)/i);return e&&!n},describe(t){const e=y.getFirstMatch(/(ipod|iphone)/i,t);return{type:F.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:F.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:F.mobile})},{test:t=>t.getBrowserName(!0)==="blackberry",describe:()=>({type:F.mobile,vendor:"BlackBerry"})},{test:t=>t.getBrowserName(!0)==="bada",describe:()=>({type:F.mobile})},{test:t=>t.getBrowserName()==="windows phone",describe:()=>({type:F.mobile,vendor:"Microsoft"})},{test(t){const e=Number(String(t.getOSVersion()).split(".")[0]);return t.getOSName(!0)==="android"&&e>=3},describe:()=>({type:F.tablet})},{test:t=>t.getOSName(!0)==="android",describe:()=>({type:F.mobile})},{test:t=>t.getOSName(!0)==="macos",describe:()=>({type:F.desktop,vendor:"Apple"})},{test:t=>t.getOSName(!0)==="windows",describe:()=>({type:F.desktop})},{test:t=>t.getOSName(!0)==="linux",describe:()=>({type:F.desktop})},{test:t=>t.getOSName(!0)==="playstation 4",describe:()=>({type:F.tv})},{test:t=>t.getOSName(!0)==="roku",describe:()=>({type:F.tv})}],cs=[{test:t=>t.getBrowserName(!0)==="microsoft edge",describe(t){if(/\sedg\//i.test(t))return{name:be.Blink};const e=y.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:be.EdgeHTML,version:e}}},{test:[/trident/i],describe(t){const e={name:be.Trident},n=y.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:t=>t.test(/presto/i),describe(t){const e={name:be.Presto},n=y.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test(t){const e=t.test(/gecko/i),n=t.test(/like gecko/i);return e&&!n},describe(t){const e={name:be.Gecko},n=y.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:be.Blink})},{test:[/(apple)?webkit/i],describe(t){const e={name:be.WebKit},n=y.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return n&&(e.version=n),e}}];class jr{constructor(e,n=!1){if(e==null||e==="")throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},n!==!0&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const e=y.find(as,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const e=y.find(ss,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){const{name:n}=this.getOS();return e?String(n).toLowerCase()||"":n||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){const{type:n}=this.getPlatform();return e?String(n).toLowerCase()||"":n||""}parsePlatform(){this.parsedResult.platform={};const e=y.find(os,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const e=y.find(cs,n=>{if(typeof n.test=="function")return n.test(this);if(n.test instanceof Array)return n.test.some(r=>this.test(r));throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return y.assign({},this.parsedResult)}satisfies(e){const n={};let r=0;const a={};let s=0;if(Object.keys(e).forEach(o=>{const u=e[o];typeof u=="string"?(a[o]=u,s+=1):typeof u=="object"&&(n[o]=u,r+=1)}),r>0){const o=Object.keys(n),u=y.find(o,p=>this.isOS(p));if(u){const p=this.satisfies(n[u]);if(p!==void 0)return p}const d=y.find(o,p=>this.isPlatform(p));if(d){const p=this.satisfies(n[d]);if(p!==void 0)return p}}if(s>0){const o=Object.keys(a),u=y.find(o,d=>this.isBrowser(d,!0));if(u!==void 0)return this.compareVersion(a[u])}}isBrowser(e,n=!1){const r=this.getBrowserName().toLowerCase();let a=e.toLowerCase();const s=y.getBrowserTypeByAlias(a);return n&&s&&(a=s.toLowerCase()),a===r}compareVersion(e){let n=[0],r=e,a=!1;const s=this.getBrowserVersion();if(typeof s=="string")return e[0]===">"||e[0]==="<"?(r=e.substr(1),e[1]==="="?(a=!0,r=e.substr(2)):n=[],e[0]===">"?n.push(1):n.push(-1)):e[0]==="="?r=e.substr(1):e[0]==="~"&&(a=!0,r=e.substr(1)),n.indexOf(y.compareVersions(s,r,a))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,n=!1){return this.isBrowser(e,n)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(n=>this.is(n))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class ls{static getParser(e,n=!1){if(typeof e!="string")throw new Error("UserAgent should be a string");return new jr(e,n)}static parse(e){return new jr(e).getResult()}static get BROWSER_MAP(){return na}static get ENGINE_MAP(){return be}static get OS_MAP(){return Y}static get PLATFORMS_MAP(){return F}}function Zt(){return Date.now()+Math.random().toString()}function st(){throw new Error("Method must be implemented in subclass")}function ra(t,e){return e!=null&&e.proxyUrl?e.proxyUrl+(e.proxyUrl.slice(-1)==="/"?"":"/")+t.substring(8):t}function Jt(t){return t!=null&&t.callObjectBundleUrlOverride?t.callObjectBundleUrlOverride:ra("https://c.daily.co/call-machine/versioned/".concat("0.67.0","/static/call-machine-object-bundle.js"),t)}function gt(t){try{new URL(t)}catch{return!1}return!0}const ia=Object.prototype.toString;function aa(t){switch(ia.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Ue(t,Error)}}function at(t,e){return ia.call(t)===`[object ${e}]`}function qn(t){return at(t,"ErrorEvent")}function Ir(t){return at(t,"DOMError")}function Fe(t){return at(t,"String")}function sa(t){return t===null||typeof t!="object"&&typeof t!="function"}function nt(t){return at(t,"Object")}function qt(t){return typeof Event<"u"&&Ue(t,Event)}function Gn(t){return!!(t&&t.then&&typeof t.then=="function")}function Ue(t,e){try{return t instanceof e}catch{return!1}}function Qe(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Nr(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const a=t[r];try{n.push(String(a))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function us(t,e,n=!1){return!!Fe(t)&&(at(e,"RegExp")?e.test(t):!!Fe(e)&&(n?t===e:t.includes(e)))}function Et(t,e=[],n=!1){return e.some(r=>us(t,r,n))}function ds(t,e,n=250,r,a,s,o){if(!(s.exception&&s.exception.values&&o&&Ue(o.originalException,Error)))return;const u=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;var d,p;u&&(s.exception.values=(d=_n(t,e,a,o.originalException,r,s.exception.values,u,0),p=n,d.map(h=>(h.value&&(h.value=Qe(h.value,p)),h))))}function _n(t,e,n,r,a,s,o,u){if(s.length>=n+1)return s;let d=[...s];if(Ue(r[a],Error)){Lr(o,u);const p=t(e,r[a]),h=d.length;Rr(p,a,h,u),d=_n(t,e,n,r[a],a,[p,...d],p,h)}return Array.isArray(r.errors)&&r.errors.forEach((p,h)=>{if(Ue(p,Error)){Lr(o,u);const m=t(e,p),_=d.length;Rr(m,`errors[${h}]`,_,u),d=_n(t,e,n,p,a,[m,...d],m,_)}}),d}function Lr(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function Rr(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function Ct(t){return t&&t.Math==Math?t:void 0}const Z=typeof globalThis=="object"&&Ct(globalThis)||typeof window=="object"&&Ct(window)||typeof self=="object"&&Ct(self)||typeof global=="object"&&Ct(global)||function(){return this}()||{};function wt(){return Z}function Yn(t,e,n){const r=n||Z,a=r.__SENTRY__=r.__SENTRY__||{};return a[t]||(a[t]=e())}const hs=wt(),ps=80;function bn(t,e={}){try{let n=t;const r=5,a=[];let s=0,o=0;const u=" > ",d=u.length;let p;const h=Array.isArray(e)?e:e.keyAttrs,m=!Array.isArray(e)&&e.maxStringLength||ps;for(;n&&s++<r&&(p=fs(n,h),!(p==="html"||s>1&&o+a.length*d+p.length>=m));)a.push(p),o+=p.length,n=n.parentNode;return a.reverse().join(u)}catch{return"<unknown>"}}function fs(t,e){const n=t,r=[];let a,s,o,u,d;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());const p=e&&e.length?e.filter(m=>n.getAttribute(m)).map(m=>[m,n.getAttribute(m)]):null;if(p&&p.length)p.forEach(m=>{r.push(`[${m[0]}="${m[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),a=n.className,a&&Fe(a))for(s=a.split(/\s+/),d=0;d<s.length;d++)r.push(`.${s[d]}`);const h=["aria-label","type","name","title","alt"];for(d=0;d<h.length;d++)o=h[d],u=n.getAttribute(o),u&&r.push(`[${o}="${u}"]`);return r.join("")}const Gt=["debug","info","warn","error","log","assert","trace"];function oa(t){if(!("console"in Z))return t();const e=Z.console,n={};Gt.forEach(r=>{const a=e[r]&&e[r].__sentry_original__;r in e&&a&&(n[r]=e[r],e[r]=a)});try{return t()}finally{Object.keys(n).forEach(r=>{e[r]=n[r]})}}function Br(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Gt.forEach(n=>{e[n]=(...r)=>{t&&oa(()=>{Z.console[n](`Sentry Logger [${n}]:`,...r)})}}):Gt.forEach(n=>{e[n]=()=>{}}),e}let P;P=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?Yn("logger",Br):Br();const gs=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Yt(t,e=!1){const{host:n,path:r,pass:a,port:s,projectId:o,protocol:u,publicKey:d}=t;return`${u}://${d}${e&&a?`:${a}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function Fr(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function ms(t){const e=typeof t=="string"?function(n){const r=gs.exec(n);if(!r)return void console.error(`Invalid Sentry Dsn: ${n}`);const[a,s,o="",u,d="",p]=r.slice(1);let h="",m=p;const _=m.split("/");if(_.length>1&&(h=_.slice(0,-1).join("/"),m=_.pop()),m){const w=m.match(/^\d+/);w&&(m=w[0])}return Fr({host:u,pass:o,path:h,projectId:m,port:d,protocol:a,publicKey:s})}(t):Fr(t);if(e&&function(n){if(typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__)return!0;const{port:r,projectId:a,protocol:s}=n;return!(["protocol","publicKey","host","projectId"].find(o=>!n[o]&&(P.error(`Invalid Sentry Dsn: ${o} missing`),!0))||(a.match(/^\d+$/)?function(o){return o==="http"||o==="https"}(s)?r&&isNaN(parseInt(r,10))&&(P.error(`Invalid Sentry Dsn: Invalid port ${r}`),1):(P.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(P.error(`Invalid Sentry Dsn: Invalid projectId ${a}`),1)))}(e))return e}class ne extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function V(t,e,n){if(!(e in t))return;const r=t[e],a=n(r);if(typeof a=="function")try{ca(a,r)}catch{}t[e]=a}function Wn(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function ca(t,e){const n=e.prototype||{};t.prototype=e.prototype=n,Wn(t,"__sentry_original__",e)}function zn(t){return t.__sentry_original__}function la(t){if(aa(t))return{message:t.message,name:t.name,stack:t.stack,...$r(t)};if(qt(t)){const e={type:t.type,target:Ur(t.target),currentTarget:Ur(t.currentTarget),...$r(t)};return typeof CustomEvent<"u"&&Ue(t,CustomEvent)&&(e.detail=t.detail),e}return t}function Ur(t){try{return e=t,typeof Element<"u"&&Ue(e,Element)?bn(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}var e}function $r(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function en(t){return wn(t,new Map)}function wn(t,e){if(nt(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const a of Object.keys(t))t[a]!==void 0&&(r[a]=wn(t[a],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(a=>{r.push(wn(a,e))}),r}return t}const Vr="<anonymous>";function Me(t){try{return t&&typeof t=="function"&&t.name||Vr}catch{return Vr}}const an=wt();function Sn(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function vs(){if(!function(){if(!("fetch"in an))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}())return!1;if(Sn(an.fetch))return!0;let t=!1;const e=an.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=Sn(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}const Mt=wt(),B=wt(),lt="__sentry_xhr_v2__",ht={},Jr={};function ys(t){if(!Jr[t])switch(Jr[t]=!0,t){case"console":(function(){"console"in B&&Gt.forEach(function(e){e in B.console&&V(B.console,e,function(n){return function(...r){ee("console",{args:r,level:e}),n&&n.apply(B.console,r)}})})})();break;case"dom":(function(){if(!("document"in B))return;const e=ee.bind(null,"dom"),n=Gr(e,!0);B.document.addEventListener("click",n,!1),B.document.addEventListener("keypress",n,!1),["EventTarget","Node"].forEach(r=>{const a=B[r]&&B[r].prototype;a&&a.hasOwnProperty&&a.hasOwnProperty("addEventListener")&&(V(a,"addEventListener",function(s){return function(o,u,d){if(o==="click"||o=="keypress")try{const p=this,h=p.__sentry_instrumentation_handlers__=p.__sentry_instrumentation_handlers__||{},m=h[o]=h[o]||{refCount:0};if(!m.handler){const _=Gr(e);m.handler=_,s.call(this,o,_,d)}m.refCount++}catch{}return s.call(this,o,u,d)}}),V(a,"removeEventListener",function(s){return function(o,u,d){if(o==="click"||o=="keypress")try{const p=this,h=p.__sentry_instrumentation_handlers__||{},m=h[o];m&&(m.refCount--,m.refCount<=0&&(s.call(this,o,m.handler,d),m.handler=void 0,delete h[o]),Object.keys(h).length===0&&delete p.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,u,d)}}))})})();break;case"xhr":(function(){if(!("XMLHttpRequest"in B))return;const e=XMLHttpRequest.prototype;V(e,"open",function(n){return function(...r){const a=r[1],s=this[lt]={method:Fe(r[0])?r[0].toUpperCase():r[0],url:r[1],request_headers:{}};Fe(a)&&s.method==="POST"&&a.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const u=this[lt];if(u&&this.readyState===4){try{u.status_code=this.status}catch{}ee("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?V(this,"onreadystatechange",function(u){return function(...d){return o(),u.apply(this,d)}}):this.addEventListener("readystatechange",o),V(this,"setRequestHeader",function(u){return function(...d){const[p,h]=d,m=this[lt];return m&&(m.request_headers[p.toLowerCase()]=h),u.apply(this,d)}}),n.apply(this,r)}}),V(e,"send",function(n){return function(...r){const a=this[lt];return a&&r[0]!==void 0&&(a.body=r[0]),ee("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}})})();break;case"fetch":(function(){vs()&&V(B,"fetch",function(e){return function(...n){const{method:r,url:a}=function(o){if(o.length===0)return{method:"GET",url:""};if(o.length===2){const[d,p]=o;return{url:qr(d),method:kn(p,"method")?String(p.method).toUpperCase():"GET"}}const u=o[0];return{url:qr(u),method:kn(u,"method")?String(u.method).toUpperCase():"GET"}}(n),s={args:n,fetchData:{method:r,url:a},startTimestamp:Date.now()};return ee("fetch",{...s}),e.apply(B,n).then(o=>(ee("fetch",{...s,endTimestamp:Date.now(),response:o}),o),o=>{throw ee("fetch",{...s,endTimestamp:Date.now(),error:o}),o})}})})();break;case"history":(function(){if(!function(){const r=Mt.chrome,a=r&&r.app&&r.app.runtime,s="history"in Mt&&!!Mt.history.pushState&&!!Mt.history.replaceState;return!a&&s}())return;const e=B.onpopstate;function n(r){return function(...a){const s=a.length>2?a[2]:void 0;if(s){const o=Tt,u=String(s);Tt=u,ee("history",{from:o,to:u})}return r.apply(this,a)}}B.onpopstate=function(...r){const a=B.location.href,s=Tt;if(Tt=a,ee("history",{from:s,to:a}),e)try{return e.apply(this,r)}catch{}},V(B.history,"pushState",n),V(B.history,"replaceState",n)})();break;case"error":Pt=B.onerror,B.onerror=function(e,n,r,a,s){return ee("error",{column:a,error:s,line:r,msg:e,url:n}),!(!Pt||Pt.__SENTRY_LOADER__)&&Pt.apply(this,arguments)},B.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":xt=B.onunhandledrejection,B.onunhandledrejection=function(e){return ee("unhandledrejection",e),!(xt&&!xt.__SENTRY_LOADER__)||xt.apply(this,arguments)},B.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("unknown instrumentation type:",t))}}function Ie(t,e){ht[t]=ht[t]||[],ht[t].push(e),ys(t)}function ee(t,e){if(t&&ht[t])for(const n of ht[t]||[])try{n(e)}catch(r){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Me(n)}
Error:`,r)}}function kn(t,e){return!!t&&typeof t=="object"&&!!t[e]}function qr(t){return typeof t=="string"?t:t?kn(t,"url")?t.url:t.toString?t.toString():"":""}let Tt;const _s=1e3;let Ot,sn;function Gr(t,e=!1){return n=>{if(!n||sn===n||function(a){if(a.type!=="keypress")return!1;try{const s=a.target;if(!s||!s.tagName)return!0;if(s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.isContentEditable)return!1}catch{}return!0}(n))return;const r=n.type==="keypress"?"input":n.type;(Ot===void 0||function(a,s){if(!a||a.type!==s.type)return!0;try{if(a.target!==s.target)return!0}catch{}return!1}(sn,n))&&(t({event:n,name:r,global:e}),sn=n),clearTimeout(Ot),Ot=B.setTimeout(()=>{Ot=void 0},_s)}}let Pt=null,xt=null;function Ee(){const t=Z,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const n=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>16*Math.random();return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(15&n())>>r/4).toString(16))}function ua(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Se(t){const{message:e,event_id:n}=t;if(e)return e;const r=ua(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function En(t,e,n){const r=t.exception=t.exception||{},a=r.values=r.values||[],s=a[0]=a[0]||{};s.value||(s.value=e||""),s.type||(s.type="Error")}function mt(t,e){const n=ua(t);if(!n)return;const r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){const a={...r&&r.data,...e.data};n.mechanism.data=a}}function Yr(t){if(t&&t.__sentry_captured__)return!0;try{Wn(t,"__sentry_captured__",!0)}catch{}return!1}function ke(t,e=100,n=1/0){try{return Cn("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function da(t,e=3,n=102400){const r=ke(t,e);return a=r,function(s){return~-encodeURI(s).split(/%..|./).length}(JSON.stringify(a))>n?da(t,e-1,n):r;var a}function Cn(t,e,n=1/0,r=1/0,a=function(){const s=typeof WeakSet=="function",o=s?new WeakSet:[];return[function(u){if(s)return!!o.has(u)||(o.add(u),!1);for(let d=0;d<o.length;d++)if(o[d]===u)return!0;return o.push(u),!1},function(u){if(s)o.delete(u);else for(let d=0;d<o.length;d++)if(o[d]===u){o.splice(d,1);break}}]}()){const[s,o]=a;if(e==null||["number","boolean","string"].includes(typeof e)&&(typeof(u=e)!="number"||u==u))return e;var u;const d=function(b,S){try{if(b==="domain"&&S&&typeof S=="object"&&S._events)return"[Domain]";if(b==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&S===global)return"[Global]";if(typeof window<"u"&&S===window)return"[Window]";if(typeof document<"u"&&S===document)return"[Document]";if(function(C){return nt(C)&&"nativeEvent"in C&&"preventDefault"in C&&"stopPropagation"in C}(S))return"[SyntheticEvent]";if(typeof S=="number"&&S!=S)return"[NaN]";if(typeof S=="function")return`[Function: ${Me(S)}]`;if(typeof S=="symbol")return`[${String(S)}]`;if(typeof S=="bigint")return`[BigInt: ${String(S)}]`;const T=function(C){const U=Object.getPrototypeOf(C);return U?U.constructor.name:"null prototype"}(S);return/^HTML(\w*)Element$/.test(T)?`[HTMLElement: ${T}]`:`[object ${T}]`}catch(T){return`**non-serializable** (${T})`}}(t,e);if(!d.startsWith("[object "))return d;if(e.__sentry_skip_normalization__)return e;const p=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(p===0)return d.replace("object ","");if(s(e))return"[Circular ~]";const h=e;if(h&&typeof h.toJSON=="function")try{return Cn("",h.toJSON(),p-1,r,a)}catch{}const m=Array.isArray(e)?[]:{};let _=0;const w=la(e);for(const b in w){if(!Object.prototype.hasOwnProperty.call(w,b))continue;if(_>=r){m[b]="[MaxProperties ~]";break}const S=w[b];m[b]=Cn(b,S,p-1,r,a),_++}return o(e),m}var fe;function $e(t){return new W(e=>{e(t)})}function Wt(t){return new W((e,n)=>{n(t)})}(function(t){t[t.PENDING=0]="PENDING",t[t.RESOLVED=1]="RESOLVED",t[t.REJECTED=2]="REJECTED"})(fe||(fe={}));class W{__init(){this._state=fe.PENDING}__init2(){this._handlers=[]}constructor(e){W.prototype.__init.call(this),W.prototype.__init2.call(this),W.prototype.__init3.call(this),W.prototype.__init4.call(this),W.prototype.__init5.call(this),W.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new W((r,a)=>{this._handlers.push([!1,s=>{if(e)try{r(e(s))}catch(o){a(o)}else r(s)},s=>{if(n)try{r(n(s))}catch(o){a(o)}else a(s)}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new W((n,r)=>{let a,s;return this.then(o=>{s=!1,a=o,e&&e()},o=>{s=!0,a=o,e&&e()}).then(()=>{s?r(a):n(a)})})}__init3(){this._resolve=e=>{this._setResult(fe.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(fe.REJECTED,e)}}__init5(){this._setResult=(e,n)=>{this._state===fe.PENDING&&(Gn(n)?n.then(this._resolve,this._reject):(this._state=e,this._value=n,this._executeHandlers()))}}__init6(){this._executeHandlers=()=>{if(this._state===fe.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===fe.RESOLVED&&n[1](this._value),this._state===fe.REJECTED&&n[2](this._value),n[0]=!0)})}}}function bs(t){const e=[];function n(r){return e.splice(e.indexOf(r),1)[0]}return{$:e,add:function(r){if(!(t===void 0||e.length<t))return Wt(new ne("Not adding Promise because buffer limit was reached."));const a=r();return e.indexOf(a)===-1&&e.push(a),a.then(()=>n(a)).then(null,()=>n(a).then(null,()=>{})),a},drain:function(r){return new W((a,s)=>{let o=e.length;if(!o)return a(!0);const u=setTimeout(()=>{r&&r>0&&a(!1)},r);e.forEach(d=>{$e(d).then(()=>{--o||(clearTimeout(u),a(!0))},s)})})}}}function on(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const ws=["fatal","error","warning","log","info","debug"],ha=wt(),Mn={nowSeconds:()=>Date.now()/1e3},cn=typeof __SENTRY_BROWSER_BUNDLE__<"u"&&__SENTRY_BROWSER_BUNDLE__||Object.prototype.toString.call(typeof process<"u"?process:0)!=="[object process]"?function(){const{performance:t}=ha;if(!(!t||!t.now))return{now:()=>t.now(),timeOrigin:Date.now()-t.now()}}():function(){try{return(t=module,e="perf_hooks",t.require(e)).performance}catch{return}var t,e}(),Wr=cn===void 0?Mn:{nowSeconds:()=>(cn.timeOrigin+cn.now())/1e3},tn=Mn.nowSeconds.bind(Mn),pa=Wr.nowSeconds.bind(Wr);function vt(t,e=[]){return[t,e]}function Ss(t,e){const[n,r]=t;return[n,[...r,e]]}function zr(t,e){const n=t[1];for(const r of n)if(e(r,r[0].type))return!0;return!1}function Tn(t,e){return(e||new TextEncoder).encode(t)}function ks(t,e){const[n,r]=t;let a=JSON.stringify(n);function s(o){typeof a=="string"?a=typeof o=="string"?a+o:[Tn(a,e),o]:a.push(typeof o=="string"?Tn(o,e):o)}for(const o of r){const[u,d]=o;if(s(`
${JSON.stringify(u)}
`),typeof d=="string"||d instanceof Uint8Array)s(d);else{let p;try{p=JSON.stringify(d)}catch{p=JSON.stringify(ke(d))}s(p)}}return typeof a=="string"?a:function(o){const u=o.reduce((h,m)=>h+m.length,0),d=new Uint8Array(u);let p=0;for(const h of o)d.set(h,p),p+=h.length;return d}(a)}function Es(t,e){const n=typeof t.data=="string"?Tn(t.data,e):t.data;return[en({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}(()=>{const{performance:t}=ha;if(!t||!t.now)return;const e=36e5,n=t.now(),r=Date.now(),a=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=a<e,o=t.timing&&t.timing.navigationStart,u=typeof o=="number"?Math.abs(o+n-r):e;(s||u<e)&&a<=u&&t.timeOrigin})();const Cs={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function Hr(t){return Cs[t]}function fa(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}const Ms=6e4;function Ts(t,{statusCode:e,headers:n},r=Date.now()){const a={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const u of s.trim().split(",")){const[d,p]=u.split(":",2),h=parseInt(d,10),m=1e3*(isNaN(h)?60:h);if(p)for(const _ of p.split(";"))a[_]=r+m;else a.all=r+m}else o?a.all=r+function(u,d=Date.now()){const p=parseInt(`${u}`,10);if(!isNaN(p))return 1e3*p;const h=Date.parse(`${u}`);return isNaN(h)?Ms:h-d}(o,r):e===429&&(a.all=r+6e4);return a}const Hn="production";function Os(t){const e=pa(),n={sid:Ee(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(r){return en({sid:`${r.sid}`,init:r.init,started:new Date(1e3*r.started).toISOString(),timestamp:new Date(1e3*r.timestamp).toISOString(),status:r.status,errors:r.errors,did:typeof r.did=="number"||typeof r.did=="string"?`${r.did}`:void 0,duration:r.duration,attrs:{release:r.release,environment:r.environment,ip_address:r.ipAddress,user_agent:r.userAgent}})}(n)};return t&&rt(n,t),n}function rt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||pa(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Ee()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}class Re{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Qr()}static clone(e){const n=new Re;return e&&(n._breadcrumbs=[...e._breadcrumbs],n._tags={...e._tags},n._extra={...e._extra},n._contexts={...e._contexts},n._user=e._user,n._level=e._level,n._span=e._span,n._session=e._session,n._transactionName=e._transactionName,n._fingerprint=e._fingerprint,n._eventProcessors=[...e._eventProcessors],n._requestSession=e._requestSession,n._attachments=[...e._attachments],n._sdkProcessingMetadata={...e._sdkProcessingMetadata},n._propagationContext={...e._propagationContext}),n}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&rt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const n=e(this);return n instanceof Re?n:this}return e instanceof Re?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):nt(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Qr(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:100;if(r<=0)return this;const a={timestamp:tn(),...e};return this._breadcrumbs=[...this._breadcrumbs,a].slice(-r),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,n={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const r=this._span.transaction;if(r){e.sdkProcessingMetadata={dynamicSamplingContext:r.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const a=r.name;a&&(e.tags={transaction:a,...e.tags})}}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...ga(),...this._eventProcessors],e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(e,n,r,a=0){return new W((s,o)=>{const u=e[a];if(n===null||typeof u!="function")s(n);else{const d=u({...n},r);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&u.id&&d===null&&P.log(`Event processor "${u.id}" dropped event`),Gn(d)?d.then(p=>this._notifyEventProcessors(e,p,r,a+1).then(s)).then(null,o):this._notifyEventProcessors(e,d,r,a+1).then(s).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){var n;e.fingerprint=e.fingerprint?(n=e.fingerprint,Array.isArray(n)?n:[n]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function ga(){return Yn("globalEventProcessors",()=>[])}function ma(t){ga().push(t)}function Qr(){return{traceId:Ee(),spanId:Ee().substring(16),sampled:!1}}const va=4,Ps=100;class Qn{constructor(e,n=new Re,r=va){this._version=r,this._stack=[{scope:n}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=Re.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const n=this.pushScope();try{e(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Ee(),a=new Error("Sentry syntheticException");return this._withClient((s,o)=>{s.captureException(e,{originalException:e,syntheticException:a,...n,event_id:r},o)}),r}captureMessage(e,n,r){const a=this._lastEventId=r&&r.event_id?r.event_id:Ee(),s=new Error(e);return this._withClient((o,u)=>{o.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:a},u)}),a}captureEvent(e,n){const r=n&&n.event_id?n.event_id:Ee();return e.type||(this._lastEventId=r),this._withClient((a,s)=>{a.captureEvent(e,{...n,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:a}=this.getStackTop();if(!a)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=Ps}=a.getOptions&&a.getOptions()||{};if(o<=0)return;const u={timestamp:tn(),...e},d=s?oa(()=>s(u,n)):u;d!==null&&(a.emit&&a.emit("beforeAddBreadcrumb",d,n),r.addBreadcrumb(d,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=Kr(this);try{e(this)}finally{Kr(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return typeof __SENTRY_DEBUG__<"u"&&!__SENTRY_DEBUG__||r||console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,n=e.getSession();n&&function(r,a){let s={};r.status==="ok"&&(s={status:"exited"}),rt(r,s)}(n),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:a,environment:s=Hn}=r&&r.getOptions()||{},{userAgent:o}=Z.navigator||{},u=Os({release:a,environment:s,user:n.getUser(),...o&&{userAgent:o},...e}),d=n.getSession&&n.getSession();return d&&d.status==="ok"&&rt(d,{status:"exited"}),this.endSession(),n.setSession(u),u}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(e){const{scope:n,client:r}=this.getStackTop();r&&e(r,n)}_callExtensionMethod(e,...n){const r=zt().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[e]=="function")return r.extensions[e].apply(this,n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function zt(){return Z.__SENTRY__=Z.__SENTRY__||{extensions:{},hub:void 0},Z}function Kr(t){const e=zt(),n=On(e);return ya(e,t),n}function K(){const t=zt();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return function(e=zt()){n=e,n&&n.__SENTRY__&&n.__SENTRY__.hub&&!On(e).isOlderThan(va)||ya(e,new Qn);var n;return On(e)}(t)}function On(t){return Yn("hub",()=>new Qn,t)}function ya(t,e){return t?((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0):!1}const xs="7";function Ds(t,e){return n={sentry_key:t.publicKey,sentry_version:xs,...e&&{sentry_client:`${e.name}/${e.version}`}},Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&");var n}function As(t,e,n,r){const a=fa(n),s=t.type&&t.type!=="replay_event"?t.type:"event";(function(u,d){d&&(u.sdk=u.sdk||{},u.sdk.name=u.sdk.name||d.name,u.sdk.version=u.sdk.version||d.version,u.sdk.integrations=[...u.sdk.integrations||[],...d.integrations||[]],u.sdk.packages=[...u.sdk.packages||[],...d.packages||[]])})(t,n&&n.sdk);const o=function(u,d,p,h){const m=u.sdkProcessingMetadata&&u.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:u.event_id,sent_at:new Date().toISOString(),...d&&{sdk:d},...!!p&&{dsn:Yt(h)},...m&&{trace:en({...m})}}}(t,a,r,e);return delete t.sdkProcessingMetadata,vt(o,[[{type:s},t]])}const Xr=[];function Zr(t,e){e[t.name]=t,Xr.indexOf(t.name)===-1&&(t.setupOnce(ma,K),Xr.push(t.name),(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log(`Integration installed: ${t.name}`))}function js(t,e,n,r){const{normalizeDepth:a=3,normalizeMaxBreadth:s=1e3}=t,o={...e,event_id:e.event_id||n.event_id||Ee(),timestamp:e.timestamp||tn()},u=n.integrations||t.integrations.map(h=>h.name);(function(h,m){const{environment:_,release:w,dist:b,maxValueLength:S=250}=m;"environment"in h||(h.environment="environment"in m?_:Hn),h.release===void 0&&w!==void 0&&(h.release=w),h.dist===void 0&&b!==void 0&&(h.dist=b),h.message&&(h.message=Qe(h.message,S));const T=h.exception&&h.exception.values&&h.exception.values[0];T&&T.value&&(T.value=Qe(T.value,S));const C=h.request;C&&C.url&&(C.url=Qe(C.url,S))})(o,t),function(h,m){m.length>0&&(h.sdk=h.sdk||{},h.sdk.integrations=[...h.sdk.integrations||[],...m])}(o,u),e.type===void 0&&function(h,m){const _=Z._sentryDebugIds;if(!_)return;let w;const b=ei.get(m);b?w=b:(w=new Map,ei.set(m,w));const S=Object.keys(_).reduce((T,C)=>{let U;const oe=w.get(C);oe?U=oe:(U=m(C),w.set(C,U));for(let me=U.length-1;me>=0;me--){const Te=U[me];if(Te.filename){T[Te.filename]=_[C];break}}return T},{});try{h.exception.values.forEach(T=>{T.stacktrace.frames.forEach(C=>{C.filename&&(C.debug_id=S[C.filename])})})}catch{}}(o,t.stackParser);let d=r;n.captureContext&&(d=Re.clone(d).update(n.captureContext));let p=$e(o);if(d){if(d.getAttachments){const h=[...n.attachments||[],...d.getAttachments()];h.length&&(n.attachments=h)}p=d.applyToEvent(o,n)}return p.then(h=>(h&&function(m){const _={};try{m.exception.values.forEach(b=>{b.stacktrace.frames.forEach(S=>{S.debug_id&&(S.abs_path?_[S.abs_path]=S.debug_id:S.filename&&(_[S.filename]=S.debug_id),delete S.debug_id)})})}catch{}if(Object.keys(_).length===0)return;m.debug_meta=m.debug_meta||{},m.debug_meta.images=m.debug_meta.images||[];const w=m.debug_meta.images;Object.keys(_).forEach(b=>{w.push({type:"sourcemap",code_file:b,debug_id:_[b]})})}(h),typeof a=="number"&&a>0?function(m,_,w){if(!m)return null;const b={...m,...m.breadcrumbs&&{breadcrumbs:m.breadcrumbs.map(S=>({...S,...S.data&&{data:ke(S.data,_,w)}}))},...m.user&&{user:ke(m.user,_,w)},...m.contexts&&{contexts:ke(m.contexts,_,w)},...m.extra&&{extra:ke(m.extra,_,w)}};return m.contexts&&m.contexts.trace&&b.contexts&&(b.contexts.trace=m.contexts.trace,m.contexts.trace.data&&(b.contexts.trace.data=ke(m.contexts.trace.data,_,w))),m.spans&&(b.spans=m.spans.map(S=>(S.data&&(S.data=ke(S.data,_,w)),S))),b}(h,a,s):h))}const ei=new WeakMap,ti="Not capturing exception because it's already been captured.";class Ne{__init(){this._integrations={}}__init2(){this._integrationsInitialized=!1}__init3(){this._numProcessing=0}__init4(){this._outcomes={}}__init5(){this._hooks={}}constructor(e){if(Ne.prototype.__init.call(this),Ne.prototype.__init2.call(this),Ne.prototype.__init3.call(this),Ne.prototype.__init4.call(this),Ne.prototype.__init5.call(this),this._options=e,e.dsn?this._dsn=ms(e.dsn):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("No DSN provided, client will not do anything."),this._dsn){const n=function(r,a={}){const s=typeof a=="string"?a:a.tunnel,o=typeof a!="string"&&a._metadata?a._metadata.sdk:void 0;return s||`${function(u){return`${function(d){const p=d.protocol?`${d.protocol}:`:"",h=d.port?`:${d.port}`:"";return`${p}//${d.host}${h}${d.path?`/${d.path}`:""}/api/`}(u)}${u.projectId}/envelope/`}(r)}?${Ds(r,o)}`}(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){if(Yr(e))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log(ti));let a=n&&n.event_id;return this._process(this.eventFromException(e,n).then(s=>this._captureEvent(s,n,r)).then(s=>{a=s})),a}captureMessage(e,n,r,a){let s=r&&r.event_id;const o=sa(e)?this.eventFromMessage(String(e),n,r):this.eventFromException(e,r);return this._process(o.then(u=>this._captureEvent(u,r,a)).then(u=>{s=u})),s}captureEvent(e,n,r){if(n&&n.originalException&&Yr(n.originalException))return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log(ti));let a=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(s=>{a=s})),a}captureSession(e){this._isEnabled()?typeof e.release!="string"?(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),rt(e,{init:!1})):(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?this._isClientDoneProcessing(e).then(r=>n.flush(e).then(a=>r&&a)):$e(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,n))}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e){const n={};return e.forEach(r=>{r&&Zr(r,n)}),n}(this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){Zr(e,this._integrations)}sendEvent(e,n={}){if(this._dsn){let r=As(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=Ss(r,Es(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));const a=this._sendEnvelope(r);a&&a.then(s=>this.emit("afterSendEvent",e,s),null)}}sendSession(e){if(this._dsn){const n=function(r,a,s,o){const u=fa(s);return vt({sent_at:new Date().toISOString(),...u&&{sdk:u},...!!o&&{dsn:Yt(a)}},["aggregates"in r?[{type:"sessions"},r]:[{type:"session"},r.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const a=`${e}:${n}`;(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log(`Adding outcome: "${a}"`),this._outcomes[a]=this._outcomes[a]+1||1}}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_updateSessionFromEvent(e,n){let r=!1,a=!1;const s=n.exception&&n.exception.values;if(s){a=!0;for(const u of s){const d=u.mechanism;if(d&&d.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(rt(e,{...r&&{status:"crashed"},errors:e.errors||Number(a||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new W(n=>{let r=0;const a=setInterval(()=>{this._numProcessing==0?(clearInterval(a),n(!0)):(r+=1,e&&r>=e&&(clearInterval(a),n(!1)))},1)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._dsn!==void 0}_prepareEvent(e,n,r){const a=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),js(a,e,n,r).then(o=>{if(o===null)return o;const{propagationContext:u}=o.sdkProcessingMetadata||{};if(!(o.contexts&&o.contexts.trace)&&u){const{traceId:d,spanId:p,parentSpanId:h,dsc:m}=u;o.contexts={trace:{trace_id:d,span_id:p,parent_span_id:h},...o.contexts};const _=m||function(w,b,S){const T=b.getOptions(),{publicKey:C}=b.getDsn()||{},{segment:U}=S&&S.getUser()||{},oe=en({environment:T.environment||Hn,release:T.release,user_segment:U,public_key:C,trace_id:w});return b.emit&&b.emit("createDsc",oe),oe}(d,this,r);o.sdkProcessingMetadata={dynamicSamplingContext:_,...o.sdkProcessingMetadata}}return o})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(a=>a.event_id,a=>{if(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__){const s=a;s.logLevel==="log"?P.log(s.message):P.warn(s)}})}_processEvent(e,n,r){const a=this.getOptions(),{sampleRate:s}=a;if(!this._isEnabled())return Wt(new ne("SDK not enabled, will not capture event.","log"));const o=ri(e),u=ni(e),d=e.type||"error",p=`before send for type \`${d}\``;if(u&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",e),Wt(new ne(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const h=d==="replay_event"?"replay":d;return this._prepareEvent(e,n,r).then(m=>{if(m===null)throw this.recordDroppedEvent("event_processor",h,e),new ne("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return m;const _=function(w,b,S){const{beforeSend:T,beforeSendTransaction:C}=w;return ni(b)&&T?T(b,S):ri(b)&&C?C(b,S):b}(a,m,n);return function(w,b){const S=`${b} must return \`null\` or a valid event.`;if(Gn(w))return w.then(T=>{if(!nt(T)&&T!==null)throw new ne(S);return T},T=>{throw new ne(`${b} rejected with ${T}`)});if(!nt(w)&&w!==null)throw new ne(S);return w}(_,p)}).then(m=>{if(m===null)throw this.recordDroppedEvent("before_send",h,e),new ne(`${p} returned \`null\`, will not send event.`,"log");const _=r&&r.getSession();!o&&_&&this._updateSessionFromEvent(_,m);const w=m.transaction_info;if(o&&w&&m.transaction!==e.transaction){const b="custom";m.transaction_info={...w,source:b}}return this.sendEvent(m,n),m}).then(null,m=>{throw m instanceof ne?m:(this.captureException(m,{data:{__sentry__:!0},originalException:m}),new ne(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${m}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,n=>{(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.error("Error while sending event:",n)});(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,a]=n.split(":");return{reason:r,category:a,quantity:e[n]}})}}function ni(t){return t.type===void 0}function ri(t){return t.type==="transaction"}const Is=30;function Ns(t,e,n=bs(t.bufferSize||Is)){let r={};function a(s){const o=[];if(zr(s,(p,h)=>{const m=Hr(h);if(function(_,w,b=Date.now()){return function(S,T){return S[T]||S.all||0}(_,w)>b}(r,m)){const _=ii(p,h);t.recordDroppedEvent("ratelimit_backoff",m,_)}else o.push(p)}),o.length===0)return $e();const u=vt(s[0],o),d=p=>{zr(u,(h,m)=>{const _=ii(h,m);t.recordDroppedEvent(p,Hr(m),_)})};return n.add(()=>e({body:ks(u,t.textEncoder)}).then(p=>(p.statusCode!==void 0&&(p.statusCode<200||p.statusCode>=300)&&(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Sentry responded with status code ${p.statusCode} to sent event.`),r=Ts(r,p),p),p=>{throw d("network_error"),p})).then(p=>p,p=>{if(p instanceof ne)return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.error("Skipped sending event because buffer is full."),d("queue_overflow"),$e();throw p})}return a.__sentry__baseTransport__=!0,{send:a,flush:s=>n.drain(s)}}function ii(t,e){if(e==="event"||e==="transaction")return Array.isArray(t)?t[1]:void 0}const ai="7.60.1";let si;class yt{constructor(){yt.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=yt.id}setupOnce(){si=Function.prototype.toString;try{Function.prototype.toString=function(...e){const n=zn(this)||this;return si.apply(n,e)}}catch{}}}yt.__initStatic();const Ls=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Rs=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class Ke{static __initStatic(){this.id="InboundFilters"}__init(){this.name=Ke.id}constructor(e={}){this._options=e,Ke.prototype.__init.call(this)}setupOnce(e,n){const r=a=>{const s=n();if(s){const o=s.getIntegration(Ke);if(o){const u=s.getClient(),d=u?u.getOptions():{},p=function(h={},m={}){return{allowUrls:[...h.allowUrls||[],...m.allowUrls||[]],denyUrls:[...h.denyUrls||[],...m.denyUrls||[]],ignoreErrors:[...h.ignoreErrors||[],...m.ignoreErrors||[],...h.disableErrorDefaults?[]:Ls],ignoreTransactions:[...h.ignoreTransactions||[],...m.ignoreTransactions||[],...h.disableTransactionDefaults?[]:Rs],ignoreInternal:h.ignoreInternal===void 0||h.ignoreInternal}}(o._options,d);return function(h,m){return m.ignoreInternal&&function(_){try{return _.exception.values[0].type==="SentryError"}catch{}return!1}(h)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Event dropped due to being internal Sentry Error.
Event: ${Se(h)}`),!0):function(_,w){return _.type||!w||!w.length?!1:function(b){if(b.message)return[b.message];if(b.exception){const{values:S}=b.exception;try{const{type:T="",value:C=""}=S&&S[S.length-1]||{};return[`${C}`,`${T}: ${C}`]}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.error(`Cannot extract message for event ${Se(b)}`),[]}}return[]}(_).some(b=>Et(b,w))}(h,m.ignoreErrors)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Se(h)}`),!0):function(_,w){if(_.type!=="transaction"||!w||!w.length)return!1;const b=_.transaction;return!!b&&Et(b,w)}(h,m.ignoreTransactions)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Se(h)}`),!0):function(_,w){if(!w||!w.length)return!1;const b=Dt(_);return!!b&&Et(b,w)}(h,m.denyUrls)?((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Se(h)}.
Url: ${Dt(h)}`),!0):function(_,w){if(!w||!w.length)return!0;const b=Dt(_);return!b||Et(b,w)}(h,m.allowUrls)?!1:((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Se(h)}.
Url: ${Dt(h)}`),!0)}(a,p)?null:a}}return a};r.id=this.name,e(r)}}function Dt(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?function(n=[]){for(let r=n.length-1;r>=0;r--){const a=n[r];if(a&&a.filename!=="<anonymous>"&&a.filename!=="[native code]")return a.filename||null}return null}(e):null}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.error(`Cannot extract url for event ${Se(t)}`),null}}Ke.__initStatic();var Bs=Object.freeze({__proto__:null,FunctionToString:yt,InboundFilters:Ke});const N=Z;let Pn=0;function _a(){return Pn>0}function it(t,e={},n){if(typeof t!="function")return t;try{const a=t.__sentry_wrapped__;if(a)return a;if(zn(t))return t}catch{return t}const r=function(){const a=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const o=a.map(u=>it(u,e));return t.apply(this,o)}catch(o){throw Pn++,setTimeout(()=>{Pn--}),s=u=>{var d,p;u.addEventProcessor(h=>(e.mechanism&&(En(h,void 0),mt(h,e.mechanism)),h.extra={...h.extra,arguments:a},h)),d=o,K().captureException(d,{captureContext:p})},K().withScope(s),o}var s};try{for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=t[a])}catch{}ca(r,t),Wn(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:()=>t.name})}catch{}return r}function ba(t,e){const n=Kn(t,e),r={type:e&&e.name,value:Us(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function ln(t,e){return{exception:{values:[ba(t,e)]}}}function Kn(t,e){const n=e.stacktrace||e.stack||"",r=function(a){if(a){if(typeof a.framesToPop=="number")return a.framesToPop;if(Fs.test(a.message))return 1}return 0}(e);try{return t(n,r)}catch{}return[]}const Fs=/Minified React error #\d+;/i;function Us(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function Xn(t,e,n,r,a){let s;if(qn(e)&&e.error)return ln(t,e.error);if(Ir(e)||at(e,"DOMException")){const o=e;if("stack"in e)s=ln(t,e);else{const u=o.name||(Ir(o)?"DOMError":"DOMException"),d=o.message?`${u}: ${o.message}`:u;s=xn(t,d,n,r),En(s,d)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return aa(e)?ln(t,e):nt(e)||qt(e)?(s=function(o,u,d,p){const h=K().getClient(),m=h&&h.getOptions().normalizeDepth,_={exception:{values:[{type:qt(u)?u.constructor.name:p?"UnhandledRejection":"Error",value:$s(u,{isUnhandledRejection:p})}]},extra:{__serialized__:da(u,m)}};if(d){const w=Kn(o,d);w.length&&(_.exception.values[0].stacktrace={frames:w})}return _}(t,e,n,a),mt(s,{synthetic:!0}),s):(s=xn(t,e,n,r),En(s,`${e}`),mt(s,{synthetic:!0}),s)}function xn(t,e,n,r){const a={message:e};if(r&&n){const s=Kn(t,n);s.length&&(a.exception={values:[{value:e,stacktrace:{frames:s}}]})}return a}function $s(t,{isUnhandledRejection:e}){const n=function(a,s=40){const o=Object.keys(la(a));if(o.sort(),!o.length)return"[object has no keys]";if(o[0].length>=s)return Qe(o[0],s);for(let u=o.length;u>0;u--){const d=o.slice(0,u).join(", ");if(!(d.length>s))return u===o.length?d:Qe(d,s)}return""}(t),r=e?"promise rejection":"exception";return qn(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:qt(t)?`Event \`${function(a){try{const s=Object.getPrototypeOf(a);return s?s.constructor.name:void 0}catch{}}(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}const oi=1024,wa="Breadcrumbs";class _t{static __initStatic(){this.id=wa}__init(){this.name=_t.id}constructor(e){_t.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){this.options.console&&Ie("console",Vs),this.options.dom&&Ie("dom",function(e){function n(r){let a,s=typeof e=="object"?e.serializeAttribute:void 0,o=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;o&&o>oi&&((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=oi),typeof s=="string"&&(s=[s]);try{const u=r.event;a=function(d){return!!d&&!!d.target}(u)?bn(u.target,{keyAttrs:s,maxStringLength:o}):bn(u,{keyAttrs:s,maxStringLength:o})}catch{a="<unknown>"}a.length!==0&&K().addBreadcrumb({category:`ui.${r.name}`,message:a},{event:r.event,name:r.name,global:r.global})}return n}(this.options.dom)),this.options.xhr&&Ie("xhr",Js),this.options.fetch&&Ie("fetch",qs),this.options.history&&Ie("history",Gs)}addSentryBreadcrumb(e){this.options.sentry&&K().addBreadcrumb({category:"sentry."+(e.type==="transaction"?"transaction":"event"),event_id:e.event_id,level:e.level,message:Se(e)},{event:e})}}function Vs(t){for(let r=0;r<t.args.length;r++)if(t.args[r]==="ref=Ref<"){t.args[r+1]="viewRef";break}const e={category:"console",data:{arguments:t.args,logger:"console"},level:(n=t.level,n==="warn"?"warning":ws.includes(n)?n:"log"),message:Nr(t.args," ")};var n;if(t.level==="assert"){if(t.args[0]!==!1)return;e.message=`Assertion failed: ${Nr(t.args.slice(1)," ")||"console.assert"}`,e.data.arguments=t.args.slice(1)}K().addBreadcrumb(e,{input:t.args,level:t.level})}function Js(t){const{startTimestamp:e,endTimestamp:n}=t,r=t.xhr[lt];if(!e||!n||!r)return;const{method:a,url:s,status_code:o,body:u}=r,d={method:a,url:s,status_code:o},p={xhr:t.xhr,input:u,startTimestamp:e,endTimestamp:n};K().addBreadcrumb({category:"xhr",data:d,type:"http"},p)}function qs(t){const{startTimestamp:e,endTimestamp:n}=t;if(n&&(!t.fetchData.url.match(/sentry_key/)||t.fetchData.method!=="POST"))if(t.error){const r=t.fetchData,a={data:t.error,input:t.args,startTimestamp:e,endTimestamp:n};K().addBreadcrumb({category:"fetch",data:r,level:"error",type:"http"},a)}else{const r={...t.fetchData,status_code:t.response&&t.response.status},a={input:t.args,response:t.response,startTimestamp:e,endTimestamp:n};K().addBreadcrumb({category:"fetch",data:r,type:"http"},a)}}function Gs(t){let e=t.from,n=t.to;const r=on(N.location.href);let a=on(e);const s=on(n);a.path||(a=r),r.protocol===s.protocol&&r.host===s.host&&(n=s.relative),r.protocol===a.protocol&&r.host===a.host&&(e=a.relative),K().addBreadcrumb({category:"navigation",data:{from:e,to:n}})}_t.__initStatic();class Ys extends Ne{constructor(e){const n=N.SENTRY_SDK_SOURCE||"npm";e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:ai}],version:ai},super(e),e.sendClientReports&&N.document&&N.document.addEventListener("visibilitychange",()=>{N.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return function(r,a,s,o){const u=Xn(r,a,s&&s.syntheticException||void 0,o);return mt(u),u.level="error",s&&s.event_id&&(u.event_id=s.event_id),$e(u)}(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return function(a,s,o="info",u,d){const p=xn(a,s,u&&u.syntheticException||void 0,d);return p.level=o,u&&u.event_id&&(p.event_id=u.event_id),$e(p)}(this._options.stackParser,e,n,r,this._options.attachStacktrace)}sendEvent(e,n){const r=this.getIntegrationById(wa);r&&r.addSentryBreadcrumb&&r.addSentryBreadcrumb(e),super.sendEvent(e,n)}captureUserFeedback(e){if(!this._isEnabled())return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("SDK not enabled, will not capture user feedback."));const n=function(r,{metadata:a,tunnel:s,dsn:o}){const u={event_id:r.event_id,sent_at:new Date().toISOString(),...a&&a.sdk&&{sdk:{name:a.sdk.name,version:a.sdk.version}},...!!s&&!!o&&{dsn:Yt(o)}};return vt(u,[function(p){return[{type:"user_report"},p]}(r)])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log("No outcomes to send"));if(!this._dsn)return void((typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log("No dsn provided, will not send outcomes"));(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log("Sending outcomes:",e);const n=(r=e,vt((a=this._options.tunnel&&Yt(this._dsn))?{dsn:a}:{},[[{type:"client_report"},{timestamp:s||tn(),discarded_events:r}]]));var r,a,s;this._sendEnvelope(n)}}let ot;function Ws(t,e=function(){if(ot)return ot;if(Sn(N.fetch))return ot=N.fetch.bind(N);const n=N.document;let r=N.fetch;if(n&&typeof n.createElement=="function")try{const a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a);const s=a.contentWindow;s&&s.fetch&&(r=s.fetch),n.head.removeChild(a)}catch(a){(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",a)}return ot=r.bind(N)}()){let n=0,r=0;return Ns(t,function(a){const s=a.body.length;n+=s,r++;const o={body:a.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,o).then(u=>(n-=s,r--,{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}))}catch(u){return ot=void 0,n-=s,r--,Wt(u)}})}class Ce{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Ce.id}__init2(){this._installFunc={onerror:zs,onunhandledrejection:Hs}}constructor(e){Ce.prototype.__init.call(this),Ce.prototype.__init2.call(this),this._options={onerror:!0,onunhandledrejection:!0,...e}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const a=this._installFunc[r];a&&e[r]&&(n=r,(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.log(`Global Handler attached: ${n}`),a(),this._installFunc[r]=void 0)}var n}}function zs(){Ie("error",t=>{const[e,n,r]=ka();if(!e.getIntegration(Ce))return;const{msg:a,url:s,line:o,column:u,error:d}=t;if(_a()||d&&d.__sentry_own_request__)return;const p=d===void 0&&Fe(a)?function(h,m,_,w){const b=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let S=qn(h)?h.message:h,T="Error";const C=S.match(b);return C&&(T=C[1],S=C[2]),ci({exception:{values:[{type:T,value:S}]}},m,_,w)}(a,s,o,u):ci(Xn(n,d||a,void 0,r,!1),s,o,u);p.level="error",Sa(e,d,p,"onerror")})}function Hs(){Ie("unhandledrejection",t=>{const[e,n,r]=ka();if(!e.getIntegration(Ce))return;let a=t;try{"reason"in t?a=t.reason:"detail"in t&&"reason"in t.detail&&(a=t.detail.reason)}catch{}if(_a()||a&&a.__sentry_own_request__)return!0;const s=sa(a)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(a)}`}]}}:Xn(n,a,void 0,r,!0);s.level="error",Sa(e,a,s,"onunhandledrejection")})}function ci(t,e,n,r){const a=t.exception=t.exception||{},s=a.values=a.values||[],o=s[0]=s[0]||{},u=o.stacktrace=o.stacktrace||{},d=u.frames=u.frames||[],p=isNaN(parseInt(r,10))?void 0:r,h=isNaN(parseInt(n,10))?void 0:n,m=Fe(e)&&e.length>0?e:function(){try{return hs.document.location.href}catch{return""}}();return d.length===0&&d.push({colno:p,filename:m,function:"?",in_app:!0,lineno:h}),t}function Sa(t,e,n,r){mt(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function ka(){const t=K(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}Ce.__initStatic();const Qs=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class bt{static __initStatic(){this.id="TryCatch"}__init(){this.name=bt.id}constructor(e){bt.prototype.__init.call(this),this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&V(N,"setTimeout",li),this._options.setInterval&&V(N,"setInterval",li),this._options.requestAnimationFrame&&V(N,"requestAnimationFrame",Ks),this._options.XMLHttpRequest&&"XMLHttpRequest"in N&&V(XMLHttpRequest.prototype,"send",Xs);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:Qs).forEach(Zs)}}function li(t){return function(...e){const n=e[0];return e[0]=it(n,{mechanism:{data:{function:Me(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function Ks(t){return function(e){return t.apply(this,[it(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Me(t)},handled:!0,type:"instrument"}})])}}function Xs(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(r=>{r in n&&typeof n[r]=="function"&&V(n,r,function(a){const s={mechanism:{data:{function:r,handler:Me(a)},handled:!0,type:"instrument"}},o=zn(a);return o&&(s.mechanism.data.handler=Me(o)),it(a,s)})}),t.apply(this,e)}}function Zs(t){const e=N,n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(V(n,"addEventListener",function(r){return function(a,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=it(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Me(s),target:t},handled:!0,type:"instrument"}}))}catch{}return r.apply(this,[a,it(s,{mechanism:{data:{function:"addEventListener",handler:Me(s),target:t},handled:!0,type:"instrument"}}),o])}}),V(n,"removeEventListener",function(r){return function(a,s,o){const u=s;try{const d=u&&u.__sentry_wrapped__;d&&r.call(this,a,d,o)}catch{}return r.call(this,a,u,o)}}))}bt.__initStatic();class Xe{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=Xe.id}constructor(e={}){Xe.prototype.__init.call(this),this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(e,n){e((r,a)=>{const s=n(),o=s.getClient(),u=s.getIntegration(Xe);if(!o||!u)return r;const d=o.getOptions();return ds(ba,d.stackParser,d.maxValueLength,u._key,u._limit,r,a),r})}}Xe.__initStatic();class Ze{constructor(){Ze.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=Ze.id}setupOnce(){ma(e=>{if(K().getIntegration(Ze)){if(!N.navigator&&!N.location&&!N.document)return e;const n=e.request&&e.request.url||N.location&&N.location.href,{referrer:r}=N.document||{},{userAgent:a}=N.navigator||{},s={...e.request&&e.request.headers,...r&&{Referer:r},...a&&{"User-Agent":a}},o={...e.request,...n&&{url:n},headers:s};return{...e,request:o}}return e})}}Ze.__initStatic();class et{constructor(){et.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=et.id}setupOnce(e,n){const r=a=>{if(a.type)return a;const s=n().getIntegration(et);if(s){try{if(function(o,u){return u?!!(function(d,p){const h=d.message,m=p.message;return!(!h&&!m||h&&!m||!h&&m||h!==m||!di(d,p)||!ui(d,p))}(o,u)||function(d,p){const h=hi(p),m=hi(d);return!(!h||!m||h.type!==m.type||h.value!==m.value||!di(d,p)||!ui(d,p))}(o,u)):!1}(a,s._previousEvent))return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&P.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{return s._previousEvent=a}return s._previousEvent=a}return a};r.id=this.name,e(r)}}function ui(t,e){let n=pi(t),r=pi(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||r.length!==n.length)return!1;for(let a=0;a<r.length;a++){const s=r[a],o=n[a];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function di(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return n.join("")===r.join("")}catch{return!1}}function hi(t){return t.exception&&t.exception.values&&t.exception.values[0]}function pi(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}et.__initStatic();var eo=Object.freeze({__proto__:null,Breadcrumbs:_t,Dedupe:et,GlobalHandlers:Ce,HttpContext:Ze,LinkedErrors:Xe,TryCatch:bt});let Ea={};N.Sentry&&N.Sentry.Integrations&&(Ea=N.Sentry.Integrations);const fi={...Ea,...Bs,...eo};var gi="new",mi="loading",vi="loaded",Dn="joining-meeting",We="joined-meeting",Pe="left-meeting",_e="error",un="unknown",to="full",no="base",ro="*",io="iframe-ready-for-launch-config",ao="iframe-launch-config",so="theme-updated",oo="loading",co="load-attempt-failed",yi="loaded",lo="started-camera",uo="camera-error",ho="joining-meeting",po="joined-meeting",fo="left-meeting",go="participant-joined",mo="participant-updated",vo="participant-left",yo="participant-counts-updated",_o="access-state-updated",bo="meeting-session-summary-updated",wo="meeting-session-state-updated",So="waiting-participant-added",ko="waiting-participant-updated",Eo="waiting-participant-removed",Co="track-started",Mo="track-stopped",To="transcription-started",Oo="transcription-stopped",Po="transcription-error",_i="recording-started",bi="recording-stopped",xo="recording-stats",Do="recording-error",Ao="recording-upload-completed",jo="recording-data",Io="app-message",No="transcription-message",Lo="remote-media-player-started",Ro="remote-media-player-updated",Bo="remote-media-player-stopped",Fo="local-screen-share-started",Uo="local-screen-share-stopped",$o="local-screen-share-canceled",Vo="active-speaker-change",Jo="active-speaker-mode-change",qo="network-quality-change",Go="network-connection",Yo="cpu-load-change",Wo="face-counts-updated",At="fullscreen",jt="exited-fullscreen",zo="live-streaming-started",Ho="live-streaming-updated",Qo="live-streaming-stopped",Ko="live-streaming-error",Xo="lang-updated",Zo="receive-settings-updated",ec="input-settings-updated",wi="nonfatal-error",Si="error",ki=102400,dn="iframe-call-message",Ei="local-screen-start",Ci="daily-method-update-live-streaming-endpoints",It="transmit-log",ut="daily-custom-track",$t={NONE:"none",BGBLUR:"background-blur",BGIMAGE:"background-image",FACE_DETECTION:"face-detection"},Ca={NONE:"none",NOISE_CANCELLATION:"noise-cancellation"},An={PLAY:"play",PAUSE:"pause"},Mi=10,hn=["jpg","png","jpeg"],tc="add-endpoints",nc="remove-endpoints",Ti="sip-call-transfer";function ie(){return!A()&&typeof window<"u"&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""}function A(){return typeof navigator<"u"&&navigator.product&&navigator.product==="ReactNative"}function Ma(){return navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia}function rc(){return!!(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)&&(function(t,e){if(!t||!e)return!0;switch(t){case"Chrome":return e.major>=75;case"Safari":return RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")&&!(e.major===13&&e.minor===0&&e.point===0);case"Firefox":return e.major>=67}return!0}(Ve(),In())||A())}function Oi(){if(A()||!document)return!1;var t=document.createElement("iframe");return!!t.requestFullscreen||!!t.webkitRequestFullscreen}var ic=function(){try{var t=document.createElement("canvas"),e=t.getContext("webgl2")!=null;return t.remove(),e}catch{return!1}}();function Ta(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];return!A()&&!!ic&&(t?function(){return jn()?!1:["Chrome","Firefox"].includes(Ve())}():function(){if(jn())return!1;var e=Ve();if(e==="Safari"){var n=er();if(n.major<15||n.major===15&&n.minor<4)return!1}return e==="Chrome"?Zn().major>=77:e==="Firefox"?tr().major>=97:["Chrome","Firefox","Safari"].includes(e)}())}var ac=["Chrome","Firefox"];function Oa(){return!A()&&!jn()&&typeof AudioWorkletNode<"u"&&ac.includes(Ve())}function Pi(){return Ma()&&!function(){var t,e=Ve();if(!ie())return!0;switch(e){case"Chrome":return(t=Zn()).major&&t.major>0&&t.major<75;case"Firefox":return(t=tr()).major<91;case"Safari":return(t=er()).major<13||t.major===13&&t.minor<1;default:return!0}}()}function jn(){var t,e,n=ie(),r=n.match(/Mac/)&&(!A()&&typeof window<"u"&&(t=window)!==null&&t!==void 0&&(e=t.navigator)!==null&&e!==void 0&&e.maxTouchPoints?window.navigator.maxTouchPoints:0)>=5;return!!(n.match(/Mobi/)||n.match(/Android/)||r)||!!ie().match(/DailyAnd\//)||void 0}function Ve(){if(typeof window<"u"){var t=ie();return Pa()?"Safari":t.indexOf("Edge")>-1?"Edge":t.match(/Chrome\//)?"Chrome":t.indexOf("Safari")>-1?"Safari":t.indexOf("Firefox")>-1?"Firefox":t.indexOf("MSIE")>-1||t.indexOf(".NET")>-1?"IE":"Unknown Browser"}}function In(){switch(Ve()){case"Chrome":return Zn();case"Safari":return er();case"Firefox":return tr();case"Edge":return function(){var t=0,e=0;if(typeof window<"u"){var n=ie().match(/Edge\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}()}}function Zn(){var t=0,e=0,n=0,r=0,a=!1;if(typeof window<"u"){var s=ie(),o=s.match(/Chrome\/(\d+).(\d+).(\d+).(\d+)/);if(o)try{t=parseInt(o[1]),e=parseInt(o[2]),n=parseInt(o[3]),r=parseInt(o[4]),a=s.indexOf("OPR/")>-1}catch{}}return{major:t,minor:e,build:n,patch:r,opera:a}}function Pa(){return!!ie().match(/iPad|iPhone|iPod/i)&&Ma()}function er(){var t=0,e=0,n=0;if(typeof window<"u"){var r=ie().match(/Version\/(\d+).(\d+)(.(\d+))?/);if(r)try{t=parseInt(r[1]),e=parseInt(r[2]),n=parseInt(r[4])}catch{}else Pa()&&(t=14,e=0,n=3)}return{major:t,minor:e,point:n}}function tr(){var t=0,e=0;if(typeof window<"u"){var n=ie().match(/Firefox\/(\d+).(\d+)/);if(n)try{t=parseInt(n[1]),e=parseInt(n[2])}catch{}}return{major:t,minor:e}}var xa=function(){function t(){ae(this,t)}return se(t,[{key:"addListenerForMessagesFromCallMachine",value:function(e,n,r){st()}},{key:"addListenerForMessagesFromDailyJs",value:function(e,n,r){st()}},{key:"sendMessageToCallMachine",value:function(e,n,r,a){st()}},{key:"sendMessageToDailyJs",value:function(e,n){st()}},{key:"removeListener",value:function(e){st()}}]),t}();function xi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function pn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xi(Object(n),!0).forEach(function(r){we(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=re(t);if(e){var a=re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xt(this,n)}}var oc=function(t){Kt(n,xa);var e=sc(n);function n(){var r;return ae(this,n),(r=e.call(this))._wrappedListeners={},r._messageCallbacks={},r}return se(n,[{key:"addListenerForMessagesFromCallMachine",value:function(r,a,s){var o=this,u=function(d){if(d.data&&d.data.what==="iframe-call-message"&&(!d.data.callClientId||d.data.callClientId===a)&&(!d.data.from||d.data.from!=="module")){var p=pn({},d.data);if(delete p.from,p.callbackStamp&&o._messageCallbacks[p.callbackStamp]){var h=p.callbackStamp;o._messageCallbacks[h].call(s,p),delete o._messageCallbacks[h]}delete p.what,delete p.callbackStamp,r.call(s,p)}};this._wrappedListeners[r]=u,window.addEventListener("message",u)}},{key:"addListenerForMessagesFromDailyJs",value:function(r,a,s){var o=function(u){var d;if(!(!u.data||u.data.what!==dn||!u.data.action||u.data.from&&u.data.from!=="module"||u.data.callClientId&&a&&u.data.callClientId!==a||u!=null&&(d=u.data)!==null&&d!==void 0&&d.callFrameId)){var p=u.data;r.call(s,p)}};this._wrappedListeners[r]=o,window.addEventListener("message",o)}},{key:"sendMessageToCallMachine",value:function(r,a,s,o){if(!o)throw new Error("undefined callClientId. Are you trying to use a DailyCall instance previously destroyed?");var u=pn({},r);if(u.what=dn,u.from="module",u.callClientId=o,a){var d=Zt();this._messageCallbacks[d]=a,u.callbackStamp=d}var p=s?s.contentWindow:window,h=this._callMachineTargetOrigin(s);h&&p.postMessage(u,h)}},{key:"sendMessageToDailyJs",value:function(r,a){r.what=dn,r.callClientId=a,r.from="embedded",window.postMessage(r,this._targetOriginFromWindowLocation())}},{key:"removeListener",value:function(r){var a=this._wrappedListeners[r];a&&(window.removeEventListener("message",a),delete this._wrappedListeners[r])}},{key:"forwardPackagedMessageToCallMachine",value:function(r,a,s){var o=pn({},r);o.callClientId=s;var u=a?a.contentWindow:window,d=this._callMachineTargetOrigin(a);d&&u.postMessage(o,d)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(r,a){var s=function(o){if(o.data&&o.data.what==="iframe-call-message"&&(!o.data.callClientId||o.data.callClientId===a)&&(!o.data.from||o.data.from!=="module")){var u=o.data;r(u)}};return this._wrappedListeners[r]=s,window.addEventListener("message",s),r}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(r){var a=this._wrappedListeners[r];a&&(window.removeEventListener("message",a),delete this._wrappedListeners[r])}},{key:"_callMachineTargetOrigin",value:function(r){return r?r.src?new URL(r.src).origin:void 0:this._targetOriginFromWindowLocation()}},{key:"_targetOriginFromWindowLocation",value:function(){return window.location.protocol==="file:"?"*":window.location.origin}}]),n}();function cc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=re(t);if(e){var a=re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xt(this,n)}}var lc=function(t){Kt(n,xa);var e=cc(n);function n(){var r;return ae(this,n),r=e.call(this),global.callMachineToDailyJsEmitter=global.callMachineToDailyJsEmitter||new ge.EventEmitter,global.dailyJsToCallMachineEmitter=global.dailyJsToCallMachineEmitter||new ge.EventEmitter,r._wrappedListeners={},r._messageCallbacks={},r}return se(n,[{key:"addListenerForMessagesFromCallMachine",value:function(r,a,s){this._addListener(r,global.callMachineToDailyJsEmitter,s,"received call machine message")}},{key:"addListenerForMessagesFromDailyJs",value:function(r,a,s){this._addListener(r,global.dailyJsToCallMachineEmitter,s,"received daily-js message")}},{key:"sendMessageToCallMachine",value:function(r,a){this._sendMessage(r,global.dailyJsToCallMachineEmitter,"sending message to call machine",a)}},{key:"sendMessageToDailyJs",value:function(r){this._sendMessage(r,global.callMachineToDailyJsEmitter,"sending message to daily-js")}},{key:"removeListener",value:function(r){var a=this._wrappedListeners[r];a&&(global.callMachineToDailyJsEmitter.removeListener("message",a),global.dailyJsToCallMachineEmitter.removeListener("message",a),delete this._wrappedListeners[r])}},{key:"_addListener",value:function(r,a,s,o){var u=this,d=function(p){if(p.callbackStamp&&u._messageCallbacks[p.callbackStamp]){var h=p.callbackStamp;u._messageCallbacks[h].call(s,p),delete u._messageCallbacks[h]}r.call(s,p)};this._wrappedListeners[r]=d,a.addListener("message",d)}},{key:"_sendMessage",value:function(r,a,s,o){if(o){var u=Zt();this._messageCallbacks[u]=o,r.callbackStamp=u}a.emit("message",r)}}]),n}(),Nn="replace",Ln="shallow-merge",Di=[Nn,Ln],uc=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data,r=e.mergeStrategy,a=r===void 0?Nn:r;ae(this,t),t._validateMergeStrategy(a),t._validateData(n,a),this.mergeStrategy=a,this.data=n}return se(t,[{key:"isNoOp",value:function(){return t.isNoOpUpdate(this.data,this.mergeStrategy)}}],[{key:"isNoOpUpdate",value:function(e,n){return Object.keys(e).length===0&&n===Ln}},{key:"_validateMergeStrategy",value:function(e){if(!Di.includes(e))throw Error("Unrecognized mergeStrategy provided. Options are: [".concat(Di,"]"))}},{key:"_validateData",value:function(e,n){if(!function(u){if(u==null||L(u)!=="object")return!1;var d=Object.getPrototypeOf(u);return d==null||d===Object.prototype}(e))throw Error("Meeting session data must be a plain (map-like) object");var r;try{if(r=JSON.stringify(e),n===Nn){var a=JSON.parse(r);z(a,e)||console.warn("The meeting session data provided will be modified when serialized.",a,e)}else if(n===Ln){for(var s in e)if(Object.hasOwnProperty.call(e,s)&&e[s]!==void 0){var o=JSON.parse(JSON.stringify(e[s]));z(e[s],o)||console.warn("At least one key in the meeting session data provided will be modified when serialized.",o,e[s])}}}catch(u){throw Error("Meeting session data must be serializable to JSON: ".concat(u))}if(r.length>ki)throw Error("Meeting session data is too large (".concat(r.length," characters). Maximum size suppported is ").concat(ki,"."))}}]),t}();function Rn(t,e,n){return Rn=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct.bind():function(r,a,s){var o=[null];o.push.apply(o,a);var u=new(Function.bind.apply(r,o));return s&&ft(u,s.prototype),u},Rn.apply(null,arguments)}function Bn(t){var e=typeof Map=="function"?new Map:void 0;return Bn=function(n){if(n===null||(r=n,Function.toString.call(r).indexOf("[native code]")===-1))return n;var r;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(n))return e.get(n);e.set(n,a)}function a(){return Rn(n,arguments,re(this).constructor)}return a.prototype=Object.create(n.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),ft(a,n)},Bn(t)}function dc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=re(t);if(e){var a=re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xt(this,n)}}function Ai(t){var e,n=(e=window._daily)===null||e===void 0?void 0:e.pendings;if(n){var r=n.indexOf(t);r!==-1&&n.splice(r,1)}}var hc=function(){function t(e){ae(this,t),this._currentLoad=null,this._callClientId=e}return se(t,[{key:"load",value:function(){var e,n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0,s=arguments.length>2?arguments[2]:void 0;if(this.loaded)return window._daily.instances[this._callClientId].callMachine.reset(),void a(!0);e=this._callClientId,window._daily.pendings.push(e),this._currentLoad&&this._currentLoad.cancel(),this._currentLoad=new pc(r,function(){a(!1)},function(o,u){u||Ai(n._callClientId),s(o,u)}),this._currentLoad.start()}},{key:"cancel",value:function(){this._currentLoad&&this._currentLoad.cancel(),Ai(this._callClientId)}},{key:"loaded",get:function(){return this._currentLoad&&this._currentLoad.succeeded}}]),t}(),pc=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;ae(this,t),this._attemptsRemaining=3,this._currentAttempt=null,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r}return se(t,[{key:"start",value:function(){var e=this;this._currentAttempt||(this._currentAttempt=new ji(this._dailyConfig,this._successCallback,function n(r){e._currentAttempt.cancelled||(e._attemptsRemaining--,e._failureCallback(r,e._attemptsRemaining>0),e._attemptsRemaining<=0||setTimeout(function(){e._currentAttempt.cancelled||(e._currentAttempt=new ji(e._dailyConfig,e._successCallback,n),e._currentAttempt.start())},3e3))}),this._currentAttempt.start())}},{key:"cancel",value:function(){this._currentAttempt&&this._currentAttempt.cancel()}},{key:"cancelled",get:function(){return this._currentAttempt&&this._currentAttempt.cancelled}},{key:"succeeded",get:function(){return this._currentAttempt&&this._currentAttempt.succeeded}}]),t}(),fn=function(t){Kt(n,Bn(Error));var e=dc(n);function n(){return ae(this,n),e.apply(this,arguments)}return se(n)}(),Ht=2e4,ji=function(){function t(n,r,a){ae(this,t),this._loadAttemptImpl=A()||!n.avoidEval?new fc(n,r,a):new gc(n,r,a)}var e;return se(t,[{key:"start",value:(e=M(function*(){return this._loadAttemptImpl.start()}),function(){return e.apply(this,arguments)})},{key:"cancel",value:function(){this._loadAttemptImpl.cancel()}},{key:"cancelled",get:function(){return this._loadAttemptImpl.cancelled}},{key:"succeeded",get:function(){return this._loadAttemptImpl.succeeded}}]),t}(),fc=function(){function t(s,o,u){ae(this,t),this.cancelled=!1,this.succeeded=!1,this._networkTimedOut=!1,this._networkTimeout=null,this._iosCache=typeof iOSCallObjectBundleCache<"u"&&iOSCallObjectBundleCache,this._refetchHeaders=null,this._dailyConfig=s,this._successCallback=o,this._failureCallback=u}var e,n,r,a;return se(t,[{key:"start",value:(a=M(function*(){var s=Jt(this._dailyConfig);!(yield this._tryLoadFromIOSCache(s))&&this._loadFromNetwork(s)}),function(){return a.apply(this,arguments)})},{key:"cancel",value:function(){clearTimeout(this._networkTimeout),this.cancelled=!0}},{key:"_tryLoadFromIOSCache",value:(r=M(function*(s){if(!this._iosCache)return!1;try{var o=yield this._iosCache.get(s);return!!this.cancelled||!!o&&(o.code?(Function('"use strict";'+o.code)(),this.succeeded=!0,this._successCallback(),!0):(this._refetchHeaders=o.refetchHeaders,!1))}catch{return!1}}),function(s){return r.apply(this,arguments)})},{key:"_loadFromNetwork",value:(n=M(function*(s){var o=this;this._networkTimeout=setTimeout(function(){o._networkTimedOut=!0,o._failureCallback({msg:"Timed out (>".concat(Ht," ms) when loading call object bundle ").concat(s),type:"timeout"})},Ht);try{var u=this._refetchHeaders?{headers:this._refetchHeaders}:{},d=yield fetch(s,u);if(clearTimeout(this._networkTimeout),this.cancelled||this._networkTimedOut)throw new fn;var p=yield this._getBundleCodeFromResponse(s,d);if(this.cancelled)throw new fn;Function('"use strict";'+p)(),this._iosCache&&this._iosCache.set(s,p,d.headers),this.succeeded=!0,this._successCallback()}catch(h){if(clearTimeout(this._networkTimeout),h instanceof fn||this.cancelled||this._networkTimedOut)return;this._failureCallback({msg:"Failed to load call object bundle ".concat(s,": ").concat(h),type:h.message})}}),function(s){return n.apply(this,arguments)})},{key:"_getBundleCodeFromResponse",value:(e=M(function*(s,o){if(o.ok)return yield o.text();if(this._iosCache&&o.status===304)return(yield this._iosCache.renew(s,o.headers)).code;throw new Error("Received ".concat(o.status," response"))}),function(s,o){return e.apply(this,arguments)})}]),t}(),gc=function(){function t(e,n,r){ae(this,t),this.cancelled=!1,this.succeeded=!1,this._dailyConfig=e,this._successCallback=n,this._failureCallback=r,this._attemptId=Zt(),this._networkTimeout=null,this._scriptElement=null}return se(t,[{key:"start",value:function(){window._dailyCallMachineLoadWaitlist||(window._dailyCallMachineLoadWaitlist=new Set);var e=Jt(this._dailyConfig);(typeof document>"u"?"undefined":L(document))==="object"?this._startLoading(e):this._failureCallback({msg:"Call object bundle must be loaded in a DOM/web context",type:"missing context"})}},{key:"cancel",value:function(){this._stopLoading(),this.cancelled=!0}},{key:"_startLoading",value:function(e){var n=this;this._signUpForCallMachineLoadWaitlist(),this._networkTimeout=setTimeout(function(){n._stopLoading(),n._failureCallback({msg:"Timed out (>".concat(Ht," ms) when loading call object bundle ").concat(e),type:"timeout"})},Ht);var r=document.getElementsByTagName("head")[0],a=document.createElement("script");this._scriptElement=a,a.onload=function(){n._stopLoading(),n.succeeded=!0,n._successCallback()},a.onerror=function(s){n._stopLoading(),n._failureCallback({msg:"Failed to load call object bundle ".concat(s.target.src),type:s.message})},a.src=e,r.appendChild(a)}},{key:"_stopLoading",value:function(){this._withdrawFromCallMachineLoadWaitlist(),clearTimeout(this._networkTimeout),this._scriptElement&&(this._scriptElement.onload=null,this._scriptElement.onerror=null)}},{key:"_signUpForCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.add(this._attemptId)}},{key:"_withdrawFromCallMachineLoadWaitlist",value:function(){window._dailyCallMachineLoadWaitlist.delete(this._attemptId)}}]),t}(),Nt=function(t,e,n){return vc(t.local,e,n)===!0},mc=function(t,e,n){return t.local.streams&&t.local.streams[e]&&t.local.streams[e].stream&&t.local.streams[e].stream["get".concat(n==="video"?"Video":"Audio","Tracks")]()[0]},ze=function(t,e,n,r){var a=yc(t,e,n,r);return a&&a.pendingTrack},vc=function(t,e,n){if(!t)return!1;var r=function(s){switch(s){case"avatar":return!0;case"staged":return s;default:return!!s}},a=t.public.subscribedTracks;return a&&a[e]?["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo"].indexOf(n)===-1&&a[e].custom?[!0,"staged"].includes(a[e].custom)?r(a[e].custom):r(a[e].custom[n]):r(a[e][n]):!a||r(a.ALL)},yc=function(t,e,n,r){var a=Object.values(t.streams||{}).filter(function(s){return s.participantId===e&&s.type===n&&s.pendingTrack&&s.pendingTrack.kind===r}).sort(function(s,o){return new Date(o.starttime)-new Date(s.starttime)});return a&&a[0]},_c=function(t,e){var n=t.local.public.customTracks;if(n&&n[e])return n[e].track};function Ii(t,e){for(var n=e.getState(),r=0,a=["cam","screen"];r<a.length;r++)for(var s=a[r],o=0,u=["video","audio"];o<u.length;o++){var d=u[o],p=s==="cam"?d:"screen".concat(d.charAt(0).toUpperCase()+d.slice(1)),h=t.tracks[p];if(h){var m=t.local?mc(n,s,d):ze(n,t.session_id,s,d);h.state==="playable"&&(h.track=m),h.persistentTrack=m}}}function Ni(t,e){try{var n=e.getState();for(var r in t.tracks)if(!bc(r)){var a=t.tracks[r].kind;if(a){var s=t.tracks[r];if(s){var o=t.local?_c(n,r):ze(n,t.session_id,r,a);s.state==="playable"&&(t.tracks[r].track=o),s.persistentTrack=o}}else console.error("unknown type for custom track")}}catch(u){console.error(u)}}function bc(t){return["video","audio","screenVideo","screenAudio"].includes(t)}function Li(t,e,n){var r=n.getState();if(t.local){if(t.audio)try{t.audioTrack=r.local.streams.cam.stream.getAudioTracks()[0],t.audioTrack||(t.audio=!1)}catch{}if(t.video)try{t.videoTrack=r.local.streams.cam.stream.getVideoTracks()[0],t.videoTrack||(t.video=!1)}catch{}if(t.screen)try{t.screenVideoTrack=r.local.streams.screen.stream.getVideoTracks()[0],t.screenAudioTrack=r.local.streams.screen.stream.getAudioTracks()[0],t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch{}}else{var a=!0;try{var s=r.participants[t.session_id];s&&s.public&&s.public.rtcType&&s.public.rtcType.impl==="peer-to-peer"&&s.private&&!["connected","completed"].includes(s.private.peeringState)&&(a=!1)}catch(h){console.error(h)}if(!a)return t.audio=!1,t.audioTrack=!1,t.video=!1,t.videoTrack=!1,t.screen=!1,void(t.screenTrack=!1);try{if(r.streams,t.audio&&Nt(r,t.session_id,"cam-audio")){var o=ze(r,t.session_id,"cam","audio");o&&(e&&e.audioTrack&&e.audioTrack.id===o.id?t.audioTrack=o:o.muted||(t.audioTrack=o)),t.audioTrack||(t.audio=!1)}if(t.video&&Nt(r,t.session_id,"cam-video")){var u=ze(r,t.session_id,"cam","video");u&&(e&&e.videoTrack&&e.videoTrack.id===u.id?t.videoTrack=u:u.muted||(t.videoTrack=u)),t.videoTrack||(t.video=!1)}if(t.screen&&Nt(r,t.session_id,"screen-audio")){var d=ze(r,t.session_id,"screen","audio");d&&(e&&e.screenAudioTrack&&e.screenAudioTrack.id===d.id?t.screenAudioTrack=d:d.muted||(t.screenAudioTrack=d))}if(t.screen&&Nt(r,t.session_id,"screen-video")){var p=ze(r,t.session_id,"screen","video");p&&(e&&e.screenVideoTrack&&e.screenVideoTrack.id===p.id?t.screenVideoTrack=p:p.muted||(t.screenVideoTrack=p))}t.screenVideoTrack||t.screenAudioTrack||(t.screen=!1)}catch(h){console.error("unexpected error matching up tracks",h)}}}function wc(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(d,p){if(d){if(typeof d=="string")return Ri(d,p);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Ri(d,p)}}(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return o=d.done,d},e:function(d){u=!0,s=d},f:function(){try{o||n.return==null||n.return()}finally{if(u)throw s}}}}function Ri(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var le=new Map,tt=null;function Sc(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(d,p){if(d){if(typeof d=="string")return Bi(d,p);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return Bi(d,p)}}(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return o=d.done,d},e:function(d){u=!0,s=d},f:function(){try{o||n.return==null||n.return()}finally{if(u)throw s}}}}function Bi(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ue=new Map,pt=null,kc=3e3;function Ec(t){Da()?function(e){le.has(e)||(le.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){le.has(e)&&(le.get(e).lastDevicesString=JSON.stringify(n),tt||(tt=function(){var r=M(function*(){var a,s=yield navigator.mediaDevices.enumerateDevices(),o=wc(le.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value,d=JSON.stringify(s);d!==le.get(u).lastDevicesString&&(le.get(u).lastDevicesString=d,u(s))}}catch(p){o.e(p)}finally{o.f()}});return function(){return r.apply(this,arguments)}}(),navigator.mediaDevices.addEventListener("devicechange",tt)))}).catch(function(){}))}(t):function(e){ue.has(e)||(ue.set(e,{}),navigator.mediaDevices.enumerateDevices().then(function(n){ue.has(e)&&(ue.get(e).lastDevicesString=JSON.stringify(n),pt||(pt=setInterval(M(function*(){var r,a=yield navigator.mediaDevices.enumerateDevices(),s=Sc(ue.keys());try{for(s.s();!(r=s.n()).done;){var o=r.value,u=JSON.stringify(a);u!==ue.get(o).lastDevicesString&&(ue.get(o).lastDevicesString=u,o(a))}}catch(d){s.e(d)}finally{s.f()}}),kc)))}))}(t)}function Cc(t){Da()?function(e){le.has(e)&&(le.delete(e),le.size===0&&tt&&(navigator.mediaDevices.removeEventListener("devicechange",tt),tt=null))}(t):function(e){ue.has(e)&&(ue.delete(e),ue.size===0&&pt&&(clearInterval(pt),pt=null))}(t)}function Da(){return A()||navigator.mediaDevices.ondevicechange!==void 0}var Mc=new Set;function Tc(t,e){return t&&t.readyState==="live"&&!function(n,r){return n.muted&&!Mc.has(n.id)}(t)}var Oc=["result"],Pc=["preserveIframe"];function Fi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fi(Object(n),!0).forEach(function(r){we(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fi(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xc(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=re(t);if(e){var a=re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xt(this,n)}}function Ui(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(d,p){if(d){if(typeof d=="string")return $i(d,p);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return $i(d,p)}}(t))||e){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,u=!1;return{s:function(){n=n.call(t)},n:function(){var d=n.next();return o=d.done,d},e:function(d){u=!0,s=d},f:function(){try{o||n.return==null||n.return()}finally{if(u)throw s}}}}function $i(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xe={},Vi="video",Dc="voice",Ji=A()?{data:{}}:{data:{},topology:"none"},qi={present:0,hidden:0},Aa={maxBitrate:{min:1e5,max:25e5},maxFramerate:{min:1,max:30},scaleResolutionDownBy:{min:1,max:8}},gn=Object.keys(Aa),Gi=["state","volume","simulcastEncodings"],Yi={androidInCallNotification:{title:"string",subtitle:"string",iconName:"string",disableForCustomOverride:"boolean"},disableAutoDeviceManagement:{audio:"boolean",video:"boolean"}},Qt={id:{iconPath:"string",iconPathDarkMode:"string",label:"string",tooltip:"string"}},Fn={id:{allow:"string",controlledBy:"'*' | 'owners' | string[]",csp:"string",iconURL:"string",label:"string",loading:"'eager' | 'lazy'",location:"'main' | 'sidebar'",name:"string",referrerPolicy:"string",sandbox:"string",src:"string",srcdoc:"string",shared:"string[] | 'owners' | boolean"}},De={customIntegrations:{validate:Ua,help:Ba()},customTrayButtons:{validate:Fa,help:"customTrayButtons should be a dictionary of the type ".concat(JSON.stringify(Qt))},url:{validate:function(t){return typeof t=="string"},help:"url should be a string"},baseUrl:{validate:function(t){return typeof t=="string"},help:"baseUrl should be a string"},token:{validate:function(t){return typeof t=="string"},help:"token should be a string",queryString:"t"},dailyConfig:{validate:function(t,e){try{return e.validateDailyConfig(t),!0}catch(n){console.error("Failed to validate dailyConfig",n)}return!1},help:"Unsupported dailyConfig. Check error logs for detailed info."},reactNativeConfig:{validate:function(t){return $a(t,Yi)},help:"reactNativeConfig should look like ".concat(JSON.stringify(Yi),", all fields optional")},lang:{validate:function(t){return["de","en-us","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr","user"].includes(t)},help:"language not supported. Options are: de, en-us, en, es, fi, fr, it, jp, ka, nl, no, pl, pt, pt-BR, ru, sv, tr, user"},userName:!0,userData:{validate:function(t){try{return ja(t),!0}catch(e){return console.error(e),!1}},help:"invalid userData type provided"},startVideoOff:!0,startAudioOff:!0,activeSpeakerMode:!0,showLeaveButton:!0,showLocalVideo:!0,showParticipantsBar:!0,showFullscreenButton:!0,showUserNameChangeUI:!0,iframeStyle:!0,customLayout:!0,cssFile:!0,cssText:!0,bodyClass:!0,videoSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.videoDeviceId=t),e._preloadCache.videoDeviceId=t,!0}},audioSource:{validate:function(t,e){return t instanceof MediaStreamTrack&&(e._sharedTracks.audioDeviceId=t),e._preloadCache.audioDeviceId=t,!0}},subscribeToTracksAutomatically:{validate:function(t,e){return e._preloadCache.subscribeToTracksAutomatically=t,!0}},theme:{validate:function(t){var e=["accent","accentText","background","backgroundAccent","baseText","border","mainAreaBg","mainAreaBgAccent","mainAreaText","supportiveText"],n=function(r){for(var a=0,s=Object.keys(r);a<s.length;a++){var o=s[a];if(!e.includes(o))return console.error('unsupported color "'.concat(o,'". Valid colors: ').concat(e.join(", "))),!1;if(!r[o].match(/^#[0-9a-f]{6}|#[0-9a-f]{3}$/i))return console.error("".concat(o,' theme color should be provided in valid hex color format. Received: "').concat(r[o],'"')),!1}return!0};return L(t)==="object"&&("light"in t&&"dark"in t||"colors"in t)?"light"in t&&"dark"in t?"colors"in t.light?"colors"in t.dark?n(t.light.colors)&&n(t.dark.colors):(console.error('Dark theme is missing "colors" property.',t),!1):(console.error('Light theme is missing "colors" property.',t),!1):n(t.colors):(console.error('Theme must contain either both "light" and "dark" properties, or "colors".',t),!1)},help:"unsupported theme configuration. Check error logs for detailed info."},layoutConfig:{validate:function(t){if("grid"in t){var e=t.grid;if("maxTilesPerPage"in e){if(!Number.isInteger(e.maxTilesPerPage))return console.error("grid.maxTilesPerPage should be an integer. You passed ".concat(e.maxTilesPerPage,".")),!1;if(e.maxTilesPerPage>49)return console.error("grid.maxTilesPerPage can't be larger than 49 without sacrificing browser performance. Please contact us at https://www.daily.co/contact to talk about your use case."),!1}if("minTilesPerPage"in e){if(!Number.isInteger(e.minTilesPerPage))return console.error("grid.minTilesPerPage should be an integer. You passed ".concat(e.minTilesPerPage,".")),!1;if(e.minTilesPerPage<1)return console.error("grid.minTilesPerPage can't be lower than 1."),!1;if("maxTilesPerPage"in e&&e.minTilesPerPage>e.maxTilesPerPage)return console.error("grid.minTilesPerPage can't be higher than grid.maxTilesPerPage."),!1}}return!0},help:"unsupported layoutConfig. Check error logs for detailed info."},receiveSettings:{validate:function(t){return Ia(t,{allowAllParticipantsKey:!1})},help:Ra({allowAllParticipantsKey:!1})},sendSettings:{validate:function(t,e){return!!function(n,r){try{return r.validateUpdateSendSettings(n),!0}catch(a){return console.error("Failed to validate send settings",a),!1}}(t,e)&&(e._preloadCache.sendSettings=t,!0)},help:"Invalid sendSettings provided. Check error logs for detailed info."},inputSettings:{validate:function(t,e){var n;return!!Na(t)&&(e._preloadCache.inputSettings||(e._preloadCache.inputSettings={}),La(t,(n=e.properties)===null||n===void 0?void 0:n.dailyConfig),t.audio&&(e._preloadCache.inputSettings.audio=t.audio),t.video&&(e._preloadCache.inputSettings.video=t.video),!0)},help:Un()},layout:{validate:function(t){return t==="custom-v1"||t==="browser"||t==="none"},help:'layout may only be set to "custom-v1"',queryString:"layout"},emb:{queryString:"emb"},embHref:{queryString:"embHref"},dailyJsVersion:{queryString:"dailyJsVersion"},proxy:{queryString:"proxy"},strictMode:!0,allowMultipleCallInstances:!0},Lt={styles:{validate:function(t){for(var e in t)if(e!=="cam"&&e!=="screen")return!1;if(t.cam){for(var n in t.cam)if(n!=="div"&&n!=="video")return!1}if(t.screen){for(var r in t.screen)if(r!=="div"&&r!=="video")return!1}return!0},help:"styles format should be a subset of: { cam: {div: {}, video: {}}, screen: {div: {}, video: {}} }"},setSubscribedTracks:{validate:function(t,e){if(e._preloadCache.subscribeToTracksAutomatically)return!1;var n=[!0,!1,"staged"];if(n.includes(t)||!A()&&t==="avatar")return!0;var r=["audio","video","screenAudio","screenVideo","rmpAudio","rmpVideo"];return function a(s){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1];for(var u in s)if(u==="custom"){if(!n.includes(s[u])&&!a(s[u],!0))return!1}else{var d=!o&&!r.includes(u),p=!n.includes(s[u]);if(d||p)return!1}return!0}(t)},help:"setSubscribedTracks cannot be used when setSubscribeToTracksAutomatically is enabled, and should be of the form: "+"true".concat(A()?"":" | 'avatar'"," | false | 'staged' | { [audio: true|false|'staged'], [video: true|false|'staged'], [screenAudio: true|false|'staged'], [screenVideo: true|false|'staged'] }")},setAudio:!0,setVideo:!0,setScreenShare:{validate:function(t){return t===!1},help:"setScreenShare must be false, as it's only meant for stopping remote participants' screen shares"},eject:!0,updatePermissions:{validate:function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r=Be(n[e],2),a=r[0],s=r[1];switch(a){case"hasPresence":if(typeof s!="boolean")return!1;break;case"canSend":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var o,u=["video","audio","screenVideo","screenAudio","customVideo","customAudio"],d=Ui(s);try{for(d.s();!(o=d.n()).done;){var p=o.value;if(!u.includes(p))return!1}}catch(b){d.e(b)}finally{d.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canSend=new Set(s));break;case"canAdmin":if(s instanceof Set||s instanceof Array||Array.isArray(s)){var h,m=["participants","streaming","transcription"],_=Ui(s);try{for(_.s();!(h=_.n()).done;){var w=h.value;if(!m.includes(w))return!1}}catch(b){_.e(b)}finally{_.f()}}else if(typeof s!="boolean")return!1;(s instanceof Array||Array.isArray(s))&&(t.canAdmin=new Set(s));break;default:return!1}}return!0},help:"updatePermissions can take hasPresence, canSend, and canAdmin permissions. hasPresence must be a boolean. canSend can be a boolean or an Array or Set of media types (video, audio, screenVideo, screenAudio, customVideo, customAudio). canAdmin can be a boolean or an Array or Set of admin types (participants, streaming, transcription)."}};Promise.any||(Promise.any=function(){var t=M(function*(e){return new Promise(function(n,r){var a=[];e.forEach(function(s){return Promise.resolve(s).then(function(o){n(o)}).catch(function(o){a.push(o),a.length===e.length&&r(a)})})})});return function(e){return t.apply(this,arguments)}}());var Ac=function(t){Kt(X,ge);var e,n,r,a,s,o,u,d,p,h,m,_,w,b,S,T,C,U,oe,me,Te,Je,ve,nr,rr,ir,ar,sr,or,cr,lr,ur,dr,hr,pr,fr,gr,mr,Va=xc(X);function X(i){var c,l,g,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ae(this,X),we(pe(l=Va.call(this)),"startListeningForDeviceChanges",function(){Ec(l.handleDeviceChange)}),we(pe(l),"stopListeningForDeviceChanges",function(){Cc(l.handleDeviceChange)}),we(pe(l),"handleDeviceChange",function(k){k=k.map(function(E){return JSON.parse(JSON.stringify(E))}),l.emitDailyJSEvent({action:"available-devices-updated",availableDevices:k})}),we(pe(l),"handleNativeAppStateChange",function(){var k=M(function*(E){if(E==="destroyed")return console.warn("App has been destroyed before leaving the meeting. Cleaning up all the resources!"),void(yield l.destroy());var x=E==="active";l.disableReactNativeAutoDeviceManagement("video")||(x?l.camUnmutedBeforeLosingNativeActiveState&&l.setLocalVideo(!0):(l.camUnmutedBeforeLosingNativeActiveState=l.localVideo(),l.camUnmutedBeforeLosingNativeActiveState&&l.setLocalVideo(!1)))});return function(E){return k.apply(this,arguments)}}()),we(pe(l),"handleNativeAudioFocusChange",function(k){l.disableReactNativeAutoDeviceManagement("audio")||(l._hasNativeAudioFocus=k,l.toggleParticipantAudioBasedOnNativeAudioFocus(),l._hasNativeAudioFocus?l.micUnmutedBeforeLosingNativeAudioFocus&&l.setLocalAudio(!0):(l.micUnmutedBeforeLosingNativeAudioFocus=l.localAudio(),l.setLocalAudio(!1)))}),we(pe(l),"handleNativeSystemScreenCaptureStop",function(){l.stopScreenShare()}),l.strictMode=f.strictMode===void 0||f.strictMode,l.allowMultipleCallInstances=(c=f.allowMultipleCallInstances)!==null&&c!==void 0&&c,Object.keys(xe).length&&(l._logDuplicateInstanceAttempt(),!l.allowMultipleCallInstances)){if(l.strictMode)throw new Error("Duplicate DailyIframe instances are not allowed");console.warn("Using strictMode: false to allow multiple call instances is now deprecated. Set `allowMultipleCallInstances: true`")}if(window._daily||(window._daily={pendings:[],instances:{}}),l.callClientId=Zt(),g=pe(l),xe[g.callClientId]=g,window._daily.instances[l.callClientId]={},l._sharedTracks={},window._daily.instances[l.callClientId].tracks=l._sharedTracks,f.dailyJsVersion=X.version(),l._iframe=i,l._callObjectMode=f.layout==="none"&&!l._iframe,l._preloadCache={subscribeToTracksAutomatically:!0,audioDeviceId:null,videoDeviceId:null,outputDeviceId:null,inputSettings:null,sendSettings:null,videoTrackForNetworkConnectivityTest:null,videoTrackForConnectionQualityTest:null},f.showLocalVideo!==void 0?l._callObjectMode?console.error("showLocalVideo is not available in call object mode"):l._showLocalVideo=!!f.showLocalVideo:l._showLocalVideo=!0,f.showParticipantsBar!==void 0?l._callObjectMode?console.error("showParticipantsBar is not available in call object mode"):l._showParticipantsBar=!!f.showParticipantsBar:l._showParticipantsBar=!0,f.customIntegrations!==void 0?l._callObjectMode?console.error("customIntegrations is not available in call object mode"):l._customIntegrations=f.customIntegrations:l._customIntegrations={},f.customTrayButtons!==void 0?l._callObjectMode?console.error("customTrayButtons is not available in call object mode"):l._customTrayButtons=f.customTrayButtons:l._customTrayButtons={},f.activeSpeakerMode!==void 0?l._callObjectMode?console.error("activeSpeakerMode is not available in call object mode"):l._activeSpeakerMode=!!f.activeSpeakerMode:l._activeSpeakerMode=!1,f.receiveSettings?l._callObjectMode?l._receiveSettings=f.receiveSettings:console.error("receiveSettings is only available in call object mode"):l._receiveSettings={},l.validateProperties(f),l.properties=O({},f),l._preloadCache.inputSettings||(l._preloadCache.inputSettings={}),f.inputSettings&&f.inputSettings.audio&&(l._preloadCache.inputSettings.audio=f.inputSettings.audio),f.inputSettings&&f.inputSettings.video&&(l._preloadCache.inputSettings.video=f.inputSettings.video),l._callObjectLoader=l._callObjectMode?new hc(l.callClientId):null,l._callState=gi,l._isPreparingToJoin=!1,l._accessState={access:un},l._meetingSessionSummary={},l._finalSummaryOfPrevSession={},l._meetingSessionState=yn(Ji,l._callObjectMode),l._nativeInCallAudioMode=Vi,l._participants={},l._isScreenSharing=!1,l._participantCounts=qi,l._rmpPlayerState={},l._waitingParticipants={},l._network={threshold:"good",quality:100},l._activeSpeaker={},l._localAudioLevel=0,l._remoteParticipantsAudioLevel={},l._messageChannel=A()?new lc:new oc,l._iframe&&(l._iframe.requestFullscreen?l._iframe.addEventListener("fullscreenchange",function(){document.fullscreenElement===l._iframe?(l.emitDailyJSEvent({action:At}),l.sendMessageToCallMachine({action:At})):(l.emitDailyJSEvent({action:jt}),l.sendMessageToCallMachine({action:jt}))}):l._iframe.webkitRequestFullscreen&&l._iframe.addEventListener("webkitfullscreenchange",function(){document.webkitFullscreenElement===l._iframe?(l.emitDailyJSEvent({action:At}),l.sendMessageToCallMachine({action:At})):(l.emitDailyJSEvent({action:jt}),l.sendMessageToCallMachine({action:jt}))})),A()){var v=l.nativeUtils();v.addAudioFocusChangeListener&&v.removeAudioFocusChangeListener&&v.addAppStateChangeListener&&v.removeAppStateChangeListener&&v.addSystemScreenCaptureStopListener&&v.removeSystemScreenCaptureStopListener||console.warn("expected (add|remove)(AudioFocusChange|AppActiveStateChange|SystemScreenCaptureStop)Listener to be available in React Native"),l._hasNativeAudioFocus=!0,v.addAudioFocusChangeListener(l.handleNativeAudioFocusChange),v.addAppStateChangeListener(l.handleNativeAppStateChange),v.addSystemScreenCaptureStopListener(l.handleNativeSystemScreenCaptureStop)}return l._callObjectMode&&l.startListeningForDeviceChanges(),l._messageChannel.addListenerForMessagesFromCallMachine(l.handleMessageFromCallMachine,l.callClientId,pe(l)),l}return se(X,[{key:"destroy",value:(mr=M(function*(){var i,c;try{yield this.leave()}catch{}var l=this._iframe;if(l){var g=l.parentElement;g&&g.removeChild(l)}if(this._messageChannel.removeListener(this.handleMessageFromCallMachine),A()){var f=this.nativeUtils();f.removeAudioFocusChangeListener(this.handleNativeAudioFocusChange),f.removeAppStateChangeListener(this.handleNativeAppStateChange),f.removeSystemScreenCaptureStopListener(this.handleNativeSystemScreenCaptureStop)}this._callObjectMode&&this.stopListeningForDeviceChanges(),this.resetMeetingDependentVars(),this._destroyed=!0,this.emitDailyJSEvent({action:"call-instance-destroyed"}),delete xe[this.callClientId],!((i=window)===null||i===void 0||(c=i._daily)===null||c===void 0)&&c.instances&&delete window._daily.instances[this.callClientId],this.strictMode&&(this.callClientId=void 0)}),function(){return mr.apply(this,arguments)})},{key:"isDestroyed",value:function(){return!!this._destroyed}},{key:"loadCss",value:function(i){var c=i.bodyClass,l=i.cssFile,g=i.cssText;return D(),this.sendMessageToCallMachine({action:"load-css",cssFile:this.absoluteUrl(l),bodyClass:c,cssText:g}),this}},{key:"iframe",value:function(){return D(),this._iframe}},{key:"meetingState",value:function(){return this._callState}},{key:"accessState",value:function(){return te(this._callObjectMode,"accessState()"),this._accessState}},{key:"participants",value:function(){return this._participants}},{key:"participantCounts",value:function(){return this._participantCounts}},{key:"waitingParticipants",value:function(){return te(this._callObjectMode,"waitingParticipants()"),this._waitingParticipants}},{key:"validateParticipantProperties",value:function(i,c){for(var l in c){if(!Lt[l])throw new Error("unrecognized updateParticipant property ".concat(l));if(Lt[l].validate&&!Lt[l].validate(c[l],this,this._participants[i]))throw new Error(Lt[l].help)}}},{key:"updateParticipant",value:function(i,c){return this._participants.local&&this._participants.local.session_id===i&&(i="local"),i&&c&&(this.validateParticipantProperties(i,c),this.sendMessageToCallMachine({action:"update-participant",id:i,properties:c})),this}},{key:"updateParticipants",value:function(i){var c=this._participants.local&&this._participants.local.session_id;for(var l in i)l===c&&(l="local"),l&&i[l]&&this.validateParticipantProperties(l,i[l]);return this.sendMessageToCallMachine({action:"update-participants",participants:i}),this}},{key:"updateWaitingParticipant",value:(gr=M(function*(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(te(this._callObjectMode,"updateWaitingParticipant()"),R(this._callState,"updateWaitingParticipant()"),typeof c!="string"||L(l)!=="object")throw new Error("updateWaitingParticipant() must take an id string and a updates object");return new Promise(function(g,f){i.sendMessageToCallMachine({action:"daily-method-update-waiting-participant",id:c,updates:l},function(v){v.error&&f(v.error),v.id||f(new Error("unknown error in updateWaitingParticipant()")),g({id:v.id})})})}),function(){return gr.apply(this,arguments)})},{key:"updateWaitingParticipants",value:(fr=M(function*(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(te(this._callObjectMode,"updateWaitingParticipants()"),R(this._callState,"updateWaitingParticipants()"),L(c)!=="object")throw new Error("updateWaitingParticipants() must take a mapping between ids and update objects");return new Promise(function(l,g){i.sendMessageToCallMachine({action:"daily-method-update-waiting-participants",updatesById:c},function(f){f.error&&g(f.error),f.ids||g(new Error("unknown error in updateWaitingParticipants()")),l({ids:f.ids})})})}),function(){return fr.apply(this,arguments)})},{key:"requestAccess",value:(pr=M(function*(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=c.access,g=l===void 0?{level:to}:l,f=c.name,v=f===void 0?"":f;return te(this._callObjectMode,"requestAccess()"),R(this._callState,"requestAccess()"),new Promise(function(k,E){i.sendMessageToCallMachine({action:"daily-method-request-access",access:g,name:v},function(x){x.error&&E(x.error),x.access||E(new Error("unknown error in requestAccess()")),k({access:x.access,granted:x.granted})})})}),function(){return pr.apply(this,arguments)})},{key:"localAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.audio.state):null}},{key:"localVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.video.state):null}},{key:"setLocalAudio",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return"forceDiscardTrack"in c&&(A()?(console.warn("forceDiscardTrack option not supported in React Native; ignoring"),c={}):i&&(console.warn("forceDiscardTrack option only supported when calling setLocalAudio(false); ignoring"),c={})),this.sendMessageToCallMachine({action:"local-audio",state:i,options:c}),this}},{key:"localScreenAudio",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenAudio.state):null}},{key:"localScreenVideo",value:function(){return this._participants.local?!["blocked","off"].includes(this._participants.local.tracks.screenVideo.state):null}},{key:"updateScreenShare",value:function(i){if(this._isScreenSharing)return this.sendMessageToCallMachine({action:"local-screen-update",options:i}),this;console.warn("There is no screen share in progress. Try calling startScreenShare first.")}},{key:"setLocalVideo",value:function(i){return this.sendMessageToCallMachine({action:"local-video",state:i}),this}},{key:"getReceiveSettings",value:(hr=M(function*(i){var c=this,l=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).showInheritedValues,g=l!==void 0&&l;if(te(this._callObjectMode,"getReceiveSettings()"),!this._callMachineInitialized)return this._receiveSettings;switch(L(i)){case"string":return new Promise(function(f){c.sendMessageToCallMachine({action:"get-single-participant-receive-settings",id:i,showInheritedValues:g},function(v){f(v.receiveSettings)})});case"undefined":return this._receiveSettings;default:throw new Error('first argument to getReceiveSettings() must be a participant id (or "base"), or there should be no arguments')}}),function(i){return hr.apply(this,arguments)})},{key:"updateReceiveSettings",value:(dr=M(function*(i){var c=this;if(te(this._callObjectMode,"updateReceiveSettings()"),!Ia(i,{allowAllParticipantsKey:!0}))throw new Error(Ra({allowAllParticipantsKey:!0}));return R(this._callState,"updateReceiveSettings()","To specify receive settings earlier, use the receiveSettings config property."),new Promise(function(l){c.sendMessageToCallMachine({action:"update-receive-settings",receiveSettings:i},function(g){l({receiveSettings:g.receiveSettings})})})}),function(i){return dr.apply(this,arguments)})},{key:"_prepInputSettingsToPresentToUser",value:function(i){var c,l,g,f,v,k,E,x;if(i){var J={},$=((c=i.audio)===null||c===void 0||(l=c.processor)===null||l===void 0?void 0:l.type)==="none"&&((g=i.audio)===null||g===void 0||(f=g.processor)===null||f===void 0?void 0:f._isDefaultWhenNone);if(i.audio&&!$){var de=O({},i.audio.processor);delete de._isDefaultWhenNone,J.audio=O(O({},i.audio),{},{processor:de})}var ye=((v=i.video)===null||v===void 0||(k=v.processor)===null||k===void 0?void 0:k.type)==="none"&&((E=i.video)===null||E===void 0||(x=E.processor)===null||x===void 0?void 0:x._isDefaultWhenNone);if(i.video&&!ye){var he=O({},i.video.processor);delete he._isDefaultWhenNone,J.video=O(O({},i.video),{},{processor:he})}return J}}},{key:"getInputSettings",value:function(){var i=this;return D(),new Promise(function(c){c(i._getInputSettings())})}},{key:"_getInputSettings",value:function(){var i,c,l,g,f,v,k,E,x={processor:{type:"none",_isDefaultWhenNone:!0}};this._inputSettings?(i=((l=this._inputSettings)===null||l===void 0?void 0:l.video)||x,c=((g=this._inputSettings)===null||g===void 0?void 0:g.audio)||x):(i=((f=this._preloadCache)===null||f===void 0||(v=f.inputSettings)===null||v===void 0?void 0:v.video)||x,c=((k=this._preloadCache)===null||k===void 0||(E=k.inputSettings)===null||E===void 0?void 0:E.audio)||x);var J={audio:c,video:i};return this._prepInputSettingsToPresentToUser(J)}},{key:"updateInputSettings",value:(ur=M(function*(i){var c=this;return D(),Na(i)?(i&&(this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),La(i,this.properties.dailyConfig),i.audio&&(this._preloadCache.inputSettings.audio=i.audio),i.video&&(this._preloadCache.inputSettings.video=i.video)),i.video||i.audio?this._callObjectMode&&!this._callMachineInitialized?this._getInputSettings():new Promise(function(l,g){c.sendMessageToCallMachine({action:"update-input-settings",inputSettings:i},function(f){f.error?g(f.error):l({inputSettings:c._prepInputSettingsToPresentToUser(f.inputSettings)})})}):this._getInputSettings()):(console.error(Un()),Promise.reject(Un()))}),function(i){return ur.apply(this,arguments)})},{key:"setBandwidth",value:function(i){var c=i.kbs,l=i.trackConstraints;if(D(),this._callMachineInitialized)return this.sendMessageToCallMachine({action:"set-bandwidth",kbs:c,trackConstraints:l}),this}},{key:"getDailyLang",value:function(){var i=this;if(D(),this._callMachineInitialized)return new Promise(function(c){i.sendMessageToCallMachine({action:"get-daily-lang"},function(l){delete l.action,delete l.callbackStamp,c(l)})})}},{key:"setDailyLang",value:function(i){return D(),this.sendMessageToCallMachine({action:"set-daily-lang",lang:i}),this}},{key:"setProxyUrl",value:function(i){return this.sendMessageToCallMachine({action:"set-proxy-url",proxyUrl:i}),this}},{key:"setIceConfig",value:function(i){return this.sendMessageToCallMachine({action:"set-ice-config",iceConfig:i}),this}},{key:"meetingSessionSummary",value:function(){return[Pe,_e].includes(this._callState)?this._finalSummaryOfPrevSession:this._meetingSessionSummary}},{key:"getMeetingSession",value:(lr=M(function*(){var i=this;return console.warn("getMeetingSession() is deprecated: use meetingSessionSummary(), which will return immediately"),R(this._callState,"getMeetingSession()"),new Promise(function(c){i.sendMessageToCallMachine({action:"get-meeting-session"},function(l){delete l.action,delete l.callbackStamp,c(l)})})}),function(){return lr.apply(this,arguments)})},{key:"meetingSessionState",value:function(){return R(this._callState,"meetingSessionState"),this._meetingSessionState}},{key:"setMeetingSessionData",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"replace";te(this._callObjectMode,"setMeetingSessionData()"),R(this._callState,"setMeetingSessionData");try{(function(l,g){new uc({data:l,mergeStrategy:g})})(i,c)}catch(l){throw console.error(l),l}try{this.sendMessageToCallMachine({action:"set-session-data",data:i,mergeStrategy:c})}catch(l){throw new Error("Error setting meeting session data: ".concat(l))}}},{key:"setUserName",value:function(i,c){var l=this;return this.properties.userName=i,new Promise(function(g){l.sendMessageToCallMachine({action:"set-user-name",name:i??"",thisMeetingOnly:A()||!!c&&!!c.thisMeetingOnly},function(f){delete f.action,delete f.callbackStamp,g(f)})})}},{key:"setUserData",value:(cr=M(function*(i){var c=this;try{ja(i)}catch(l){throw console.error(l),l}if(this.properties.userData=i,this._callMachineInitialized)return new Promise(function(l){try{c.sendMessageToCallMachine({action:"set-user-data",userData:i},function(g){delete g.action,delete g.callbackStamp,l(g)})}catch(g){throw new Error("Error setting user data: ".concat(g))}})}),function(i){return cr.apply(this,arguments)})},{key:"validateAudioLevelInterval",value:function(i){if(i&&(i<100||typeof i!="number"))throw new Error("The interval must be a number greater than or equal to 100 milliseconds.")}},{key:"startLocalAudioLevelObserver",value:function(i){var c=this;if(typeof AudioWorkletNode>"u"&&!A())throw new Error("startLocalAudioLevelObserver() is not supported on this browser");if(this.validateAudioLevelInterval(i),this._callMachineInitialized)return new Promise(function(l,g){c.sendMessageToCallMachine({action:"start-local-audio-level-observer",interval:i},function(f){f.error?g({error:f.error}):l()})});this._preloadCache.localAudioLevelObserver={enabled:!0,interval:i}}},{key:"stopLocalAudioLevelObserver",value:function(){this._preloadCache.localAudioLevelObserver=null,this._localAudioLevel=0,this.sendMessageToCallMachine({action:"stop-local-audio-level-observer"})}},{key:"startRemoteParticipantsAudioLevelObserver",value:function(i){var c=this;if(this.validateAudioLevelInterval(i),this._callMachineInitialized)return new Promise(function(l,g){c.sendMessageToCallMachine({action:"start-remote-participants-audio-level-observer",interval:i},function(f){f.error?g({error:f.error}):l()})});this._preloadCache.remoteParticipantsAudioLevelObserver={enabled:!0,interval:i}}},{key:"stopRemoteParticipantsAudioLevelObserver",value:function(){this._preloadCache.remoteParticipantsAudioLevelObserver=null,this._remoteParticipantsAudioLevel={},this.sendMessageToCallMachine({action:"stop-remote-participants-audio-level-observer"})}},{key:"startCamera",value:(or=M(function*(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(te(this._callObjectMode,"startCamera()"),mn(this._callState,this._isPreparingToJoin,"startCamera()","Did you mean to use setLocalAudio() and/or setLocalVideo() instead?"),this.needsLoad())try{yield this.load(c)}catch(l){return Promise.reject(l)}else{if(this._didPreAuth){if(c.url&&c.url!==this.properties.url)return console.error("url in startCamera() is different than the one used in preAuth()"),Promise.reject();if(c.token&&c.token!==this.properties.token)return console.error("token in startCamera() is different than the one used in preAuth()"),Promise.reject()}this.validateProperties(c),this.properties=O(O({},this.properties),c)}return new Promise(function(l){i.sendMessageToCallMachine({action:"start-camera",properties:qe(i.properties,i.callClientId),preloadCache:qe(i._preloadCache,i.callClientId)},function(g){delete g.action,delete g.callbackStamp,l(g)})})}),function(){return or.apply(this,arguments)})},{key:"validateCustomTrack",value:function(i,c,l){if(l&&l.length>50)throw new Error("Custom track `trackName` must not be more than 50 characters");if(c&&c!=="music"&&c!=="speech"&&!(c instanceof Object))throw new Error("Custom track `mode` must be either `music` | `speech` | `DailyMicAudioModeSettings` or `undefined`");if(l&&["cam-audio","cam-video","screen-video","screen-audio","rmpAudio","rmpVideo","customVideoDefaults"].includes(l))throw new Error("Custom track `trackName` must not match a track name already used by daily: cam-audio, cam-video, customVideoDefaults, screen-video, screen-audio, rmpAudio, rmpVideo");if(!(i instanceof MediaStreamTrack))throw new Error("Custom tracks provided must be instances of MediaStreamTrack")}},{key:"startCustomTrack",value:function(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{track,mode,trackName};return D(),R(this._callState,"startCustomTrack()"),this.validateCustomTrack(c.track,c.mode,c.trackName),new Promise(function(l,g){i._sharedTracks.customTrack=c.track,c.track=ut,i.sendMessageToCallMachine({action:"start-custom-track",properties:c},function(f){f.error?g({error:f.error}):l(f.mediaTag)})})}},{key:"stopCustomTrack",value:function(i){var c=this;return D(),R(this._callState,"stopCustomTrack()"),new Promise(function(l){c.sendMessageToCallMachine({action:"stop-custom-track",mediaTag:i},function(g){l(g.mediaTag)})})}},{key:"setCamera",value:function(i){var c=this;return ct(),Rt(this._callMachineInitialized,"setCamera()"),new Promise(function(l){c.sendMessageToCallMachine({action:"set-camera",cameraDeviceId:i},function(g){l({device:g.device})})})}},{key:"setAudioDevice",value:(sr=M(function*(i){return ct(),this.nativeUtils().setAudioDevice(i),{deviceId:yield this.nativeUtils().getAudioDevice()}}),function(i){return sr.apply(this,arguments)})},{key:"cycleCamera",value:function(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(l){i.sendMessageToCallMachine({action:"cycle-camera",properties:c},function(g){l({device:g.device})})})}},{key:"cycleMic",value:function(){var i=this;return D(),new Promise(function(c){i.sendMessageToCallMachine({action:"cycle-mic"},function(l){c({device:l.device})})})}},{key:"getCameraFacingMode",value:function(){var i=this;return ct(),new Promise(function(c){i.sendMessageToCallMachine({action:"get-camera-facing-mode"},function(l){c(l.facingMode)})})}},{key:"setInputDevicesAsync",value:(ar=M(function*(i){var c=this,l=i.audioDeviceId,g=i.videoDeviceId,f=i.audioSource,v=i.videoSource;return D(),f!==void 0&&(l=f),v!==void 0&&(g=v),l&&(this._preloadCache.audioDeviceId=l,this._sharedTracks.audioDeviceId=l),g&&(this._preloadCache.videoDeviceId=g,this._sharedTracks.videoDeviceId=g),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:(l instanceof MediaStreamTrack&&(l=ut),g instanceof MediaStreamTrack&&(g=ut),new Promise(function(k){c.sendMessageToCallMachine({action:"set-input-devices",audioDeviceId:l,videoDeviceId:g},function(E){delete E.action,delete E.callbackStamp,E.returnPreloadCache?k({camera:{deviceId:c._preloadCache.videoDeviceId},mic:{deviceId:c._preloadCache.audioDeviceId},speaker:{deviceId:c._preloadCache.outputDeviceId}}):k(E)})}))}),function(i){return ar.apply(this,arguments)})},{key:"setOutputDeviceAsync",value:(ir=M(function*(i){var c=this,l=i.outputDeviceId;return D(),l&&(this._preloadCache.outputDeviceId=l),this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(g){c.sendMessageToCallMachine({action:"set-output-device",outputDeviceId:l},function(f){delete f.action,delete f.callbackStamp,f.returnPreloadCache?g({camera:{deviceId:c._preloadCache.videoDeviceId},mic:{deviceId:c._preloadCache.audioDeviceId},speaker:{deviceId:c._preloadCache.outputDeviceId}}):g(f)})})}),function(i){return ir.apply(this,arguments)})},{key:"getInputDevices",value:(rr=M(function*(){var i=this;return this._callObjectMode&&this.needsLoad()?{camera:{deviceId:this._preloadCache.videoDeviceId},mic:{deviceId:this._preloadCache.audioDeviceId},speaker:{deviceId:this._preloadCache.outputDeviceId}}:new Promise(function(c){i.sendMessageToCallMachine({action:"get-input-devices"},function(l){delete l.action,delete l.callbackStamp,l.returnPreloadCache?c({camera:{deviceId:i._preloadCache.videoDeviceId},mic:{deviceId:i._preloadCache.audioDeviceId},speaker:{deviceId:i._preloadCache.outputDeviceId}}):c(l)})})}),function(){return rr.apply(this,arguments)})},{key:"nativeInCallAudioMode",value:function(){return ct(),this._nativeInCallAudioMode}},{key:"setNativeInCallAudioMode",value:function(i){if(ct(),[Vi,Dc].includes(i)){if(i!==this._nativeInCallAudioMode)return this._nativeInCallAudioMode=i,!this.disableReactNativeAutoDeviceManagement("audio")&&Vt(this._callState,this._isPreparingToJoin)&&this.nativeUtils().setAudioMode(this._nativeInCallAudioMode),this}else console.error("invalid in-call audio mode specified: ",i)}},{key:"preAuth",value:(nr=M(function*(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(te(this._callObjectMode,"preAuth()"),mn(this._callState,this._isPreparingToJoin,"preAuth()"),this.needsLoad()&&(yield this.load(c)),!c.url)throw new Error("preAuth() requires at least a url to be provided");return this.validateProperties(c),this.properties=O(O({},this.properties),c),new Promise(function(l,g){i.sendMessageToCallMachine({action:"daily-method-preauth",properties:qe(i.properties,i.callClientId),preloadCache:qe(i._preloadCache,i.callClientId)},function(f){return f.error?g(f.error):f.access?(i._didPreAuth=!0,void l({access:f.access})):g(new Error("unknown error in preAuth()"))})})}),function(){return nr.apply(this,arguments)})},{key:"load",value:(ve=M(function*(i){var c=this;if(this.needsLoad()){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");if(i&&(this.validateProperties(i),this.properties=O(O({},this.properties),i)),!this._callObjectMode&&!this.properties.url)throw new Error("can't load iframe meeting because url property isn't set");return this._updateCallState(mi),this.emitDailyJSEvent({action:oo}),this._callObjectMode?new Promise(function(l,g){c._callObjectLoader.cancel();var f=Date.now();c._callObjectLoader.load(c.properties.dailyConfig,function(v){c._bundleLoadTime=v?"no-op":Date.now()-f,c._updateCallState(vi),v&&c.emitDailyJSEvent({action:yi}),l()},function(v,k){if(c.emitDailyJSEvent({action:co}),!k){c._updateCallState(_e),c.resetMeetingDependentVars();var E={action:Si,errorMsg:v.msg,error:{type:"connection-error",msg:"Failed to load call object bundle.",details:{on:"load",sourceError:v,bundleUrl:Jt(c.properties.dailyConfig)}}};c._maybeSendToSentry(E),c.emitDailyJSEvent(E),g(v.msg)}})}):(this._iframe.src=ra(this.assembleMeetingUrl(),this.properties.dailyConfig),new Promise(function(l,g){c._loadedCallback=function(f){c._callState!==_e?(c._updateCallState(vi),(c.properties.cssFile||c.properties.cssText)&&c.loadCss(c.properties),l()):g(f)}}))}}),function(i){return ve.apply(this,arguments)})},{key:"join",value:(Je=M(function*(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._testCallInProgress&&this.stopTestCallQuality();var l=!1;if(this.needsLoad()){this.updateIsPreparingToJoin(!0);try{yield this.load(c)}catch(g){return this.updateIsPreparingToJoin(!1),Promise.reject(g)}}else{if(l=!(!this.properties.cssFile&&!this.properties.cssText),this._didPreAuth){if(c.url&&c.url!==this.properties.url)return console.error("url in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject();if(c.token&&c.token!==this.properties.token)return console.error("token in join() is different than the one used in preAuth()"),this.updateIsPreparingToJoin(!1),Promise.reject()}if(c.url&&!this._callObjectMode&&c.url&&c.url!==this.properties.url)return console.error("url in join() is different than the one used in load() (".concat(this.properties.url," -> ").concat(c.url,")")),this.updateIsPreparingToJoin(!1),Promise.reject();this.validateProperties(c),this.properties=O(O({},this.properties),c)}return c.showLocalVideo!==void 0&&(this._callObjectMode?console.error("showLocalVideo is not available in callObject mode"):this._showLocalVideo=!!c.showLocalVideo),c.showParticipantsBar!==void 0&&(this._callObjectMode?console.error("showParticipantsBar is not available in callObject mode"):this._showParticipantsBar=!!c.showParticipantsBar),this._callState===We||this._callState===Dn?(console.warn("already joined meeting, call leave() before joining again"),void this.updateIsPreparingToJoin(!1)):(this._updateCallState(Dn,!1),this.emitDailyJSEvent({action:ho}),this._preloadCache.inputSettings||(this._preloadCache.inputSettings={}),c.inputSettings&&c.inputSettings.audio&&(this._preloadCache.inputSettings.audio=c.inputSettings.audio),c.inputSettings&&c.inputSettings.video&&(this._preloadCache.inputSettings.video=c.inputSettings.video),this.sendMessageToCallMachine({action:"join-meeting",properties:qe(this.properties,this.callClientId),preloadCache:qe(this._preloadCache,this.callClientId)}),new Promise(function(g,f){i._joinedCallback=function(v,k){if(i._callState!==_e){if(i._updateCallState(We),v)for(var E in v){if(i._callObjectMode){var x=i._callMachine().store;Ii(v[E],x),Ni(v[E],x),Li(v[E],i._participants[E],x)}i._participants[E]=O({},v[E]),i.toggleParticipantAudioBasedOnNativeAudioFocus()}l&&i.loadCss(i.properties),g(v)}else f(k)}}))}),function(){return Je.apply(this,arguments)})},{key:"leave",value:(Te=M(function*(){var i=this;return this._testCallInProgress&&this.stopTestCallQuality(),new Promise(function(c){i._callState===Pe||i._callState===_e?c():i._callObjectLoader&&!i._callObjectLoader.loaded?(i._callObjectLoader.cancel(),i._updateCallState(Pe),i.resetMeetingDependentVars(),i.emitDailyJSEvent({action:Pe}),c()):(i._resolveLeave=c,i.sendMessageToCallMachine({action:"leave-meeting"}))})}),function(){return Te.apply(this,arguments)})},{key:"startScreenShare",value:(me=M(function*(){var i=this,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Rt(this._callMachineInitialized,"startScreenShare()"),c.screenVideoSendSettings&&this._validateVideoSendSettings("screenVideo",c.screenVideoSendSettings),c.mediaStream&&(this._sharedTracks.screenMediaStream=c.mediaStream,c.mediaStream=ut),typeof DailyNativeUtils<"u"&&DailyNativeUtils.isIOS!==void 0&&DailyNativeUtils.isIOS){var l=this.nativeUtils();if(yield l.isScreenBeingCaptured())return void this.emitDailyJSEvent({action:wi,type:"screen-share-error",errorMsg:"Could not start the screen sharing. The screen is already been captured!"});l.setSystemScreenCaptureStartCallback(function(){l.setSystemScreenCaptureStartCallback(null),i.sendMessageToCallMachine({action:Ei,captureOptions:c})}),l.presentSystemScreenCapturePrompt()}else this.sendMessageToCallMachine({action:Ei,captureOptions:c})}),function(){return me.apply(this,arguments)})},{key:"stopScreenShare",value:function(){Rt(this._callMachineInitialized,"stopScreenShare()"),this.sendMessageToCallMachine({action:"local-screen-stop"})}},{key:"startRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(O({action:"local-recording-start"},i))}},{key:"updateRecording",value:function(i){var c=i.layout,l=c===void 0?{preset:"default"}:c,g=i.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-recording",layout:l,instanceId:g})}},{key:"stopRecording",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(O({action:"local-recording-stop"},i))}},{key:"startLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(O({action:"daily-method-start-live-streaming"},i))}},{key:"updateLiveStreaming",value:function(i){var c=i.layout,l=c===void 0?{preset:"default"}:c,g=i.instanceId;this.sendMessageToCallMachine({action:"daily-method-update-live-streaming",layout:l,instanceId:g})}},{key:"addLiveStreamingEndpoints",value:function(i){var c=i.endpoints,l=i.instanceId;this.sendMessageToCallMachine({action:Ci,endpointsOp:tc,endpoints:c,instanceId:l})}},{key:"removeLiveStreamingEndpoints",value:function(i){var c=i.endpoints,l=i.instanceId;this.sendMessageToCallMachine({action:Ci,endpointsOp:nc,endpoints:c,instanceId:l})}},{key:"stopLiveStreaming",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.sendMessageToCallMachine(O({action:"daily-method-stop-live-streaming"},i))}},{key:"validateDailyConfig",value:function(i){i.camSimulcastEncodings&&(console.warn("camSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide camera simulcast settings."),this.validateSimulcastEncodings(i.camSimulcastEncodings)),i.screenSimulcastEncodings&&console.warn("screenSimulcastEncodings is deprecated. Use sendSettings, found in DailyCallOptions, to provide screen simulcast settings."),ie().match(/Linux; Android/)&&i.noAutoDefaultDeviceChange&&console.warn("noAutoDefaultDeviceChange is not supported on Android, and will be ignored.")}},{key:"validateSimulcastEncodings",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(i){if(!(i instanceof Array||Array.isArray(i)))throw new Error("encodings must be an Array");if(!Hi(i.length,1,3))throw new Error("encodings must be an Array with between 1 to ".concat(3," layers"));for(var g=0;g<i.length;g++){var f=i[g];for(var v in this._validateEncodingLayerHasValidProperties(f),f)if(gn.includes(v)){if(typeof f[v]!="number")throw new Error("".concat(v," must be a number"));if(c){var k=c[v],E=k.min,x=k.max;if(!Hi(f[v],E,x))throw new Error("".concat(v," value not in range. valid range: ").concat(E," to ").concat(x))}}else if(!["active","scalabilityMode"].includes(v))throw new Error("Invalid key ".concat(v,", valid keys are:")+Object.values(gn));if(l&&!f.hasOwnProperty("maxBitrate"))throw new Error("maxBitrate is not specified")}}}},{key:"startRemoteMediaPlayer",value:(oe=M(function*(i){var c=this,l=i.url,g=i.settings,f=g===void 0?{state:An.PLAY}:g;try{(function(v){if(typeof v!="string")throw new Error('url parameter must be "string" type')})(l),zi(f),function(v){for(var k in v)if(!Gi.includes(k))throw new Error("Invalid key ".concat(k,", valid keys are: ").concat(Gi));v.simulcastEncodings&&this.validateSimulcastEncodings(v.simulcastEncodings,Aa,!0)}(f)}catch(v){throw console.error("invalid argument Error: ".concat(v)),console.error(`startRemoteMediaPlayer arguments must be of the form:
  { url: "playback url",
  settings?:
  {state: "play"|"pause", simulcastEncodings?: [{}] } }`),v}return new Promise(function(v,k){c.sendMessageToCallMachine({action:"daily-method-start-remote-media-player",url:l,settings:f},function(E){E.error?k({error:E.error,errorMsg:E.errorMsg}):v({session_id:E.session_id,remoteMediaPlayerState:{state:E.state,settings:E.settings}})})})}),function(i){return oe.apply(this,arguments)})},{key:"stopRemoteMediaPlayer",value:(U=M(function*(i){var c=this;if(typeof i!="string")throw new Error(" remotePlayerID must be of type string");return new Promise(function(l,g){c.sendMessageToCallMachine({action:"daily-method-stop-remote-media-player",session_id:i},function(f){f.error?g({error:f.error,errorMsg:f.errorMsg}):l()})})}),function(i){return U.apply(this,arguments)})},{key:"updateRemoteMediaPlayer",value:(C=M(function*(i){var c=this,l=i.session_id,g=i.settings;try{zi(g)}catch(f){throw console.error("invalid argument Error: ".concat(f)),console.error(`updateRemoteMediaPlayer arguments must be of the form:
  session_id: "participant session",
  { settings?: {state: "play"|"pause"} }`),f}return new Promise(function(f,v){c.sendMessageToCallMachine({action:"daily-method-update-remote-media-player",session_id:l,settings:g},function(k){k.error?v({error:k.error,errorMsg:k.errorMsg}):f({session_id:k.session_id,remoteMediaPlayerState:{state:k.state,settings:k.settings}})})})}),function(i){return C.apply(this,arguments)})},{key:"startTranscription",value:function(i){this.sendMessageToCallMachine(O({action:"daily-method-start-transcription"},i))}},{key:"stopTranscription",value:function(){this.sendMessageToCallMachine({action:"daily-method-stop-transcription"})}},{key:"startDialOut",value:(T=M(function*(i){var c=this;R(this._callState,"startDialOut()");var l=function(g){if(g){if(!Array.isArray(g))throw new Error("Error starting dial out: audio codec must be an array");if(g.length<=0)throw new Error("Error starting dial out: audio codec array specified but empty");g.forEach(function(f){if(typeof f!="string")throw new Error("Error starting dial out: audio codec must be a string");if(f!=="OPUS"&&f!=="PCMU"&&f!=="PCMA"&&f!=="G722")throw new Error("Error starting dial out: audio codec must be one of OPUS, PCMU, PCMA, G722")})}};if(!i.sipUri&&!i.phoneNumber)throw new Error("Error starting dial out: either a sip uri or phone number must be provided");if(i.sipUri&&i.phoneNumber)throw new Error("Error starting dial out: only one of sip uri or phone number must be provided");if(i.sipUri){if(typeof i.sipUri!="string")throw new Error("Error starting dial out: sipUri must be a string");if(!i.sipUri.startsWith("sip:"))throw new Error("Error starting dial out: Invalid SIP URI, must start with 'sip:'");if(i.video&&typeof i.video!="boolean")throw new Error("Error starting dial out: video must be a boolean value");(function(g){if(g&&(l(g.audio),g.video)){if(!Array.isArray(g.video))throw new Error("Error starting dial out: video codec must be an array");if(g.video.length<=0)throw new Error("Error starting dial out: video codec array specified but empty");g.video.forEach(function(f){if(typeof f!="string")throw new Error("Error starting dial out: video codec must be a string");if(f!=="H264"&&f!=="VP8")throw new Error("Error starting dial out: video codec must be H264 or VP8")})}})(i.codecs)}if(i.phoneNumber){if(typeof i.phoneNumber!="string")throw new Error("Error starting dial out: phoneNumber must be a string");if(!/^\+\d{1,}$/.test(i.phoneNumber))throw new Error("Error starting dial out: Invalid phone number, must be valid phone number as per E.164");i.codecs&&l(i.codecs.audio)}if(i.callerId){if(typeof i.callerId!="string")throw new Error("Error starting dial out: callerId must be a string");if(i.sipUri)throw new Error("Error starting dial out: callerId not allowed with sipUri")}if(i.displayName){if(typeof i.displayName!="string")throw new Error("Error starting dial out: displayName must be a string");if(i.displayName.length>=200)throw new Error("Error starting dial out: displayName length must be less than 200")}return new Promise(function(g,f){c.sendMessageToCallMachine(O({action:"dialout-start"},i),function(v){v.error?f(v.error):g(v)})})}),function(i){return T.apply(this,arguments)})},{key:"stopDialOut",value:function(i){var c=this;return R(this._callState,"stopDialOut()"),new Promise(function(l,g){c.sendMessageToCallMachine(O({action:"dialout-stop"},i),function(f){f.error?g(f.error):l(f)})})}},{key:"sipCallTransfer",value:(S=M(function*(i){var c=this;if(R(this._callState,"sipCallTransfer()"),!i)throw new Error("sipCallTransfer() requires a sessionId and toEndPoint");return i.useSipRefer=!1,Wi(i,"sipCallTransfer"),new Promise(function(l,g){c.sendMessageToCallMachine(O({action:Ti},i),function(f){f.error?g(f.error):l(f)})})}),function(i){return S.apply(this,arguments)})},{key:"sipRefer",value:(b=M(function*(i){var c=this;if(R(this._callState,"sipRefer()"),!i)throw new Error("sessionId and toEndPoint are mandatory parameter");return i.useSipRefer=!0,Wi(i,"sipRefer"),new Promise(function(l,g){c.sendMessageToCallMachine(O({action:Ti},i),function(f){f.error?g(f.error):l(f)})})}),function(i){return b.apply(this,arguments)})},{key:"sendDTMF",value:(w=M(function*(i){var c=this;return R(this._callState,"sendDTMF()"),function(l){var g=l.sessionId,f=l.tones;if(!g||!f)throw new Error("sessionId and tones are mandatory parameter");if(typeof g!="string"||typeof f!="string")throw new Error("sessionId and tones should be of string type");if(f.length>20)throw new Error("tones string must be upto 20 characters");var v=/[^0-9A-D*#]/g,k=f.match(v);if(k&&k[0])throw new Error("".concat(k[0]," is not valid DTMF tone"))}(i),new Promise(function(l,g){c.sendMessageToCallMachine(O({action:"send-dtmf"},i),function(f){f.error?g(f.error):l(f)})})}),function(i){return w.apply(this,arguments)})},{key:"getNetworkStats",value:function(){var i=this;return this._callState!==We?{stats:{latest:{}}}:new Promise(function(c){i.sendMessageToCallMachine({action:"get-calc-stats"},function(l){c(O({stats:l.stats},i._network))})})}},{key:"testWebsocketConnectivity",value:(_=M(function*(){var i=this;if(vn(this._testCallInProgress,"testWebsocketConnectivity()"),this.needsLoad())try{yield this.load()}catch(c){return Promise.reject(c)}return new Promise(function(c,l){i.sendMessageToCallMachine({action:"test-websocket-connectivity"},function(g){g.error?l(g.error):c(g.results)})})}),function(){return _.apply(this,arguments)})},{key:"abortTestWebsocketConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-websocket-connectivity"})}},{key:"_validateVideoTrackForNetworkTests",value:function(i){return i?i instanceof MediaStreamTrack?!!Tc(i)||(console.error("Video track is not playable. This test needs a live video track."),!1):(console.error("Video track needs to be of type `MediaStreamTrack`."),!1):(console.error("Missing video track. You must provide a video track in order to run this test."),!1)}},{key:"testCallQuality",value:(m=M(function*(){var i=this;D(),te(this._callObjectMode,"testCallQuality()"),Rt(this._callMachineInitialized,"testCallQuality()",null,!0),mn(this._callState,this._isPreparingToJoin,"testCallQuality()");var c=this._testCallAlreadyInProgress,l=function(f){c||(i._testCallInProgress=f)};if(l(!0),this.needsLoad())try{var g=this._callState;yield this.load(),this._callState=g}catch(f){return l(!1),Promise.reject(f)}return new Promise(function(f){i.sendMessageToCallMachine({action:"test-call-quality",dailyJsVersion:i.properties.dailyJsVersion},function(v){var k=v.results,E=k.result,x=_r(k,Oc);if(E==="failed"){var J,$=O({},x);(J=x.error)!==null&&J!==void 0&&J.details?(x.error.details=JSON.parse(x.error.details),$.error=O(O({},$.error),{},{details:O({},$.error.details)}),$.error.details.duringTest="testCallQuality"):($.error=$.error?O({},$.error):{},$.error.details={duringTest:"testCallQuality"}),i._maybeSendToSentry($)}l(!1),f(O({result:E},x))})})}),function(){return m.apply(this,arguments)})},{key:"stopTestCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-call-quality"})}},{key:"testConnectionQuality",value:(h=M(function*(i){var c;A()?(console.warn("testConnectionQuality() is deprecated: use testPeerToPeerCallQuality() instead"),c=yield this.testPeerToPeerCallQuality(i)):(console.warn("testConnectionQuality() is deprecated: use testCallQuality() instead"),c=yield this.testCallQuality());var l={result:c.result,secondsElapsed:c.secondsElapsed};return c.data&&(l.data={maxRTT:c.data.maxRoundTripTime,packetLoss:c.data.avgRecvPacketLoss}),l}),function(i){return h.apply(this,arguments)})},{key:"testPeerToPeerCallQuality",value:(p=M(function*(i){var c=this;if(vn(this._testCallInProgress,"testPeerToPeerCallQuality()"),this.needsLoad())try{yield this.load()}catch(f){return Promise.reject(f)}var l=i.videoTrack,g=i.duration;if(!this._validateVideoTrackForNetworkTests(l))throw new Error("Video track error");return this._sharedTracks.videoTrackForConnectionQualityTest=l,new Promise(function(f,v){c.sendMessageToCallMachine({action:"test-p2p-call-quality",duration:g},function(k){k.error?v(k.error):f(k.results)})})}),function(i){return p.apply(this,arguments)})},{key:"stopTestConnectionQuality",value:function(){A()?(console.warn("stopTestConnectionQuality() is deprecated: use testPeerToPeerCallQuality() and stopTestPeerToPeerCallQuality() instead"),this.stopTestPeerToPeerCallQuality()):(console.warn("stopTestConnectionQuality() is deprecated: use testCallQuality() and stopTestCallQuality() instead"),this.stopTestCallQuality())}},{key:"stopTestPeerToPeerCallQuality",value:function(){this.sendMessageToCallMachine({action:"stop-test-p2p-call-quality"})}},{key:"testNetworkConnectivity",value:(d=M(function*(i){var c=this;if(vn(this._testCallInProgress,"testNetworkConnectivity()"),this.needsLoad())try{yield this.load()}catch(l){return Promise.reject(l)}if(!this._validateVideoTrackForNetworkTests(i))throw new Error("Video track error");return this._sharedTracks.videoTrackForNetworkConnectivityTest=i,new Promise(function(l,g){c.sendMessageToCallMachine({action:"test-network-connectivity"},function(f){f.error?g(f.error):l(f.results)})})}),function(i){return d.apply(this,arguments)})},{key:"abortTestNetworkConnectivity",value:function(){this.sendMessageToCallMachine({action:"abort-test-network-connectivity"})}},{key:"getCpuLoadStats",value:function(){var i=this;return new Promise(function(c){i._callState===We?i.sendMessageToCallMachine({action:"get-cpu-load-stats"},function(l){c(l.cpuStats)}):c({cpuLoadState:void 0,cpuLoadStateReason:void 0,stats:{}})})}},{key:"_validateEncodingLayerHasValidProperties",value:function(i){var c;if(!(((c=Object.keys(i))===null||c===void 0?void 0:c.length)>0))throw new Error("Empty encoding is not allowed. At least one of these valid keys should be specified:"+Object.values(gn))}},{key:"_validateVideoSendSettings",value:function(i,c){var l=i==="screenVideo"?["default-screen-video","detail-optimized","motion-optimized","motion-and-detail-balanced"]:["default-video","bandwidth-optimized","bandwidth-and-quality-balanced","quality-optimized","adaptive-2-layers","adaptive-3-layers"],g="Video send settings should be either an object or one of the supported presets: ".concat(l.join());if(typeof c=="string"){if(!l.includes(c))throw new Error(g)}else{if(L(c)!=="object")throw new Error(g);if(!c.maxQuality&&!c.encodings&&c.allowAdaptiveLayers===void 0)throw new Error("Video send settings must contain at least maxQuality, allowAdaptiveLayers or encodings attribute");if(c.maxQuality&&["low","medium","high"].indexOf(c.maxQuality)===-1)throw new Error("maxQuality must be either low, medium or high");if(c.encodings){var f=!1;switch(Object.keys(c.encodings).length){case 1:f=!c.encodings.low;break;case 2:f=!c.encodings.low||!c.encodings.medium;break;case 3:f=!c.encodings.low||!c.encodings.medium||!c.encodings.high;break;default:f=!0}if(f)throw new Error("Encodings must be defined as: low, low and medium, or low, medium and high.");c.encodings.low&&this._validateEncodingLayerHasValidProperties(c.encodings.low),c.encodings.medium&&this._validateEncodingLayerHasValidProperties(c.encodings.medium),c.encodings.high&&this._validateEncodingLayerHasValidProperties(c.encodings.high)}}}},{key:"validateUpdateSendSettings",value:function(i){var c=this;if(!i||Object.keys(i).length===0)throw new Error("Send settings must contain at least information for one track!");Object.entries(i).forEach(function(l){var g=Be(l,2),f=g[0],v=g[1];c._validateVideoSendSettings(f,v)})}},{key:"updateSendSettings",value:function(i){var c=this;return this.validateUpdateSendSettings(i),this.needsLoad()?(this._preloadCache.sendSettings=i,{sendSettings:this._preloadCache.sendSettings}):new Promise(function(l,g){c.sendMessageToCallMachine({action:"update-send-settings",sendSettings:i},function(f){f.error?g(f.error):l(f.sendSettings)})})}},{key:"getSendSettings",value:function(){return this._sendSettings||this._preloadCache.sendSettings}},{key:"getLocalAudioLevel",value:function(){return this._localAudioLevel}},{key:"getRemoteParticipantsAudioLevel",value:function(){return this._remoteParticipantsAudioLevel}},{key:"getActiveSpeaker",value:function(){return D(),this._activeSpeaker}},{key:"setActiveSpeakerMode",value:function(i){return D(),this.sendMessageToCallMachine({action:"set-active-speaker-mode",enabled:i}),this}},{key:"activeSpeakerMode",value:function(){return D(),this._activeSpeakerMode}},{key:"subscribeToTracksAutomatically",value:function(){return this._preloadCache.subscribeToTracksAutomatically}},{key:"setSubscribeToTracksAutomatically",value:function(i){return R(this._callState,"setSubscribeToTracksAutomatically()","Use the subscribeToTracksAutomatically configuration property."),this._preloadCache.subscribeToTracksAutomatically=i,this.sendMessageToCallMachine({action:"daily-method-subscribe-to-tracks-automatically",enabled:i}),this}},{key:"enumerateDevices",value:(u=M(function*(){var i=this;if(this._callObjectMode){var c=yield navigator.mediaDevices.enumerateDevices();return Ve()==="Firefox"&&In().major>115&&In().major<123&&(c=c.filter(function(l){return l.kind!=="audiooutput"})),{devices:c.map(function(l){var g=JSON.parse(JSON.stringify(l));if(!A()&&l.kind==="videoinput"&&l.getCapabilities){var f,v=l.getCapabilities();g.facing=(v==null||(f=v.facingMode)===null||f===void 0?void 0:f.length)>=1?v.facingMode[0]:void 0}return g})}}return new Promise(function(l){i.sendMessageToCallMachine({action:"enumerate-devices"},function(g){l({devices:g.devices})})})}),function(){return u.apply(this,arguments)})},{key:"sendAppMessage",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"*";if(R(this._callState,"sendAppMessage()"),JSON.stringify(i).length>4096)throw new Error("Message data too large. Max size is 4096");return this.sendMessageToCallMachine({action:"app-msg",data:i,to:c}),this}},{key:"addFakeParticipant",value:function(i){return D(),R(this._callState,"addFakeParticipant()"),this.sendMessageToCallMachine(O({action:"add-fake-participant"},i)),this}},{key:"setShowNamesMode",value:function(i){return H(this._callObjectMode,"setShowNamesMode()"),D(),i&&i!=="always"&&i!=="never"?(console.error('setShowNamesMode argument should be "always", "never", or false'),this):(this.sendMessageToCallMachine({action:"set-show-names",mode:i}),this)}},{key:"setShowLocalVideo",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return H(this._callObjectMode,"setShowLocalVideo()"),D(),R(this._callState,"setShowLocalVideo()"),typeof i!="boolean"?(console.error("setShowLocalVideo only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-local-video",show:i}),this._showLocalVideo=i,this)}},{key:"showLocalVideo",value:function(){return H(this._callObjectMode,"showLocalVideo()"),D(),this._showLocalVideo}},{key:"setShowParticipantsBar",value:function(){var i=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return H(this._callObjectMode,"setShowParticipantsBar()"),D(),R(this._callState,"setShowParticipantsBar()"),typeof i!="boolean"?(console.error("setShowParticipantsBar only accepts a boolean value"),this):(this.sendMessageToCallMachine({action:"set-show-participants-bar",show:i}),this._showParticipantsBar=i,this)}},{key:"showParticipantsBar",value:function(){return H(this._callObjectMode,"showParticipantsBar()"),D(),this._showParticipantsBar}},{key:"customIntegrations",value:function(){return D(),H(this._callObjectMode,"customIntegrations()"),this._customIntegrations}},{key:"setCustomIntegrations",value:function(i){return D(),H(this._callObjectMode,"setCustomIntegrations()"),R(this._callState,"setCustomIntegrations()"),Ua(i)?(this.sendMessageToCallMachine({action:"set-custom-integrations",integrations:i}),this._customIntegrations=i,this):this}},{key:"startCustomIntegrations",value:function(i){var c=this;if(D(),H(this._callObjectMode,"startCustomIntegrations()"),R(this._callState,"startCustomIntegrations()"),Array.isArray(i)&&i.some(function(f){return typeof f!="string"})||!Array.isArray(i)&&typeof i!="string")return console.error("startCustomIntegrations() only accepts string | string[]"),this;var l=typeof i=="string"?[i]:i,g=l.filter(function(f){return!(f in c._customIntegrations)});return g.length?(console.error(`Can't find custom integration(s): "`.concat(g.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"start-custom-integrations",ids:l}),this)}},{key:"stopCustomIntegrations",value:function(i){var c=this;if(D(),H(this._callObjectMode,"stopCustomIntegrations()"),R(this._callState,"stopCustomIntegrations()"),Array.isArray(i)&&i.some(function(f){return typeof f!="string"})||!Array.isArray(i)&&typeof i!="string")return console.error("stopCustomIntegrations() only accepts string | string[]"),this;var l=typeof i=="string"?[i]:i,g=l.filter(function(f){return!(f in c._customIntegrations)});return g.length?(console.error(`Can't find custom integration(s): "`.concat(g.join(", "),'"')),this):(this.sendMessageToCallMachine({action:"stop-custom-integrations",ids:l}),this)}},{key:"customTrayButtons",value:function(){return H(this._callObjectMode,"customTrayButtons()"),D(),this._customTrayButtons}},{key:"updateCustomTrayButtons",value:function(i){return H(this._callObjectMode,"updateCustomTrayButtons()"),D(),R(this._callState,"updateCustomTrayButtons()"),Fa(i)?(this.sendMessageToCallMachine({action:"update-custom-tray-buttons",btns:i}),this._customTrayButtons=i,this):(console.error("updateCustomTrayButtons only accepts a dictionary of the type ".concat(JSON.stringify(Qt))),this)}},{key:"theme",value:function(){return H(this._callObjectMode,"theme()"),this.properties.theme}},{key:"setTheme",value:function(i){var c=this;return H(this._callObjectMode,"setTheme()"),new Promise(function(l,g){try{c.validateProperties({theme:i}),c.properties.theme=O({},i),c.sendMessageToCallMachine({action:"set-theme",theme:c.properties.theme});try{c.emitDailyJSEvent({action:so,theme:c.properties.theme})}catch(f){console.log("could not emit 'theme-updated'",f)}l(c.properties.theme)}catch(f){g(f)}})}},{key:"requestFullscreen",value:(o=M(function*(){if(D(),this._iframe&&!document.fullscreenElement&&Oi())try{(yield this._iframe.requestFullscreen)?this._iframe.requestFullscreen():this._iframe.webkitRequestFullscreen()}catch(i){console.log("could not make video call fullscreen",i)}}),function(){return o.apply(this,arguments)})},{key:"exitFullscreen",value:function(){D(),document.fullscreenElement?document.exitFullscreen():document.webkitFullscreenElement&&document.webkitExitFullscreen()}},{key:"getSidebarView",value:(s=M(function*(){var i=this;return this._callObjectMode?(console.error("getSidebarView is not available in callObject mode"),Promise.resolve(null)):new Promise(function(c){i.sendMessageToCallMachine({action:"get-sidebar-view"},function(l){c(l.view)})})}),function(){return s.apply(this,arguments)})},{key:"setSidebarView",value:function(i){return this._callObjectMode?(console.error("setSidebarView is not available in callObject mode"),this):(this.sendMessageToCallMachine({action:"set-sidebar-view",view:i}),this)}},{key:"room",value:(a=M(function*(){var i=this,c=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).includeRoomConfigDefaults,l=c===void 0||c;return this._accessState.access===un||this.needsLoad()?this.properties.url?{roomUrlPendingJoin:this.properties.url}:null:new Promise(function(g){i.sendMessageToCallMachine({action:"lib-room-info",includeRoomConfigDefaults:l},function(f){delete f.action,delete f.callbackStamp,g(f)})})}),function(){return a.apply(this,arguments)})},{key:"geo",value:(r=M(function*(){try{var i=yield fetch("https://gs.daily.co/_ks_/x-swsl/:");return{current:(yield i.json()).geo}}catch(c){return console.error("geo lookup failed",c),{current:""}}}),function(){return r.apply(this,arguments)})},{key:"setNetworkTopology",value:(n=M(function*(i){var c=this;return D(),R(this._callState,"setNetworkTopology()"),new Promise(function(l,g){c.sendMessageToCallMachine({action:"set-network-topology",opts:i},function(f){f.error?g({error:f.error}):l({workerId:f.workerId})})})}),function(i){return n.apply(this,arguments)})},{key:"getNetworkTopology",value:(e=M(function*(){var i=this;return new Promise(function(c,l){i.needsLoad()&&c({topology:"none"}),i.sendMessageToCallMachine({action:"get-network-topology"},function(g){g.error?l({error:g.error}):c({topology:g.topology})})})}),function(){return e.apply(this,arguments)})},{key:"setPlayNewParticipantSound",value:function(i){if(D(),typeof i!="number"&&i!==!0&&i!==!1)throw new Error("argument to setShouldPlayNewParticipantSound should be true, false, or a number, but is ".concat(i));this.sendMessageToCallMachine({action:"daily-method-set-play-ding",arg:i})}},{key:"on",value:function(i,c){return ge.prototype.on.call(this,i,c)}},{key:"once",value:function(i,c){return ge.prototype.once.call(this,i,c)}},{key:"off",value:function(i,c){return ge.prototype.off.call(this,i,c)}},{key:"validateProperties",value:function(i){for(var c in i){if(!De[c])throw new Error("unrecognized property '".concat(c,"'"));if(De[c].validate&&!De[c].validate(i[c],this))throw new Error("property '".concat(c,"': ").concat(De[c].help))}}},{key:"assembleMeetingUrl",value:function(){var i,c,l=O(O({},this.properties),{},{emb:this.callClientId,embHref:encodeURIComponent(window.location.href),proxy:(i=this.properties.dailyConfig)!==null&&i!==void 0&&i.proxyUrl?encodeURIComponent((c=this.properties.dailyConfig)===null||c===void 0?void 0:c.proxyUrl):void 0}),g=l.url.match(/\?/)?"&":"?";return l.url+g+Object.keys(De).filter(function(f){return De[f].queryString&&l[f]!==void 0}).map(function(f){return"".concat(De[f].queryString,"=").concat(l[f])}).join("&")}},{key:"needsLoad",value:function(){return[gi,mi,Pe,_e].includes(this._callState)}},{key:"sendMessageToCallMachine",value:function(i,c){if(this._destroyed&&(this._logUseAfterDestroy(),this.strictMode))throw new Error("Use after destroy");this._messageChannel.sendMessageToCallMachine(i,c,this._iframe,this.callClientId)}},{key:"forwardPackagedMessageToCallMachine",value:function(i){this._messageChannel.forwardPackagedMessageToCallMachine(i,this._iframe,this.callClientId)}},{key:"addListenerForPackagedMessagesFromCallMachine",value:function(i){return this._messageChannel.addListenerForPackagedMessagesFromCallMachine(i,this.callClientId)}},{key:"removeListenerForPackagedMessagesFromCallMachine",value:function(i){this._messageChannel.removeListenerForPackagedMessagesFromCallMachine(i)}},{key:"handleMessageFromCallMachine",value:function(i){switch(i.action){case io:this.sendMessageToCallMachine(O({action:ao},this.properties));break;case"call-machine-initialized":this._callMachineInitialized=!0;var c={action:It,level:"log",code:1011,stats:{event:"bundle load",time:this._bundleLoadTime==="no-op"?0:this._bundleLoadTime,preLoaded:this._bundleLoadTime==="no-op",url:Jt(this.properties.dailyConfig)}};this.sendMessageToCallMachine(c),this._delayDuplicateInstanceLog&&this._logDuplicateInstanceAttempt();break;case yi:this._loadedCallback&&(this._loadedCallback(),this._loadedCallback=null),this.emitDailyJSEvent(i);break;case po:this._joinedCallback&&(this._joinedCallback(i.participants),this._joinedCallback=null),this.emitDailyJSEvent(i);break;case go:case mo:if(this._callState===Pe)return;if(i.participant&&i.participant.session_id){var l=i.participant.local?"local":i.participant.session_id;if(this._callObjectMode){var g=this._callMachine().store;Ii(i.participant,g),Ni(i.participant,g),Li(i.participant,this._participants[l],g)}try{this.maybeParticipantTracksStopped(this._participants[l],i.participant),this.maybeParticipantTracksStarted(this._participants[l],i.participant),this.maybeEventRecordingStopped(this._participants[l],i.participant),this.maybeEventRecordingStarted(this._participants[l],i.participant)}catch(rn){console.error("track events error",rn)}this.compareEqualForParticipantUpdateEvent(i.participant,this._participants[l])||(this._participants[l]=O({},i.participant),this.toggleParticipantAudioBasedOnNativeAudioFocus(),this.emitDailyJSEvent(i))}break;case vo:if(i.participant&&i.participant.session_id){var f=this._participants[i.participant.session_id];f&&this.maybeParticipantTracksStopped(f,null),delete this._participants[i.participant.session_id],this.emitDailyJSEvent(i)}break;case yo:z(this._participantCounts,i.participantCounts)||(this._participantCounts=i.participantCounts,this.emitDailyJSEvent(i));break;case _o:var v={access:i.access};i.awaitingAccess&&(v.awaitingAccess=i.awaitingAccess),z(this._accessState,v)||(this._accessState=v,this.emitDailyJSEvent(i));break;case bo:if(i.meetingSession){this._meetingSessionSummary=i.meetingSession,this.emitDailyJSEvent(i);var k=O(O({},i),{},{action:"meeting-session-updated"});this.emitDailyJSEvent(k)}break;case Si:var E;this._iframe&&!i.preserveIframe&&(this._iframe.src=""),this._updateCallState(_e),this.resetMeetingDependentVars(),this._loadedCallback&&(this._loadedCallback(i.errorMsg),this._loadedCallback=null),i.preserveIframe;var x=_r(i,Pc);x!=null&&(E=x.error)!==null&&E!==void 0&&E.details&&(x.error.details=JSON.parse(x.error.details)),this._maybeSendToSentry(i),this._joinedCallback&&(this._joinedCallback(null,x),this._joinedCallback=null),this.emitDailyJSEvent(x);break;case fo:this._callState!==_e&&this._updateCallState(Pe),this.resetMeetingDependentVars(),this._resolveLeave&&(this._resolveLeave(),this._resolveLeave=null),this.emitDailyJSEvent(i);break;case"selected-devices-updated":i.devices&&this.emitDailyJSEvent(i);break;case qo:var J=i.threshold,$=i.quality;J===this._network.threshold&&$===this._network.quality||(this._network.quality=$,this._network.threshold=J,this.emitDailyJSEvent(i));break;case Yo:i&&i.cpuLoadState&&this.emitDailyJSEvent(i);break;case Wo:i&&i.faceCounts!==void 0&&this.emitDailyJSEvent(i);break;case Vo:var de=i.activeSpeaker;this._activeSpeaker.peerId!==de.peerId&&(this._activeSpeaker.peerId=de.peerId,this.emitDailyJSEvent({action:i.action,activeSpeaker:this._activeSpeaker}));break;case"show-local-video-changed":if(this._callObjectMode)return;var ye=i.show;this._showLocalVideo=ye,this.emitDailyJSEvent({action:i.action,show:ye});break;case Jo:var he=i.enabled;this._activeSpeakerMode!==he&&(this._activeSpeakerMode=he,this.emitDailyJSEvent({action:i.action,enabled:this._activeSpeakerMode}));break;case So:case ko:case Eo:this._waitingParticipants=i.allWaitingParticipants,this.emitDailyJSEvent({action:i.action,participant:i.participant});break;case Zo:z(this._receiveSettings,i.receiveSettings)||(this._receiveSettings=i.receiveSettings,this.emitDailyJSEvent({action:i.action,receiveSettings:i.receiveSettings}));break;case ec:if(!z(this._inputSettings,i.inputSettings)){var nn=this._getInputSettings();this._inputSettings=i.inputSettings,this._preloadCache.inputSettings={},z(nn,this._getInputSettings())||this.emitDailyJSEvent({action:i.action,inputSettings:this._getInputSettings()})}break;case"send-settings-updated":z(this._sendSettings,i.sendSettings)||(this._sendSettings=i.sendSettings,this._preloadCache.sendSettings=null,this.emitDailyJSEvent({action:i.action,sendSettings:i.sendSettings}));break;case"local-audio-level":this._localAudioLevel=i.audioLevel,this._preloadCache.localAudioLevelObserver=null,this.emitDailyJSEvent(i);break;case"remote-participants-audio-level":this._remoteParticipantsAudioLevel=i.participantsAudioLevel,this._preloadCache.remoteParticipantsAudioLevelObserver=null,this.emitDailyJSEvent(i);break;case Lo:var G=i.session_id;this._rmpPlayerState[G]=i.playerState,this.emitDailyJSEvent(i);break;case Bo:delete this._rmpPlayerState[i.session_id],this.emitDailyJSEvent(i);break;case Ro:var ce=i.session_id,Oe=this._rmpPlayerState[ce];Oe&&this.compareEqualForRMPUpdateEvent(Oe,i.remoteMediaPlayerState)||(this._rmpPlayerState[ce]=i.remoteMediaPlayerState,this.emitDailyJSEvent(i));break;case"custom-button-click":case"sidebar-view-changed":this.emitDailyJSEvent(i);break;case wo:var St=this._meetingSessionState.topology!==(i.meetingSessionState&&i.meetingSessionState.topology);this._meetingSessionState=yn(i.meetingSessionState,this._callObjectMode),(this._callObjectMode||St)&&this.emitDailyJSEvent(i);break;case Fo:this._isScreenSharing=!0,this.emitDailyJSEvent(i);break;case Uo:case $o:this._isScreenSharing=!1,this.emitDailyJSEvent(i);break;case _i:case bi:case xo:case Do:case Ao:case To:case Oo:case Po:case lo:case uo:case Io:case No:case Go:case jo:case zo:case Ho:case Qo:case Ko:case wi:case Xo:case"dialin-ready":case"dialin-connected":case"dialin-error":case"dialin-stopped":case"dialin-warning":case"dialout-connected":case"dialout-answered":case"dialout-error":case"dialout-stopped":case"dialout-warning":this.emitDailyJSEvent(i);break;case"request-fullscreen":this.requestFullscreen();break;case"request-exit-fullscreen":this.exitFullscreen()}}},{key:"maybeEventRecordingStopped",value:function(i,c){var l="record";i&&(c.local||c[l]!==!1||i[l]===c[l]||this.emitDailyJSEvent({action:bi}))}},{key:"maybeEventRecordingStarted",value:function(i,c){var l="record";i&&(c.local||c[l]!==!0||i[l]===c[l]||this.emitDailyJSEvent({action:_i}))}},{key:"maybeEventTrackStopped",value:function(i,c,l,g){i&&(i.readyState!=="ended"&&c&&i.id===c.id||this.emitDailyJSEvent({action:Mo,track:i,participant:l,type:g}))}},{key:"maybeEventTrackStarted",value:function(i,c,l,g){c&&(i&&i.readyState!=="ended"&&c.id===i.id||this.emitDailyJSEvent({action:Co,track:c,participant:l,type:g}))}},{key:"maybeParticipantTracksStopped",value:function(i,c){if(i)for(var l in i.tracks)this.maybeEventTrackStopped(i.tracks[l].track,c&&c.tracks[l]?c.tracks[l].track:null,c,l)}},{key:"maybeParticipantTracksStarted",value:function(i,c){if(c)for(var l in c.tracks)this.maybeEventTrackStarted(i&&i.tracks[l]?i.tracks[l].track:null,c.tracks[l].track,c,l)}},{key:"compareEqualForRMPUpdateEvent",value:function(i,c){var l,g;return i.state===c.state&&((l=i.settings)===null||l===void 0?void 0:l.volume)===((g=c.settings)===null||g===void 0?void 0:g.volume)}},{key:"emitDailyJSEvent",value:function(i){try{i.callClientId=this.callClientId,this.emit(i.action,i)}catch(c){console.log("could not emit",i,c)}}},{key:"compareEqualForParticipantUpdateEvent",value:function(i,c){return!!z(i,c)&&(!i.videoTrack||!c.videoTrack||i.videoTrack.id===c.videoTrack.id&&i.videoTrack.muted===c.videoTrack.muted&&i.videoTrack.enabled===c.videoTrack.enabled)&&(!i.audioTrack||!c.audioTrack||i.audioTrack.id===c.audioTrack.id&&i.audioTrack.muted===c.audioTrack.muted&&i.audioTrack.enabled===c.audioTrack.enabled)}},{key:"nativeUtils",value:function(){return A()?typeof DailyNativeUtils>"u"?(console.warn("in React Native, DailyNativeUtils is expected to be available"),null):DailyNativeUtils:null}},{key:"updateIsPreparingToJoin",value:function(i){this._updateCallState(this._callState,i)}},{key:"_updateCallState",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this._isPreparingToJoin;if(i!==this._callState||c!==this._isPreparingToJoin){var l=this._callState,g=this._isPreparingToJoin;this._callState=i,this._isPreparingToJoin=c;var f=Vt(l,g),v=Vt(this._callState,this._isPreparingToJoin);f!==v&&(this.updateKeepDeviceAwake(v),this.updateDeviceAudioMode(v),this.updateShowAndroidOngoingMeetingNotification(v),this.updateNoOpRecordingEnsuringBackgroundContinuity(v))}}},{key:"resetMeetingDependentVars",value:function(){this._participants={},this._participantCounts=qi,this._waitingParticipants={},this._activeSpeaker={},this._activeSpeakerMode=!1,this._didPreAuth=!1,this._accessState={access:un},this._finalSummaryOfPrevSession=this._meetingSessionSummary,this._meetingSessionSummary={},this._meetingSessionState=yn(Ji,this._callObjectMode),this._isScreenSharing=!1,this._receiveSettings={},this._inputSettings=void 0,this._sendSettings={},this._localAudioLevel=0,this._remoteParticipantsAudioLevel={},this._callMachineInitialized=!1,this._bundleLoadTime=void 0,this._preloadCache}},{key:"updateKeepDeviceAwake",value:function(i){A()&&this.nativeUtils().setKeepDeviceAwake(i,this.callClientId)}},{key:"updateDeviceAudioMode",value:function(i){if(A()&&!this.disableReactNativeAutoDeviceManagement("audio")){var c=i?this._nativeInCallAudioMode:"idle";this.nativeUtils().setAudioMode(c)}}},{key:"updateShowAndroidOngoingMeetingNotification",value:function(i){if(A()&&this.nativeUtils().setShowOngoingMeetingNotification){var c,l,g,f;if(this.properties.reactNativeConfig&&this.properties.reactNativeConfig.androidInCallNotification){var v=this.properties.reactNativeConfig.androidInCallNotification;c=v.title,l=v.subtitle,g=v.iconName,f=v.disableForCustomOverride}f&&(i=!1),this.nativeUtils().setShowOngoingMeetingNotification(i,c,l,g,this.callClientId)}}},{key:"updateNoOpRecordingEnsuringBackgroundContinuity",value:function(i){A()&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity&&this.nativeUtils().enableNoOpRecordingEnsuringBackgroundContinuity(i)}},{key:"toggleParticipantAudioBasedOnNativeAudioFocus",value:function(){var i,c;if(A()){var l=(i=this._callMachine())===null||i===void 0||(c=i.store)===null||c===void 0?void 0:c.getState();for(var g in l==null?void 0:l.streams){var f=l.streams[g];f&&f.pendingTrack&&f.pendingTrack.kind==="audio"&&(f.pendingTrack.enabled=this._hasNativeAudioFocus)}}}},{key:"disableReactNativeAutoDeviceManagement",value:function(i){return this.properties.reactNativeConfig&&this.properties.reactNativeConfig.disableAutoDeviceManagement&&this.properties.reactNativeConfig.disableAutoDeviceManagement[i]}},{key:"absoluteUrl",value:function(i){if(i!==void 0){var c=document.createElement("a");return c.href=i,c.href}}},{key:"sayHello",value:function(){var i="hello, world.";return console.log(i),i}},{key:"_logUseAfterDestroy",value:function(){var i=Object.values(xe)[0];if(this.needsLoad())if(i&&!i.needsLoad()){var c={action:It,level:"error",code:this.strictMode?9995:9997};i.sendMessageToCallMachine(c)}else this.strictMode||console.error("You are are attempting to use a call instance that was previously destroyed, which is unsupported. Please remove `strictMode: false` from your constructor properties to enable strict mode to track down and fix this unsupported usage.");else{var l={action:It,level:"error",code:this.strictMode?9995:9997};this._messageChannel.sendMessageToCallMachine(l,null,this._iframe,this.callClientId)}}},{key:"_logDuplicateInstanceAttempt",value:function(){var i=Object.values(xe)[0],c=i._callMachineInitialized?i:this._callMachineInitialized?this:void 0;c?(c.sendMessageToCallMachine({action:It,level:"warn",code:this.allowMultipleCallInstances?9993:9992}),this._delayDuplicateInstanceLog=!1):(this._delayDuplicateInstanceLog=!0,i._delayDuplicateInstanceLog=!0)}},{key:"_maybeSendToSentry",value:function(i){var c,l,g,f,v,k;if(!((c=i.error)!==null&&c!==void 0&&c.type&&!["connection-error","end-of-life","no-room"].includes(i.error.type))){var E=(l=this.properties)!==null&&l!==void 0&&l.url?new URL(this.properties.url):void 0,x="production";E&&E.host.includes(".staging.daily")&&(x="staging");var J,$,de,ye,he,nn=new Ys({dsn:"https://f10f1c81e5d44a4098416c0867a8b740@o77906.ingest.sentry.io/168844",transport:Ws,integrations:[new fi.GlobalHandlers({onunhandledrejection:!1}),new fi.HttpContext],environment:x}),G=new Qn(nn,void 0,X.version());if(this.session_id&&G.setExtra("sessionId",this.session_id),this.properties){var ce=O({},this.properties);ce.userName=ce.userName?"[Filtered]":void 0,ce.userData=ce.userData?"[Filtered]":void 0,ce.token=ce.token?"[Filtered]":void 0,G.setExtra("properties",ce)}if(E){var Oe=E.searchParams.get("domain");if(!Oe){var St=E.host.match(/(.*?)\./);Oe=St&&St[1]||""}Oe&&G.setTag("domain",Oe)}i.error&&(G.setTag("fatalErrorType",i.error.type),G.setExtra("errorDetails",i.error.details),!((J=i.error.details)===null||J===void 0)&&J.uri&&G.setTag("serverAddress",i.error.details.uri),!(($=i.error.details)===null||$===void 0)&&$.workerGroup&&G.setTag("workerGroup",i.error.details.workerGroup),!((de=i.error.details)===null||de===void 0)&&de.geoGroup&&G.setTag("geoGroup",i.error.details.geoGroup),!((ye=i.error.details)===null||ye===void 0)&&ye.on&&G.setTag("connectionAttempt",i.error.details.on),(he=i.error.details)!==null&&he!==void 0&&he.bundleUrl&&(G.setTag("bundleUrl",i.error.details.bundleUrl),G.setTag("bundleError",i.error.details.sourceError.type))),G.setTags({callMode:this._callObjectMode?A()?"reactNative":(g=this.properties)!==null&&g!==void 0&&(f=g.dailyConfig)!==null&&f!==void 0&&(v=f.callMode)!==null&&v!==void 0&&v.includes("prebuilt")?this.properties.dailyConfig.callMode:"custom":"prebuilt-frame",version:X.version()});var rn=((k=i.error)===null||k===void 0?void 0:k.msg)||i.errorMsg;G.run(function(Ja){Ja.captureException(new Error(rn))})}}},{key:"_callMachine",value:function(){var i,c,l;return(i=window._daily)===null||i===void 0||(c=i.instances)===null||c===void 0||(l=c[this.callClientId])===null||l===void 0?void 0:l.callMachine}}],[{key:"supportedBrowser",value:function(){if(A())return{supported:!0,mobile:!0,name:"React Native",version:null,supportsScreenShare:!0,supportsSfu:!0,supportsVideoProcessing:!1,supportsAudioProcessing:!1};var i=ls.getParser(ie());return{supported:!!Pi(),mobile:i.getPlatformType()==="mobile",name:i.getBrowserName(),version:i.getBrowserVersion(),supportsFullscreen:!!Oi(),supportsScreenShare:!!rc(),supportsSfu:!!Pi(),supportsVideoProcessing:Ta(),supportsAudioProcessing:Oa()}}},{key:"version",value:function(){return"0.67.0"}},{key:"createCallObject",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return i.layout="none",new X(null,i)}},{key:"wrap",value:function(i){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(),!i||!i.contentWindow||typeof i.src!="string")throw new Error("DailyIframe::Wrap needs an iframe-like first argument");return c.layout||(c.customLayout?c.layout="custom-v1":c.layout="browser"),new X(i,c)}},{key:"createFrame",value:function(i,c){var l,g;D(),i&&c?(l=i,g=c):i&&i.append?(l=i,g={}):(l=document.body,g=i||{});var f=g.iframeStyle;f||(f=l===document.body?{position:"fixed",border:"1px solid black",backgroundColor:"white",width:"375px",height:"450px",right:"1em",bottom:"1em"}:{border:0,width:"100%",height:"100%"});var v=document.createElement("iframe");window.navigator&&window.navigator.userAgent.match(/Chrome\/61\./)?v.allow="microphone, camera":v.allow="microphone; camera; autoplay; display-capture; screen-wake-lock",v.style.visibility="hidden",l.appendChild(v),v.style.visibility=null,Object.keys(f).forEach(function(k){return v.style[k]=f[k]}),g.layout||(g.customLayout?g.layout="custom-v1":g.layout="browser");try{return new X(v,g)}catch(k){throw l.removeChild(v),k}}},{key:"createTransparentFrame",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};D();var c=document.createElement("iframe");return c.allow="microphone; camera; autoplay",c.style.cssText=`
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
      pointer-events: none;
    `,document.body.appendChild(c),i.layout||(i.layout="custom-v1"),X.wrap(c,i)}},{key:"getCallInstance",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;return i?xe[i]:Object.values(xe)[0]}}]),X}();function qe(t,e){var n={};for(var r in t)if(t[r]instanceof MediaStreamTrack)n[r]=ut;else if(r==="dailyConfig"){if(t[r].modifyLocalSdpHook){var a=window._daily.instances[e].customCallbacks||{};a.modifyLocalSdpHook=t[r].modifyLocalSdpHook,window._daily.instances[e].customCallbacks=a,delete t[r].modifyLocalSdpHook}if(t[r].modifyRemoteSdpHook){var s=window._daily.instances[e].customCallbacks||{};s.modifyRemoteSdpHook=t[r].modifyRemoteSdpHook,window._daily.instances[e].customCallbacks=s,delete t[r].modifyRemoteSdpHook}n[r]=t[r]}else n[r]=t[r];return n}function R(t){var e=arguments.length>2?arguments[2]:void 0;if(t!==We){var n="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," only supported after join.");throw e&&(n+=" ".concat(e)),console.error(n),new Error(n)}}function Vt(t,e){return[Dn,We].includes(t)||e}function mn(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"This daily-js method",r=arguments.length>3?arguments[3]:void 0;if(Vt(t,e)){var a="".concat(n," not supported after joining a meeting.");throw r&&(a+=" ".concat(r)),console.error(a),new Error(a)}}function Rt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method",n=arguments.length>2?arguments[2]:void 0;if(!t){var r="".concat(e,arguments.length>3&&arguments[3]!==void 0&&arguments[3]?" requires preAuth() or startCamera() to initialize call state.":" requires preAuth(), startCamera(), or join() to initialize call state.");throw n&&(r+=" ".concat(n)),console.error(r),new Error(r)}}function vn(t){if(t){var e="A pre-call quality test is in progress. Please try ".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," again once testing has completed. Use stopTestCallQuality() to end it early.");throw console.error(e),new Error(e)}}function te(t){if(!t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported on custom callObject instances");throw console.error(e),new Error(e)}}function H(t){if(t){var e="".concat(arguments.length>1&&arguments[1]!==void 0?arguments[1]:"This daily-js method"," is only supported as part of Daily's Prebuilt");throw console.error(e),new Error(e)}}function D(){if(A())throw new Error("This daily-js method is not currently supported in React Native")}function ct(){if(!A())throw new Error("This daily-js method is only supported in React Native")}function ja(t){if(t===void 0)return!0;var e;if(typeof t=="string")e=t;else try{e=JSON.stringify(t),z(JSON.parse(e),t)||console.warn("The userData provided will be modified when serialized.")}catch(n){throw Error("userData must be serializable to JSON: ".concat(n))}if(e.length>4096)throw Error("userData is too large (".concat(e.length," characters). Maximum size suppported is ").concat(4096,"."));return!0}function Ia(t,e){for(var n=e.allowAllParticipantsKey,r=function(m){var _=["local"];return n||_.push("*"),m&&!_.includes(m)},a=function(m){return!!(m.layer===void 0||Number.isInteger(m.layer)&&m.layer>=0||m.layer==="inherit")},s=function(m){return!!m&&!(m.video&&!a(m.video))&&!(m.screenVideo&&!a(m.screenVideo))},o=0,u=Object.entries(t);o<u.length;o++){var d=Be(u[o],2),p=d[0],h=d[1];if(!r(p)||!s(h))return!1}return!0}function Na(t){return L(t)==="object"&&!(t.video&&(L(t.video)!=="object"||!function(a){var s=["type","config"];return!a||L(a)!=="object"||!function(o){return typeof o!="string"?!1:Object.values($t).includes(o)?!0:(console.error("inputSettings video processor type invalid"),!1)}(a.type)||a.config&&(L(a.config)!=="object"||!function(o,u){var d=Object.keys(u);if(d.length===0)return!0;var p="invalid object in inputSettings -> video -> processor -> config";switch(o){case $t.BGBLUR:return d.length>1||d[0]!=="strength"?(console.error(p),!1):!(typeof u.strength!="number"||u.strength<=0||u.strength>1||isNaN(u.strength))||(console.error("".concat(p,"; expected: {0 < strength <= 1}, got: ").concat(u.strength)),!1);case $t.BGIMAGE:return!(u.source!==void 0&&!function(h){if(h.source==="default")return h.type="default",!0;if(h.source instanceof ArrayBuffer)return!0;if(gt(h.source))return h.type="url",!!function(w){var b=new URL(w),S=b.pathname;if(b.protocol==="data:")try{var T=S.substring(S.indexOf(":")+1,S.indexOf(";")).split("/")[1];return hn.includes(T)}catch(U){return console.error("failed to deduce blob content type",U),!1}var C=S.split(".").at(-1).toLowerCase().trim();return hn.includes(C)}(h.source)||(console.error("invalid image type; supported types: [".concat(hn.join(", "),"]")),!1);return m=h.source,_=Number(m),isNaN(_)||!Number.isInteger(_)||_<=0||_>Mi?(console.error("invalid image selection; must be an int, > 0, <= ".concat(Mi)),!1):(h.type="daily-preselect",!0);var m,_}(u));default:return!0}}(a.type,a.config))?!1:(Object.keys(a).filter(function(o){return!s.includes(o)}).forEach(function(o){console.warn("invalid key inputSettings -> video -> processor : ".concat(o)),delete a[o]}),!0)}(t.video.processor)))&&!(t.audio&&(L(t.audio)!=="object"||(n=t.audio.processor,r=["type"],!n||L(n)!=="object"||(Object.keys(n).filter(function(a){return!r.includes(a)}).forEach(function(a){console.warn("invalid key inputSettings -> audio -> processor : ".concat(a)),delete n[a]}),e=n.type,typeof e!="string"||!Object.values(Ca).includes(e)&&(console.error("inputSettings audio processor type invalid"),1)))));var e,n,r}function La(t,e){var n,r=[];t.video&&!Ta((n=e==null?void 0:e.useLegacyVideoProcessor)!==null&&n!==void 0&&n)&&(delete t.video,r.push("video")),t.audio&&!Oa()&&(delete t.audio,r.push("audio")),r.length>0&&console.error("Ignoring settings for browser- or platform-unsupported input processor(s): ".concat(r.join(", ")))}function Un(){var t=Object.values($t).join(" | "),e=Object.values(Ca).join(" | ");return"inputSettings must be of the form: { video?: { processor: { type: [ ".concat(t," ], config?: {} } }, audio?: { processor: {type: [ ").concat(e," ] } } }")}function Ra(t){var e=t.allowAllParticipantsKey;return"receiveSettings must be of the form { [<remote participant id> | ".concat(no).concat(e?' | "'.concat(ro,'"'):"","]: ")+'{ [video: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]], [screenVideo: [{ layer: [<non-negative integer> | "inherit"] } | "inherit"]] }}}'}function Ba(){return"customIntegrations should be an object of type ".concat(JSON.stringify(Fn),".")}function Fa(t){if(t&&L(t)!=="object"||Array.isArray(t))return console.error("customTrayButtons should be an Object of the type ".concat(JSON.stringify(Qt),".")),!1;if(t)for(var e=0,n=Object.entries(t);e<n.length;e++)for(var r=Be(n[e],1)[0],a=0,s=Object.entries(t[r]);a<s.length;a++){var o=Be(s[a],2),u=o[0],d=o[1];if(u==="iconPath"&&!gt(d)||u==="iconPathDarkMode"&&!gt(d))return console.error("customTrayButton ".concat(u," should be a url.")),!1;var p=Qt.id[u];if(!p)return console.error("customTrayButton does not support key ".concat(u)),!1;if(L(d)!==p)return console.error("customTrayButton ".concat(u," should be a ").concat(p,".")),!1}return!0}function Ua(t){if(!t||t&&L(t)!=="object"||Array.isArray(t))return console.error(Ba()),!1;for(var e=function(m){return"".concat(m," should be ").concat(Fn.id[m])},n=function(m,_){return console.error("customIntegration ".concat(m,": ").concat(_))},r=0,a=Object.entries(t);r<a.length;r++){var s=Be(a[r],1)[0];if(!("label"in t[s]))return n(s,"label is required"),!1;if(!("location"in t[s]))return n(s,"location is required"),!1;if(!("src"in t[s])&&!("srcdoc"in t[s]))return n(s,"src or srcdoc is required"),!1;for(var o=0,u=Object.entries(t[s]);o<u.length;o++){var d=Be(u[o],2),p=d[0],h=d[1];switch(p){case"allow":case"csp":case"name":case"referrerPolicy":case"sandbox":if(typeof h!="string")return n(s,e(p)),!1;break;case"iconURL":if(!gt(h))return n(s,"".concat(p," should be a url")),!1;break;case"src":if("srcdoc"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(!gt(h))return n(s,'src "'.concat(h,'" is not a valid URL')),!1;break;case"srcdoc":if("src"in t[s])return n(s,"cannot have both src and srcdoc"),!1;if(typeof h!="string")return n(s,e(p)),!1;break;case"location":if(!["main","sidebar"].includes(h))return n(s,e(p)),!1;break;case"controlledBy":if(h!=="*"&&h!=="owners"&&(!Array.isArray(h)||h.some(function(m){return typeof m!="string"})))return n(s,e(p)),!1;break;case"shared":if((!Array.isArray(h)||h.some(function(m){return typeof m!="string"}))&&h!=="owners"&&typeof h!="boolean")return n(s,e(p)),!1;break;default:if(!Fn.id[p])return console.error("customIntegration does not support key ".concat(p)),!1}}}return!0}function $a(t,e){if(e===void 0)return!1;switch(L(e)){case"string":return L(t)===e;case"object":if(L(t)!=="object")return!1;for(var n in t)if(!$a(t[n],e[n]))return!1;return!0;default:return!1}}function Wi(t,e){var n=t.sessionId,r=t.toEndPoint,a=t.useSipRefer;if(!n||!r)throw new Error("".concat(e,"() requires a sessionId and toEndPoint"));if(typeof n!="string"||typeof r!="string")throw new Error("Invalid paramater: sessionId and toEndPoint must be of type string");if(a&&!r.startsWith("sip:"))throw new Error('"toEndPoint" must be a "sip" address');if(!r.startsWith("sip:")&&!r.startsWith("+"))throw new Error("toEndPoint: ".concat(r,' must starts with either "sip:" or "+"'))}function zi(t){if(L(t)!=="object")throw new Error('RemoteMediaPlayerSettings: must be "object" type');if(t.state&&!Object.values(An).includes(t.state))throw new Error("Invalid value for RemoteMediaPlayerSettings.state, valid values are: "+JSON.stringify(An));if(t.volume){if(typeof t.volume!="number")throw new Error('RemoteMediaPlayerSettings.volume: must be "number" type');if(t.volume<0||t.volume>2)throw new Error("RemoteMediaPlayerSettings.volume: must be between 0.0 - 2.0")}}function Hi(t,e,n){return!(typeof t!="number"||t<e||t>n)}function yn(t,e){return t&&!e&&delete t.data,t}const jc={class:"row tw-flex tw-items-center tw-justify-end md:tw-justify-between"},Ic={class:"tw-hidden tw-items-center md:tw-flex"},Nc={key:0},Lc={class:"tw-flex tw-items-center"},Rc=$n({__name:"AppHeader",props:{status:{type:String,default:"lobby"}},setup(t){const{t:e}=Vn(),n=Qi(),r=Jn(),a=Ae(0),s=qa(()=>"https://dashboard.mentalcrm.ru"),o=async(p="")=>{try{await navigator.clipboard.writeText(p)}catch(h){console.error(h)}},u=p=>p<10?`0${p}`:p,d=p=>Number(n.query.start)<kt().valueOf()?`${u(Math.floor(p/60))}:${u(Math.floor(p%60))}`:"00:00";return setInterval(()=>{a.value=kt.duration(kt().diff(kt(Number(n.query.start)))).asMinutes()},1e3),(p,h)=>{var _,w;const m=Ga("CopyIcon");return Q(),Le("header",null,[je("div",jc,[je("div",Ic,[dt(Ka,{disabled:t.status!=="lobby",pathName:"Sessions"},null,8,["disabled"]),q(n).query.start&&q(r).user.type?(Q(),Le("div",Nc,h[1]||(h[1]=[je("div",{class:"line tw-mx-3 tw-mt-0.5"},null,-1)]))):Ge("",!0),q(n).query.start&&q(r).user.type?(Q(),Ye(yr,{key:1,text:q(e)("sessions.timer")},{activator:Bt(({props:b})=>[je("button",vr(b,{class:"text-primary tw-text-3xl tw-font-medium",type:"button"}),Ft(d(a.value)),17)]),_:1},8,["text"])):Ge("",!0)]),je("div",Lc,[((w=(_=q(r))==null?void 0:_.user)==null?void 0:w.type)==="Therapist"?(Q(),Ye(Xa,{key:0,title:q(e)("sessions.newSession"),class:"tw-mr-3","is-show-calendar-btn":""},null,8,["title"])):Ge("",!0),q(r).user.type==="Therapist"||q(r).user.type==="Client"?(Q(),Ye(Za,{key:1,width:600,class:"tw-mr-3","is-show-notes-btn":""})):Ge("",!0),q(n).query.url?(Q(),Ye(yr,{key:2,text:"Сopy the link to the room"},{activator:Bt(({props:b})=>[dt(Ki,vr({onClick:h[0]||(h[0]=S=>o(`${s.value}/#/video?url=${q(n).query.url}&start=${q(n).query.start}`))},b,{color:"primary",variant:"tonal",icon:""}),{default:Bt(()=>[dt(m)]),_:2},1040)]),_:1})):Ge("",!0)])])])}}}),Bc={class:"exit-block tw-flex tw-items-center tw-justify-center"},Fc={class:"tw-flex tw-flex-col tw-items-center tw-justify-center"},Uc={key:0,class:"tw-mb-5 tw-text-3xl tw-font-semibold"},$c={key:1,class:"tw-mb-5 tw-text-3xl tw-font-semibold"},Vc=$n({__name:"Exit",props:{error:{default:!1,type:Boolean}},setup(t){const{t:e}=Vn(),n=Ya(),r=Jn(),a=t,s=()=>{r.user.type&&n.push({name:"Sessions"})};return(o,u)=>(Q(),Le("section",Bc,[je("div",Fc,[a.error?(Q(),Le("p",$c,Ft(q(e)("sessions.exitError")),1)):(Q(),Le("p",Uc,Ft(q(e)("sessions.exitTitle")),1)),q(r).user.type?(Q(),Ye(Ki,{key:2,onClick:s,size:"large",color:"primary"},{default:Bt(()=>[Wa(Ft(q(e)("sessions.exitBtn")),1)]),_:1})):Ge("",!0)])]))}}),Jc={class:"wrapper"},qc=$n({__name:"VideoChat",setup(t){const e=Qi(),n=Qa(),r=Jn(),{locale:a}=Vn({useScope:"global"}),s={height:"calc(100vh - 73px)",width:"100vw",border:"1px solid var(--grey)",exit:!1,error:!1},o={colors:{accent:"#006E2A",accentText:"#ffffff"}},u=["de","en","es","fi","fr","it","jp","ka","nl","no","pl","pt","pt-BR","ru","sv","tr"],d=Ae(""),p=Ae("lobby"),h=Ae(null),m=Ae(null),_=Ae(!1),w=Ae(!1),b=C=>u.includes(C)?C:"en",S=C=>{h.value&&h.value.destroy();const U=Je=>console.log(Je),oe=()=>p.value="lobby",me=()=>p.value="call",Te=()=>{h.value&&(p.value="lobby",h.value.destroy(),w.value=!0)};if(m.value){const Je=a.value,ve=Ac.createFrame(m.value,{userName:r.user.lastName||r.user.firstName?`${r.user.lastName} ${r.user.firstName}`:"Guest",iframeStyle:s,showLeaveButton:!0,lang:b(Je)});ve.setTheme(o),ve.startRecording({instanceId:"00000000-0000-4000-8000-000000000000",width:1280,height:720,fps:25,backgroundColor:"#FF1F2D3D",layout:{preset:"default",max_cam_streams:5}}),ve.on("loaded",U).on("camera-error",U).on("joining-meeting",oe).on("joined-meeting",me).on("left-meeting",Te),ve.join({url:C,showFullscreenButton:!0}),h.value=ve}},T=()=>{S(d.value)};return za(async()=>{try{await r.getUserDetails()}catch{console.error("Error user details"),e.query.url||(w.value=!0)}if(e.query.url)d.value=`https://mentalcrm.daily.co/${e.query.url}`;else{const C=await n.getSession(Number(e.query.id));r.user.type==="Therapist"?d.value=`${C.room.dailyCoUrl}?t=${C.dailyCoTherapistToken}`:d.value=`${C.room.dailyCoUrl}?t=${C.dailyCoClientToken}`,console.log(C),console.log(d.value)}T()}),Ha(()=>{h.value&&h.value.destroy()}),(C,U)=>(Q(),Le("div",null,[dt(Rc,{status:p.value},null,8,["status"]),je("main",Jc,[dt(es),w.value?(Q(),Ye(Vc,{key:1,error:_.value},null,8,["error"])):(Q(),Le("div",{key:0,id:"call",ref_key:"callRef",ref:m},null,512))])]))}}),rl=ts(qc,[["__scopeId","data-v-7a44690a"]]);export{rl as default};
