import{u as R}from"./Client-Dmb9Ytlu.js";import{d as $,aD as x,ap as M,o as l,c as d,e as t,w as o,V as _,a as f,f as U,am as b,F as C,r as S,ar as L,as as D,u as E,g as F,i as q,p as k,q as j,b as V,s as G,af as B,aF as A,t as v,ak as N,B as z,m as T,k as I}from"./index-BhGVanJs.js";const J=["src"],P=$({__name:"VideoModal",props:x({url:{default:"",type:String}},{modelValue:{default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const a=M(u,"modelValue");return(c,s)=>{const y=S("VideoIcon");return l(),d(C,null,[t(_,{onClick:s[0]||(s[0]=p=>a.value=!0),class:"tw-mr-2",size:"small",color:"info",icon:""},{default:o(()=>[t(y)]),_:1}),t(b,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=p=>a.value=p),width:"1200"},{default:o(()=>[f("video",{autoplay:"",controls:"",src:u.url},s[2]||(s[2]=[f("track",{kind:"captions"},null,-1),f("source",{type:"video/mp4"},null,-1),U(" Your browser does not support the video tag. ")]),8,J)]),_:1},8,["modelValue"])],64)}}}),Y=L({id:"Recording",state:()=>({list:[],total:0}),actions:{async getRecordsById(u,a={}){const{data:c}=await D.get(`/api/session/past/client/${u}`,{params:a});return this.list=c.list,this.total=c.total,c}}}),Q={key:0},X={key:1},Z={class:"title text-white"},H={class:"tw-flex tw-justify-between tw-items-center tw-mb-3"},K={key:0,class:"tw-text-xl tw-font-semibold"},O={key:1,class:"tw-text-xl tw-font-semibold"},W=$({__name:"TranslateModal",props:x({record:{}},{modelValue:{default:!1},modelModifiers:{}}),emits:["update:modelValue"],setup(u){const{t:a}=E(),c=F(),s=q(),y=R(),p=Y(),w=M(u,"modelValue");y.getClients({limit:300});const g=async r=>{const e=await D.post(r);return s.createNotification({title:a("notification.needTime"),color:"info"}),await p.getRecordsById(Number(c.query.id),{id:c.query.id,limit:3}),e};return(r,e)=>{const n=S("AlignJustifiedIcon");return l(),d(C,null,[r.record.transcriptionStage!=="FAILED"?(l(),d("div",Q,[r.record.transcriptionStage==="TRANSCRIBED"||r.record.transcriptionStage==="SUMMARIZED"?(l(),k(_,{key:0,onClick:e[0]||(e[0]=i=>w.value=!0),size:"small",color:"info",class:"tw-mr-2",icon:""},{default:o(()=>[t(n)]),_:1})):(l(),k(G,{key:1,text:V(a)("recording.generating")},{activator:o(({props:i})=>[t(_,j(i,{onClick:e[1]||(e[1]=m=>g(r.record.actionLinks[0].url)),loading:r.record.transcriptionStage==="EXTRACTED"||r.record.transcriptionStage==="QUEUED",size:"small",color:"warning",icon:"",class:"tw-mr-2"}),{default:o(()=>[t(n)]),_:2},1040,["loading"])]),_:1},8,["text"]))])):(l(),d("div",X,[t(_,{size:"small",color:"error",class:"tw-mr-2",icon:"",disabled:""},{default:o(()=>[t(n)]),_:1})])),t(b,{modelValue:w.value,"onUpdate:modelValue":e[2]||(e[2]=i=>w.value=i),width:"800"},{default:o(()=>[t(B,null,{default:o(()=>[t(A,{class:"pa-4 bg-primary"},{default:o(()=>[f("p",Z,v(V(a)("recording.transcript")),1)]),_:1}),t(N,{class:"!tw-pb-0 !tw-pt-5 tw-mb-3"},{default:o(()=>[(l(!0),d(C,null,z(r.record.actionLinks,i=>(l(),d("div",{key:i.url,class:"tw-mb-2"},[f("div",H,[i.action==="GET_SUMMARY"?(l(),d("p",K,v(V(a)("recording.summary")),1)):T("",!0),i.action==="GET_TRANSCRIPT"?(l(),d("p",O,v(V(a)("recording.transcript")),1)):T("",!0),t(_,{color:"primary",href:i.url},{default:o(()=>[U(v(V(a)("recording.show")),1)]),_:2},1032,["href"])])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}}),ee={class:"title text-white"},te={class:"tw-text-lg tw-font-semibold"},oe={class:"tw-flex"},se=$({__name:"RecordingModal",props:{modelValue:{default:!1},modelModifiers:{},form:{},formModifiers:{}},emits:["update:modelValue","update:form"],setup(u){const{t:a}=E(),c=R(),s=M(u,"modelValue"),y=M(u,"form"),p=I(!1),w=I(!1);function g(e){return e<10?`0${e}`:e}const r=(e=0)=>Math.floor(e/60/60)>=1?`${g(Math.floor(e/60/60))}:${g(Math.floor(e/60)%60)}:${g(Math.floor(e%60))}`:Math.floor(e/60)>=1?`${g(Math.floor(e/60)%60)}:${g(Math.floor(e%60))}`:`0:${Math.floor(e%60)}`;return c.getClients({limit:300}),(e,n)=>{const i=S("DownloadIcon");return l(),k(b,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=m=>s.value=m),width:"600"},{default:o(()=>[t(B,null,{default:o(()=>[t(A,{class:"pa-4 bg-primary"},{default:o(()=>[f("p",ee,v(V(a)("recording.recordings")),1)]),_:1}),t(N,{class:"!tw-pb-0 !tw-pt-5 tw-mb-3"},{default:o(()=>[(l(!0),d(C,null,z(y.value.recordings,m=>(l(),d("div",{key:m.id,class:"tw-mb-2 tw-flex tw-justify-between tw-items-center"},[f("p",te,v(r(m.durationSeconds)),1),f("div",oe,[t(P,{modelValue:p.value,"onUpdate:modelValue":n[0]||(n[0]=h=>p.value=h),url:m.url},null,8,["modelValue","url"]),t(W,{modelValue:w.value,"onUpdate:modelValue":n[1]||(n[1]=h=>w.value=h),record:m},null,8,["modelValue","record"]),t(_,{href:m.url,size:"small",color:"primary",icon:""},{default:o(()=>[t(i)]),_:2},1032,["href"])])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])}}});export{se as _,Y as u};
