import{_ as A}from"./login-bg-BUNgFWo8.js";import{_ as L}from"./Logo.vue_vue_type_script_setup_true_lang-CxGt7a4z.js";import{d as R,u as S,g as H,h as O,i as M,k as h,H as P,o as f,c as b,a as t,e as s,t as l,b as e,p as y,w as o,aa as z,a9 as G,m as w,an as V,f as _,ao as k,V as C,aN as J,ad as K,F as Q,l as W,r as $,ag as T,ah as X}from"./index-BhGVanJs.js";import{h as Y}from"./moment-zH0z38ay.js";import{u as Z,_ as ee}from"./LanguageDD.vue_vue_type_script_setup_true_lang-Dhv8wHFR.js";import{_ as te}from"./BaseButton.vue_vue_type_style_index_0_lang-CWtmgxPL.js";import{u as se}from"./Rules-CgqIM7pl.js";const ae={class:"tw-align-center px-sm-7 tw-flex tw-justify-end px-4"},le={class:"tw-align-center tw-flex tw-h-full tw-justify-center"},oe={class:"tw-align-center mt-xl-0 px-sm-7 tw-flex tw-w-full tw-flex-col tw-justify-center mt-5 px-4"},ie={class:"text-h3 font-weight-bold mb-2"},ne={class:"text-subtitle-1 mb-6"},re={class:"tw-truncate"},ue={class:"tw-flex tw-items-start"},me={class:"d-flex align-center ml-n2 tw-justify-between my-3 flex-wrap"},de={class:"tw-hidden sm:tw-block"},ce={class:"tw-block sm:tw-hidden"},pe={class:"ml-sm-auto"},fe={key:0,class:"text-error tw-text-base"},he={class:"text-h6 d-flex align-center font-weight-medium mt-6"},_e=R({__name:"LoginForm",setup(U){const{t:a}=S(),u=H(),m=O(),B=Z(),c=M(),{emailRules:N,passwordRules:q}=se(),x=h(!1),g=h(!1),p=h(!1),v=h(!1),n=h({email:"",password:"",remember:!1});P(n,()=>{v.value=!1});const D=()=>{m.push({name:"register"})},E=()=>{m.push({name:"forgot password"})},F=async()=>{g.value=!0;try{await B.loginApi(n.value).then(d=>{c.isAuthenticated=!0,c.user=d,W.Userpilot.identify(d.id,{name:`${d.firstName} ${d.lastName}`,email:d.email,created_at:Y().valueOf()}),d.type==="Client"?m.push({name:"Homepage"}):m.push({name:"Dashboard"})}),g.value=!1}catch{g.value=!1,v.value=!0}};return typeof u.query.email=="string"&&(n.value.email=u.query.email,setTimeout(()=>{m.push({name:"login"})},5e3)),c.getUserDetails().then(()=>{c.isAuthenticated=!0,c.user.type==="Client"?m.push({name:"Homepage"}):c.user.type==="Therapist"&&m.push({name:"Dashboard"})}),(d,i)=>{const I=$("EyeIcon"),j=$("EyeOffIcon");return f(),b(Q,null,[t("div",ae,[s(ee)]),t("div",le,[t("div",oe,[t("h2",ie,l(e(a)("auth.loginTitle")),1),t("div",ne,l(e(a)("auth.loginSubTitle")),1),e(u).query.email?(f(),y(G,{key:0,color:"primary",class:"tw-mb-3 tw-max-h-14 tw-w-full tw-max-w-full",variant:"tonal"},{prepend:o(()=>[s(z,{class:"text-24",icon:"mdi-checkbox-marked-circle-outline"})]),default:o(()=>[t("span",re,l(e(a)("auth.accountCreated"))+" "+l(e(u).query.email),1)]),_:1})):w("",!0),s(K,{modelValue:x.value,"onUpdate:modelValue":i[4]||(i[4]=r=>x.value=r),"lazy-validation":""},{default:o(()=>[s(V,{class:"text-subtitle-1 font-weight-semibold text-lightText pb-2"},{default:o(()=>[_(l(e(a)("email")),1)]),_:1}),s(k,{modelValue:n.value.email,"onUpdate:modelValue":i[0]||(i[0]=r=>n.value.email=r),rules:e(N),type:"email",class:"mb-8","hide-details":"auto",required:""},null,8,["modelValue","rules"]),s(V,{class:"text-subtitle-1 font-weight-semibold text-lightText pb-2"},{default:o(()=>[_(l(e(a)("auth.password")),1)]),_:1}),t("div",ue,[s(k,{modelValue:n.value.password,"onUpdate:modelValue":i[1]||(i[1]=r=>n.value.password=r),rules:e(q),type:p.value?"text":"password",class:"tw-mr-3",color:"primary",variant:"outlined",autocomplete:"current-password",required:""},null,8,["modelValue","rules","type"]),s(C,{onClick:i[2]||(i[2]=r=>p.value=!p.value),color:p.value?"info":"default",variant:"tonal",icon:""},{default:o(()=>[p.value?(f(),y(I,{key:0})):w("",!0),p.value?w("",!0):(f(),y(j,{key:1}))]),_:1},8,["color"])]),t("div",me,[s(J,{modelValue:n.value.remember,"onUpdate:modelValue":i[3]||(i[3]=r=>n.value.remember=r),"hide-details":"",color:"primary"},{label:o(()=>[t("p",de,l(e(a)("auth.rememberDevice")),1),t("p",ce,l(e(a)("auth.remember")),1)]),_:1},8,["modelValue"]),t("div",pe,[t("button",{onClick:E,type:"button",class:"text-primary text-decoration-none text-body-1 opacity-1 font-weight-medium"},l(e(a)("auth.forgotpassword")),1)])]),s(te,{loading:g.value,disabled:!x.value,onClick:F,class:"tw-mb-1 tw-mt-2"},{default:o(()=>[_(l(e(a)("auth.registerLoginBtn")),1)]),_:1},8,["loading","disabled"]),v.value?(f(),b("p",fe,l(e(a)("auth.errorMessageLogin")),1)):w("",!0)]),_:1},8,["modelValue"]),t("h6",he,[_(l(e(a)("auth.loginRegisterTitle"))+" ",1),s(C,{class:"text-primary text-body-1 opacity-1 font-weight-medium pl-2",height:"auto",onClick:D,variant:"plain"},{default:o(()=>[_(l(e(a)("auth.loginRegisterBtn")),1)]),_:1})])])])],64)}}}),ge={class:"pa-3"},we={class:"auth-header pt-lg-6 px-sm-6 pb-lg-6 px-3 py-2"},xe={class:"auth__block"},Te=R({__name:"Login",setup(U){return(a,u)=>(f(),b("div",ge,[s(X,{class:"h-100vh mh-100 auth"},{default:o(()=>[s(T,{cols:"12",lg:"7",xl:"8",class:"d-lg-flex align-center authentication position-relative justify-center"},{default:o(()=>[t("div",we,[s(L)]),u[0]||(u[0]=t("img",{src:A,class:"position-relative d-none d-lg-flex",alt:"login-background"},null,-1))]),_:1}),s(T,{cols:"12",lg:"5",xl:"4"},{default:o(()=>[t("div",xe,[s(_e)])]),_:1})]),_:1})]))}});export{Te as default};
