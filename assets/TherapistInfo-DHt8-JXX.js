import{_ as X}from"./lodash-DkenaKcH.js";import{_ as Y}from"./BaseCard.vue_vue_type_script_setup_true_lang-DgdVNY0D.js";import{_ as tt}from"./BaseLoader.vue_vue_type_script_setup_true_lang-BxgJmsTp.js";import{_ as et}from"./DeleteModal.vue_vue_type_script_setup_true_lang-C78xVUAY.js";import{_ as at}from"./AppBaseCard.vue_vue_type_style_index_0_lang-DBBmmR1w.js";import{aq as st,ar as C,d as N,aC as j,u as U,ao as H,o as f,c as x,a as t,t as s,b as l,e,at as lt,m as V,an as Q,F as D,B as it,p as J,w as n,s as ot,f as b,I as nt,V as I,D as R,a9 as rt,r as G,i as dt,k as g,af as ct,aE as ut,ak as pt,ad as mt,aF as wt,J as ht,al as ft,H as K}from"./index-D2tFxEgP.js";import{U as W}from"./user-1-B0DTw7e0.js";import{_ as vt}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-CuVbhYNy.js";import{u as _t}from"./Rules-BG1yOtK0.js";const S=st({id:"TherapistInfo",state:()=>({therapistsList:[],therapistsTotal:0}),actions:{async getTherapists(u={}){const{data:r}=await C.get("/api/client/therapists",{params:u});return this.therapistsList=r.list,this.therapistsTotal=r.total,r},async addTherapist(u){const{data:r}=await C.post(`/api/client/attach?therapistCode=${u}`);return r},async deactivationTherapist(u){const{data:r}=await C.post(`/api/client/detach/${u}`);return r},async reactivationTherapist(u){const{data:r}=await C.post(`/api/client/reattach/${u}`);return r}}}),xt={class:"tw-px-4 tw-pt-4 xl:tw-pl-0 xl:tw-pr-6 xl:tw-pt-0"},gt={class:"text-h6 tw-mb-2 tw-text-center"},Tt={key:0,class:"note-pagination"},yt={class:"tw-text-sm"},kt={class:"tw-flex tw-items-center"},Vt=["src"],bt={class:"tw-truncate tw-text-base tw-font-semibold"},$t={class:"tw-flex tw-font-semibold"},O=N({__name:"TherapistList",props:j({perPage:{required:!0,type:Number}},{page:{required:!0},pageModifiers:{},nameFilter:{},nameFilterModifiers:{}}),emits:j(["show-therapist","delete-therapist"],["update:page","update:nameFilter"]),setup(u,{emit:r}){const{t:i}=U(),d=S(),c=H(u,"page"),T=H(u,"nameFilter"),y=r;return(o,v)=>{const _=G("TrashIcon"),k=G("NotesIcon");return f(),x("div",xt,[t("h4",gt,s(l(i)("profile.therapists")),1),l(d).therapistsTotal>u.perPage?(f(),x("div",Tt,[e(lt,{modelValue:c.value,"onUpdate:modelValue":v[0]||(v[0]=p=>c.value=p),length:Math.ceil(l(d).therapistsTotal/u.perPage),"total-visible":1,class:"tw-w-full",color:"primary",rounded:"circle",size:"small"},null,8,["modelValue","length"]),t("p",yt,s(l(i)("notes.total"))+" "+s(l(d).therapistsTotal),1)])):V("",!0),e(Q,{modelValue:T.value,"onUpdate:modelValue":v[1]||(v[1]=p=>T.value=p),label:"Name",class:"tw-mb-2",density:"compact",variant:"outlined","append-inner-icon":"mdi-magnify","hide-details":""},null,8,["modelValue"]),(f(!0),x(D,null,it(l(d).therapistsList,p=>(f(),J(R,{onClick:$=>y("show-therapist",p),key:p.user.id,class:"note-sheet bg-lightprimary tw-mb-4 tw-cursor-pointer !tw-rounded-md tw-px-3 tw-py-6"},{default:n(()=>[t("div",null,[t("div",kt,[t("img",{src:p.user.avatar||l(W),alt:"avatar",class:"tw-mr-2 tw-h-14 tw-w-14 tw-rounded-full"},null,8,Vt),t("p",bt,s(p.user.firstName)+" "+s(p.user.lastName),1),e(I,{onClick:nt($=>y("delete-therapist",p.user.id),["stop"]),size:"x-small",class:"ml-auto",variant:"text",icon:""},{default:n(()=>[e(ot,{activator:"parent",location:"top"},{default:n(()=>[b(s(l(i)("therapistInfo.deactivationTherapist")),1)]),_:1}),e(_,{size:"18"})]),_:2},1032,["onClick"])])])]),_:2},1032,["onClick"]))),128)),l(d).therapistsTotal?V("",!0):(f(),J(R,{key:1},{default:n(()=>[e(rt,{class:"bg-lightsecondary"},{default:n(()=>[t("p",$t,[e(k,{class:"tw-mr-2"}),b(" "+s(l(i)("therapistInfo.emptyTherapist")),1)])]),_:1})]),_:1}))])}}}),Ct={class:"title text-white"},It={class:"tw-mb-1"},Ft=N({__name:"NewTherapistModal",emits:["update"],setup(u,{emit:r}){const{t:i}=U(),d=S(),c=dt(),{emptyRules:T}=_t(),y=r,o=g(""),v=g(!1),_=g(!1),k=g(!1),p=async()=>{k.value=!0;try{await d.addTherapist(o.value),await y("update"),c.createNotification({title:i("notification.materialCreate"),color:"success"}),o.value="",_.value=!1}catch{c.createNotification({title:i("notification.errorNotification"),color:"error"})}k.value=!1};return($,m)=>(f(),x(D,null,[e(I,{onClick:m[0]||(m[0]=a=>_.value=!0),color:"primary"},{default:n(()=>[b(s(l(i)("client.newTherapist")),1)]),_:1}),e(ft,{modelValue:_.value,"onUpdate:modelValue":m[4]||(m[4]=a=>_.value=a),width:"800"},{default:n(()=>[e(ct,null,{default:n(()=>[e(ut,{class:"pa-4 bg-primary"},{default:n(()=>[t("p",Ct,s(l(i)("client.newTherapist")),1)]),_:1}),e(pt,null,{default:n(()=>[e(mt,{modelValue:v.value,"onUpdate:modelValue":m[2]||(m[2]=a=>v.value=a),"lazy-validation":""},{default:n(()=>[t("p",It,s(l(i)("client.code")),1),e(Q,{modelValue:o.value,"onUpdate:modelValue":m[1]||(m[1]=a=>o.value=a),rules:l(T),class:"tw-mb-1",required:""},null,8,["modelValue","rules"])]),_:1},8,["modelValue"])]),_:1}),e(wt,null,{default:n(()=>[e(ht),e(I,{onClick:m[3]||(m[3]=a=>_.value=!1),color:"error"},{default:n(()=>[b(s(l(i)("close")),1)]),_:1}),e(I,{onClick:p,loading:k.value,disabled:!v.value,variant:"flat",color:"primary"},{default:n(()=>[b(s(l(i)("add")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Nt={class:"tw-pl-0 lg:tw-pl-10"},Ut={class:"tw-mb-3 tw-flex tw-justify-end"},Dt={key:0,class:"tw-flex tw-flex-col tw-items-center tw-justify-center tw-pt-6 md:tw-flex-row"},St={class:"tw-mb-6 tw-mr-0 tw-h-60 tw-w-60 tw-rounded-full tw-bg-slate-300 md:tw-mr-10"},Zt=["src"],Lt={class:"tw-text-center tw-text-3xl tw-font-semibold"},Bt={class:"tw-mb-5 tw-text-center tw-text-sm tw-text-gray-500 md:tw-text-left"},Mt={key:0,class:"tw-mb-5"},qt={class:"tw-mb-1 tw-text-center tw-text-xl tw-font-medium md:tw-text-left"},At={class:"tw-text-center tw-text-base md:tw-text-left"},Pt={key:1,class:"tw-mb-5"},zt={class:"tw-mb-1 tw-text-center tw-text-xl tw-font-medium md:tw-text-left"},Et={class:"tw-text-center tw-text-base md:tw-text-left"},jt={key:2,class:"tw-mb-5"},Ht={class:"tw-mb-1 tw-text-center tw-text-xl tw-font-medium md:tw-text-left"},Jt={class:"tw-text-center tw-text-base md:tw-text-left"},Rt={key:1},Gt={class:"bg-lightsecondary tw-flex tw-flex-col tw-items-center tw-justify-center tw-rounded-lg tw-p-8"},Kt={class:"tw-mt-6 tw-text-2xl tw-font-semibold"},F=10,le=N({__name:"TherapistInfo",setup(u){const{t:r}=U(),i=S(),d=g(1),c=g(""),T=g(!1),y=g(!1),o=g(),v=g(0),_=a=>{T.value=!0,v.value=a},k=a=>{o.value=a},p=async()=>{y.value=!0,await i.deactivationTherapist(v.value),await m(),y.value=!1},$=X.debounce(async()=>{const a={};c.value&&(a.name=c.value),d.value=1,await i.getTherapists(a)},700),m=async()=>{let a={};c.value&&(a.name=c.value),d.value>1&&(a={...a,offset:F*(d.value-1)}),await i.getTherapists(a)};return K(d,m,{immediate:!0}),K(c,$),i.getTherapists({state:["ACTIVE","INACTIVE"]}).then(()=>{if(i.therapistsList.length>0){const[a]=i.therapistsList;o.value=a}}),(a,w)=>(f(),x(D,null,[e(vt,{title:"sidebar.therapist"}),e(tt,null,{default:n(()=>[e(Y,null,{default:n(()=>[e(at,null,{leftpart:n(()=>[e(O,{onShowTherapist:k,onDeleteTherapist:_,page:d.value,"onUpdate:page":w[0]||(w[0]=h=>d.value=h),nameFilter:c.value,"onUpdate:nameFilter":w[1]||(w[1]=h=>c.value=h),perPage:F},null,8,["page","nameFilter"])]),rightpart:n(()=>{var h,Z,L,B,M,q,A,P,z,E;return[t("div",Nt,[t("div",Ut,[e(Ft,{onUpdate:m})]),o.value?(f(),x("div",Dt,[t("div",St,[t("img",{src:((h=o.value)==null?void 0:h.user.avatar)||l(W),alt:"Avatar",class:"tw-h-60 tw-w-60 tw-rounded-full tw-shadow-lg"},null,8,Zt)]),t("div",null,[t("div",null,[t("p",Lt,s((Z=o.value)==null?void 0:Z.user.firstName)+" "+s((L=o.value)==null?void 0:L.user.lastName),1),t("p",Bt,s((B=o.value)==null?void 0:B.user.email),1)]),(M=o.value)!=null&&M.education?(f(),x("div",Mt,[t("p",qt,s(l(r)("profile.education")),1),t("p",At,s((q=o.value)==null?void 0:q.education),1)])):V("",!0),(A=o.value)!=null&&A.experience?(f(),x("div",Pt,[t("p",zt,s(l(r)("profile.experience")),1),t("p",Et,s((P=o.value)==null?void 0:P.experience),1)])):V("",!0),(z=o.value)!=null&&z.approach?(f(),x("div",jt,[t("p",Ht,s(l(r)("profile.approach")),1),t("p",Jt,s((E=o.value)==null?void 0:E.approach),1)])):V("",!0)])])):(f(),x("div",Rt,[t("div",Gt,[w[5]||(w[5]=t("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"377",height:"350",viewBox:"0 0 719.6203 667.52372"},[t("line",{x1:"200.19444",y1:"666.77372",x2:"719.6203",y2:"666.77372",fill:"#fff",stroke:"#090814","stroke-miterlimit":"10","stroke-width":"1.5"}),t("rect",{x:"414.0551",y:"611.43256",width:"24.6171",height:"32.44584",fill:"#ed9da0","stroke-width":"0"}),t("path",{d:"m434.47051,666.271h-52.32741c-4.47249,0-8.96708-1.02415-12.99795-2.96178l-9.64677-4.63713c-1.99459-.95877-3.28341-3.0083-3.28341-5.22133,0-2.59535,1.74695-4.89137,4.2483-5.58355l19.90176-5.50697,34.04701-17.89598.02546.12894c.63675,3.22473,1.62328,8.09648,1.74877,8.39198,3.49151,3.9998,7.07827,5.84296,10.66072,5.47978,6.24863-.6335,10.40265-7.84903,10.44391-7.92188l.03159-.05571.06375.00651c1.46323.15143,2.54557.74157,3.21707,1.75404,1.42542,2.14937.55587,5.45949.41276,5.95878,1.70713,1.67028,2.47321,10.99786,2.53246,11.75072,2.46832,2.61631,3.64132,5.13154,3.48586,7.47581-.13583,2.04953-1.27245,3.9529-3.37808,5.65745-2.53332,2.05087-5.79558,3.18032-9.18581,3.18032Z",fill:"#090814","stroke-width":"0"}),t("rect",{x:"581.43538",y:"599.42725",width:"24.6171",height:"32.44584",transform:"translate(-148.33547 190.35597) rotate(-16.22019)",fill:"#ed9da0","stroke-width":"0"}),t("path",{d:"m612.31456,650.46413l-50.24453,14.61659c-4.29446,1.2493-8.89623,1.52139-13.30788.78682l-10.55807-1.75792c-2.18301-.36345-3.99302-1.9714-4.61119-4.09634-.72496-2.49204.31111-5.18465,2.51955-6.54797l17.57132-10.84692,27.6929-26.69397.06047.11669c1.51217,2.91851,3.82025,7.32077,4.02329,7.56945,4.4698,2.86531,8.42863,3.63321,11.76704,2.28381,5.82296-2.35371,7.79611-10.44237,7.81537-10.52384l.01477-.06232.06303-.01156c1.44729-.26332,2.65139.001,3.57897.78559,1.96906,1.66566,2.05874,5.08691,2.06079,5.6063,2.10574,1.12694,5.44679,9.86925,5.71398,10.5756,3.10089,1.8227,4.92977,3.91015,5.43533,6.20453.44207,2.0059-.11764,4.15099-1.66332,6.37585-1.85961,2.67687-4.67653,4.6726-7.93182,5.61959Z",fill:"#090814","stroke-width":"0"}),t("path",{d:"m550.9741,277.89681h-117.98147s-51.00115,161.60394-48.55126,336.77097h87.87842l5.21735-203.34075,15.26466,211.23359,115.80438-6.6679-57.63207-337.99592Z",fill:"#090814","stroke-width":"0"}),t("polygon",{points:"530.62719 222.66905 554.79585 278.22681 436.63772 278.50368 457.13054 226.34388 530.62719 222.66905",fill:"#ed9da0","stroke-width":"0"}),t("path",{d:"m516.37037,46.46064c0-22.10268-17.9178-40.02048-40.02063-40.02048s-40.02063,17.9178-40.02063,40.02048c0,17.92528,11.7859,33.09607,28.03047,38.19114l7.73665,51.13006,39.44075-32.86714s-8.52048-10.85269-13.0898-23.09002c10.79961-7.16709,17.92318-19.43134,17.92318-33.36403Z",fill:"#ed9da0","stroke-width":"0"}),t("path",{d:"m515.29204,85.96732l-47.137,30.13158-21.75709,38.42306c-6.29972,11.12532-8.42738,24.13193-6.00098,36.6847l9.99637,51.7153h104.22585l-16.46832-107.89439c-2.10192-13.77098-7.34715-26.87287-15.32902-38.28986l-7.52982-10.77039Z",fill:"#006e2a","stroke-width":"0"}),t("path",{d:"m478.03856,108.69313l29.52876-13.93953c14.78079-2.76482,28.70971,7.85855,29.95246,22.84426l53.41192,359.68238,18.17589,38.29934-110.24498,60.83007-50.22271-348.89694-3.67483-53.89755,33.0735-64.92205Z",fill:"#090814","stroke-width":"0"}),t("path",{d:"m557.10781,371.39486l-7.01356-38.15408-22.27689,4.09498,7.01356,38.15408c-3.34519,4.69496-4.84512,11.22699-3.59567,18.02409,2.18622,11.89316,11.93741,20.06763,21.78,18.25834,9.84259-1.80928,16.04925-12.91716,13.86303-24.81032-1.24946-6.7971-4.97448-12.36867-9.77047-15.5671Z",fill:"#ed9da0","stroke-width":"0"}),t("polyline",{points:"487.26271 187.6006 525.25229 371.71268 563.76808 363.76536 537.48221 178.85866",fill:"#090814","stroke-width":"0"}),t("path",{d:"m529.2199,99.04319s-1.86883,14.17874-19.1834,14.64177q-35.12269.93925-35.12269.93925s29.69078-72.25625,17.48235-64.11606c-12.20843,8.14019-44.76423-25.98599-44.76423-25.98599l-9.60611,18.01617s-22.9497-8.31056,2.48453-28.66103c0,0,30.34669-23.46169,62.56338-9.3729,32.21668,14.08879,26.14618,94.53879,26.14618,94.53879Z",fill:"#090814","stroke-width":"0"}),t("path",{d:"m246.01352,262.57776H15.09017c-8.3209,0-15.09017-6.76927-15.09017-15.09017v-49.54296c0-8.3209,6.76927-15.09017,15.09017-15.09017h230.92335c8.3209,0,15.09017,6.76927,15.09017,15.09017v49.54296c0,8.3209-6.76927,15.09017-15.09017,15.09017Z",fill:"#006e2a","stroke-width":"0"}),t("polyline",{points:"351.35011 209.84197 325.60183 235.59025 299.85355 209.84197",fill:"none",stroke:"#090814","stroke-miterlimit":"10","stroke-width":"3"})],-1)),t("h2",Kt,s(l(r)("therapistInfo.noSelectTherapist")),1)])]))])]}),mobileLeftContent:n(()=>[e(O,{onShowTherapist:k,onDeleteTherapist:_,page:d.value,"onUpdate:page":w[2]||(w[2]=h=>d.value=h),nameFilter:c.value,"onUpdate:nameFilter":w[3]||(w[3]=h=>c.value=h),perPage:F},null,8,["page","nameFilter"])]),_:1})]),_:1})]),_:1}),e(et,{onDelete:p,modelValue:T.value,"onUpdate:modelValue":w[4]||(w[4]=h=>T.value=h),loading:y.value,title:"Deactivation Therapist",question:"Are you sure you want to deactivation Therapist?"},null,8,["modelValue","loading"])],64))}});export{le as default};
