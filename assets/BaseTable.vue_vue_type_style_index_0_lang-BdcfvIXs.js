import{d as R,o as s,p as c,w as p,aO as j,a6 as H,aC as W,g as _,ao as x,k as q,n as z,H as L,c as T,ag as B,V as K,m as w,e as f,at as Q,ah as C,af as Y,F as M,B as O,ae as D,an as F,a as G,Y as I,aQ as J,aR as X,r as $}from"./index-rKzDa4TW.js";import{h as E}from"./moment-zH0z38ay.js";import{_ as Z,l as N}from"./lodash-CyvJ_RrL.js";import{_ as S}from"./BaseLoader.vue_vue_type_script_setup_true_lang-DEUrq8Kn.js";const v="0px",ee=R({__name:"TransitionHeight",props:{duration:{default:250},easingEnter:{default:"ease-in-out"},easingLeave:{default:"ease-in-out"},opacityClosed:{default:0},opacityOpened:{default:1}},setup(d){const h=d;function k(e){return{height:e.style.height,width:e.style.width,position:e.style.position,visibility:e.style.visibility,overflow:e.style.overflow,paddingTop:e.style.paddingTop,paddingBottom:e.style.paddingBottom,borderTopWidth:e.style.borderTopWidth,borderBottomWidth:e.style.borderBottomWidth,marginTop:e.style.marginTop,marginBottom:e.style.marginBottom}}function V(e,o){const{width:i}=getComputedStyle(e);e.style.width=i,e.style.position="absolute",e.style.visibility="hidden",e.style.height="";const{height:u}=getComputedStyle(e);return e.style.width=o.width,e.style.position=o.position,e.style.visibility=o.visibility,e.style.height=v,e.style.overflow="hidden",o.height&&o.height!==v?o.height:u}function m(e,o,i,u,g){const y=e.animate(u,g);e.style.height=o.height,y.onfinish=()=>{e.style.overflow=o.overflow,i()}}function n(e,o){return[{height:v,opacity:h.opacityClosed,paddingTop:v,paddingBottom:v,borderTopWidth:v,borderBottomWidth:v,marginTop:v,marginBottom:v},{height:e,opacity:h.opacityOpened,paddingTop:o.paddingTop,paddingBottom:o.paddingBottom,borderTopWidth:o.borderTopWidth,borderBottomWidth:o.borderBottomWidth,marginTop:o.marginTop,marginBottom:o.marginBottom}]}function U(e,o){const i=e,u=k(i),g=V(i,u),y=n(g,u),l={duration:h.duration,easing:h.easingEnter};m(i,u,o,y,l)}function b(e,o){const i=e,u=k(i),{height:g}=getComputedStyle(i);i.style.height=g,i.style.overflow="hidden";const y=n(g,u).reverse(),l={duration:h.duration,easing:h.easingLeave};m(i,u,o,y,l)}return(e,o)=>(s(),c(H,{css:!1,onEnter:U,onLeave:b},{default:p(()=>[j(e.$slots,"default")]),_:3}))}}),ae={key:0,class:"tw-mb-3",data:""},te={class:"tw-block md:tw-hidden"},ie=R({__name:"BaseTable",props:W({total:{type:Number,required:!0,default:0},items:{type:Object,required:!0,default(){return[]}},perPage:{type:Number,required:!0,default:0},headers:{type:Object,required:!0,default(){return[]}}},{page:{required:!0},pageModifiers:{},filters:{required:!0},filtersModifiers:{}}),emits:W(["update","created","click-row"],["update:page","update:filters"]),setup(d,{expose:h,emit:k}){const V=_(),m=x(d,"page"),n=x(d,"filters"),U=d,b=k,e=q(!1),o=q(!1),i=z(()=>n.value.map(l=>l.value)),u=Z.debounce(async()=>{e.value=!0;const l={};n.value.forEach(t=>{t.key==="time"&&t.value?N.isArray(t.value)&&([l.dateFrom,l.dateTo]=[E(t.value[0]).valueOf(),E(t.value[1]).valueOf()]):t.value&&(l[t.key]=t.value)}),m.value=1,await b("update",l),e.value=!1},700);L(m,async()=>{e.value=!0;const l={};n.value.forEach(t=>{t.key==="time"&&t.value?N.isArray(t.value)&&([l.dateFrom,l.dateTo]=[E(t.value[0]).valueOf(),E(t.value[1]).valueOf()]):t.value&&(l[t.key]=t.value)}),m.value>1&&(l.offset=U.perPage*(m.value-1)),await b("update",l),e.value=!1}),L(i,u);const y=Object.keys(V.query);return n.value=n.value.map(l=>{if(y.includes(l.key)){const t=V.query[l.key];return{...l,value:t}}return l}),b("created",u),h({filter:u}),(l,t)=>{const P=$("VueEasyDatePicker"),A=$("EasyDataTable");return s(),T("div",null,[n.value.length||d.total>d.perPage?(s(),c(C,{key:0,class:"!tw-mb-1","data-test":"filters"},{default:p(()=>[n.value.length||d.total>d.perPage?(s(),c(B,{key:0,cols:"12",lg:"6"},{default:p(()=>[n.value.length?(s(),c(K,{key:0,onClick:t[0]||(t[0]=a=>o.value=!o.value),icon:"mdi-filter",color:"primary",variant:"outlined","data-test":"filter-btn"})):w("",!0)]),_:1})):w("",!0),d.total>d.perPage?(s(),c(B,{key:1,cols:"12",lg:"6"},{default:p(()=>[f(Q,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=a=>m.value=a),length:Math.ceil(d.total/d.perPage),color:"primary",class:"tw-w-full",rounded:"circle","data-test":"pagination"},null,8,["modelValue","length"])]),_:1})):w("",!0)]),_:1})):w("",!0),f(ee,{duration:400},{default:p(()=>[o.value?(s(),T("div",ae,[f(Y,{class:"tw-relative !tw-z-40 !tw-hidden !tw-overflow-visible !tw-p-3 md:!tw-block",elevation:"10"},{default:p(()=>[f(C,{class:"!tw-pb-3 !tw-pr-3"},{default:p(()=>[(s(!0),T(M,null,O(n.value,a=>(s(),c(B,{key:a.key,md:"6",lg:"4",cols:"12",class:"!tw-pb-0 !tw-pr-0"},{default:p(()=>[a.key==="time"?(s(),c(P,{key:0,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,"max-date":new Date,class:"tw-w-full",range:"","time-picker-inline":""},null,8,["modelValue","onUpdate:modelValue","max-date"])):a.options?(s(),c(D,{key:1,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,items:a.options,label:a.label,color:"primary",variant:"outlined",chips:"",multiple:"",clearable:"","hide-details":"","closable-chips":""},null,8,["modelValue","onUpdate:modelValue","items","label"])):(s(),c(F,{key:2,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,label:a.label,class:"filter-input tw-h-full","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]))]),_:2},1024))),128))]),_:1})]),_:1}),G("div",te,[f(C,{class:"!tw-pb-3 !tw-pr-3"},{default:p(()=>[(s(!0),T(M,null,O(n.value,a=>(s(),c(B,{key:a.key,cols:"12",lg:"4",md:"6","data-test":"filter",class:"!tw-pb-0 !tw-pr-0"},{default:p(()=>[a.key==="time"?(s(),c(P,{key:0,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,"max-date":new Date,class:"tw-w-full",range:"","time-picker-inline":""},null,8,["modelValue","onUpdate:modelValue","max-date"])):a.options?(s(),c(D,{key:1,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,items:a.options,label:a.label,color:"primary",variant:"outlined",chips:"",multiple:"",clearable:"","hide-details":"","closable-chips":""},null,8,["modelValue","onUpdate:modelValue","items","label"])):(s(),c(F,{key:2,modelValue:a.value,"onUpdate:modelValue":r=>a.value=r,label:a.label,class:"filter-input tw-h-full","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]))]),_:2},1024))),128))]),_:1})])])):w("",!0)]),_:1}),f(S,{isUpdate:e.value},{default:p(()=>[f(A,{onClickRow:t[2]||(t[2]=a=>b("click-row",a)),items:d.items,headers:d.headers,class:"base-table","table-class-name":"customize-table","hide-footer":""},I({_:2},[O(Object.keys(l.$slots),a=>({name:a,fn:p(r=>[j(l.$slots,a,J(X(r)))])}))]),1032,["items","headers"])]),_:3},8,["isUpdate"])])}}});export{ie as _};
