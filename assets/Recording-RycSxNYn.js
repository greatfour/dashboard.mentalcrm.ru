import{d as y,u as $,g as C,k as l,n as R,o as A,c as B,e as a,w as o,b as s,f as x,t as i,a as I,s as M,V as h,q as H,F as S,r as T}from"./index-rKzDa4TW.js";import{h as g}from"./moment-zH0z38ay.js";import{_ as q}from"./BaseTable.vue_vue_type_style_index_0_lang-BdcfvIXs.js";import{_ as D}from"./BaseLoader.vue_vue_type_script_setup_true_lang-DEUrq8Kn.js";import{u as F,_ as P}from"./RecordingModal.vue_vue_type_script_setup_true_lang-CT8m8Dhj.js";import{_ as z}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-C_OQyfJV.js";import"./lodash-CyvJ_RrL.js";import"./Client-V112gc0S.js";const E={class:"tw-max-w-60 tw-truncate"},j=10,Z=y({__name:"Recording",setup(G){const{t:r}=$(),V=C(),u=F(),v=l(1),c=l(!0),m=l(!1),p=l(),_=l([{label:"Time",key:"time",value:null}]),w=R(()=>[{text:r("recording.client"),value:"clientName",sortable:!0},{text:r("recording.time"),value:"startsAt",sortable:!0},{text:r("recording.recordings"),value:"recordings",sortable:!0},{text:r("recording.actions"),value:"actions",sortable:!0,width:200}]),b=async n=>{c.value=!0,await u.getRecordsById(Number(V.query.id),{...n}),c.value=!1},k=async n=>{await n(),c.value=!1},N=async n=>{m.value=!0,p.value=n};return(n,t)=>{const U=T("VideoIcon");return A(),B(S,null,[a(z,{title:"sidebar.recording"}),a(D,{isUpdate:c.value},{default:o(()=>[a(q,{onUpdate:b,onCreated:k,page:v.value,"onUpdate:page":t[0]||(t[0]=e=>v.value=e),filters:_.value,"onUpdate:filters":t[1]||(t[1]=e=>_.value=e),total:s(u).total,items:s(u).list,perPage:j,headers:w.value,ref:"table"},{"item-startsAt":o(e=>[x(i(s(g)(e.startsAt).format("HH:mm"))+" - "+i(s(g)(e.startsAt).add(e.durationInMinutes,"minutes").format("HH:mm"))+i(s(g)(e.startsAt).format(" D MMMM")),1)]),"item-recordings":o(e=>[x(i(e.recordings.length?e.recordings.length:"-"),1)]),"item-firstName":o(e=>{var d,f;return[I("p",E,i(e.opponent?`${(d=e==null?void 0:e.opponent)==null?void 0:d.firstName} ${(f=e==null?void 0:e.opponent)==null?void 0:f.lastName}`:s(r)("sessions.freeSpace")),1)]}),"item-actions":o(e=>[a(M,{text:s(r)("recording.recordings")},{activator:o(({props:d})=>[a(h,H({onClick:f=>N(e)},d,{class:"tw-mr-3",color:"info",variant:"tonal",icon:""}),{default:o(()=>[a(U,{class:"text-info",size:"20","stroke-width":"1.5"})]),_:2},1040,["onClick"])]),_:2},1032,["text"])]),_:1},8,["page","filters","total","items","headers"])]),_:1},8,["isUpdate"]),a(P,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=e=>m.value=e),form:p.value,"onUpdate:form":t[3]||(t[3]=e=>p.value=e)},null,8,["modelValue","form"])],64)}}});export{Z as default};
