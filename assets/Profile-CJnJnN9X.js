import{m as H}from"./index-C-bZKCHr.js";import{d as A,u as R,i as E,k as y,n as ne,o as _,c as F,e,w as a,ac as G,ad as M,a as s,t as r,b as l,ae as ue,f as p,V as h,af as q,p as k,ag as b,y as de,ah as Y,_ as Z,ai as ce,aj as me,ak as pe,m as $,I as C,s as L,q as X,al as fe,r as P,am as U,an as T,ao as we,ap as ve,H as _e,F as ge}from"./index-rKzDa4TW.js";import{U as he}from"./user-1-B0DTw7e0.js";import{u as K}from"./Rules-DZKrv_I-.js";import"./moment-zH0z38ay.js";const ye={class:"text-h5 tw-mb-2"},xe={class:"tw-mb-3 tw-pl-1 tw-text-sm"},be={class:"tw-font-semibold"},Ve={class:"tw-flex tw-justify-end"},Q=A({__name:"TimezoneForm",setup(N){const{t:n}=R(),t=E(),c=H.tz.names().map(i=>({name:i,timezone:H.tz(i).format("Z")})),f=y(!1),V=y(!1),v=y({email:t.user.email,firstName:t.user.firstName,lastName:t.user.lastName,darkTheme:t.user.darkTheme,language:t.user.language,phone:t.user.phone,birthday:t.user.birthday,education:t.user.education,experience:t.user.experience,approach:t.user.approach,avatar:t.user.avatar,zoneId:t.user.zoneId}),o=ne(()=>c.map(i=>({title:`${i.name} (${i.timezone})`,props:{value:i.name}}))),w=async()=>{V.value=!0;try{const i=await t.changeUserDetails(v.value);v.value={email:i.data.email,firstName:i.data.firstName,lastName:i.data.lastName,darkTheme:i.data.darkTheme,language:i.data.language,phone:i.data.phone,birthday:i.data.birthday,education:t.user.education,experience:t.user.experience,approach:t.user.approach,avatar:t.user.avatar,zoneId:t.user.zoneId},t.createNotification({title:n("notification.profileDetailschange"),color:"success"})}catch{t.createNotification({title:n("notification.errorNotification"),color:"error"})}V.value=!1};return(i,d)=>(_(),F("div",null,[e(q,{elevation:"10"},{default:a(()=>[e(G,{class:"!tw-p-4 md:!tw-p-6"},{default:a(()=>[e(M,{modelValue:f.value,"onUpdate:modelValue":d[1]||(d[1]=D=>f.value=D),"lazy-validation":""},{default:a(()=>[s("h5",ye,r(l(n)("profile.timezone")),1),e(ue,{modelValue:v.value.zoneId,"onUpdate:modelValue":d[0]||(d[0]=D=>v.value.zoneId=D),items:o.value,color:"primary",type:"text",variant:"outlined","hide-details":""},null,8,["modelValue","items"]),s("p",xe,[p(r(l(n)("profile.alertGeoTimezone"))+" ",1),s("span",be,r(l(H).tz.guess()),1)]),s("div",Ve,[e(h,{onClick:w,loading:V.value,color:"primary"},{default:a(()=>[p(r(l(n)("save")),1)]),_:1},8,["loading"])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}}),Ne="/assets/profile-background-IVVetBJN.jpg",ke=["src"],Ie={class:"tw-mb-3"},ze={class:"top-spacer text-center"},Ue={class:"avatar-border"},$e=["src"],Ce={class:"tw-mt-3 tw-max-w-56 tw-truncate tw-text-xl tw-font-semibold"},Pe=A({__name:"HeaderProfile",setup(N){const{t:n}=R(),t=E();return(c,f)=>(_(),k(q,{elevation:"10",class:"overflow-hidden"},{default:a(()=>[s("img",{src:l(Ne),alt:"profile",class:"w-100 tw-h-28 tw-object-cover md:tw-h-40"},null,8,ke),s("div",Ie,[e(Y,{class:"mt-1"},{default:a(()=>[e(b,{cols:"12",lg:"4",sm:"12",class:"order-sm-second"}),e(b,{cols:"12",lg:"4",sm:"12",class:"d-flex order-sml-first justify-center"},{default:a(()=>[s("div",ze,[s("div",Ue,[e(de,{size:"100",class:"userImage"},{default:a(()=>[s("img",{src:l(t).user.avatar||l(he),width:"100",alt:"Avatar"},null,8,$e)]),_:1})]),s("h5",Ce,r(l(t).user.firstName)+" "+r(l(t).user.lastName),1),s("span",null,r(l(t).user.type==="Therapist"?l(n)("profile.therapist"):l(n)("profile.client")),1)])]),_:1})]),_:1})])]),_:1}))}}),Te={class:"text-h5"},De={class:"text-subtitle-1 text-medium-emphasis mt-2"},je={class:"image-uploader__block tw-flex tw-h-full tw-flex-col tw-items-center"},Be={class:"input__wrapper"},qe={class:"avatar-block"},Ae=["src"],Re={class:"tw-text-5xl"},Ee={class:"text-subtitle-1 text-medium-emphasis tw-mb-5 text-center"},Se={title:"Edit your picture"},Fe={class:"text-h5 tw-mb-4 tw-pt-4"},Le={class:"tw-mb-2 tw-text-base md:tw-text-center"},Xe={class:"tw-flex tw-items-center md:tw-justify-center"},Ye={class:"tw-mb-2 tw-text-base md:tw-text-center"},Me={class:"tw-flex tw-items-center md:tw-justify-center"},Oe={class:"tw-mb-2 tw-text-base md:tw-text-center"},He={class:"tw-flex tw-items-center md:tw-justify-center"},Ze={class:"tw-mb-2 tw-text-base md:tw-text-center"},Ge={class:"tw-flex tw-items-center md:tw-justify-center"},Je={class:"tw-mb-2 tw-text-base md:tw-text-center"},Ke={class:"tw-flex tw-items-center md:tw-justify-center"},Qe={class:"preview-area tw-flex-col tw-items-center"},We={class:"text-h5 tw-mb-4 tw-pt-4 tw-text-center"},et={class:"tw-w-full tw-pt-2 tw-flex tw-justify-center tw-gap-2"},J=A({__name:"BaseImageUploader",props:{image:{type:String,default:""},square:{type:Boolean,default:!1}},emits:["update"],setup(N,{expose:n,emit:t}){const{t:c}=R(),f=E(),V=t,v=y(),o=y(),w=y(),i=y(!1),d=y(!1),D=()=>{i.value=!1,d.value=!1},m=x=>{o.value.relativeZoom(x)},g=(x,u)=>{o.value.move(x,u)},S=()=>{o.value.reset()},B=x=>{o.value.rotate(x)},z=()=>{const x=URL.createObjectURL(v.value.files[0]);w.value=x,i.value=!0},W=async()=>{d.value=!0,o.value.getCroppedCanvas({width:300,height:300}).toBlob(async x=>{try{const{data:u}=await f.UploadFile(x);V("update",u)}catch(u){console.log(u.status),u.status===413?f.createNotification({title:c("notification.payloadTooLarge"),color:"error"}):f.createNotification({title:c("notification.errorNotification"),color:"error"})}}),d.value=!1},ee=()=>{const x=document.getElementById("flipXBtn");if(x){const u=x.getAttribute("data-scale"),j=u?-u:-1;o.value.scaleX(j),x.setAttribute("data-scale",String(j))}},te=()=>{const x=document.getElementById("flipYBtn");if(x){const u=x.getAttribute("data-scale"),j=u?-u:-1;o.value.scaleY(j),x.setAttribute("data-scale",String(j))}};return n({close:D}),(x,u)=>{const j=P("CloudDownloadIcon"),ae=P("PencilIcon"),le=P("VueCropper"),oe=P("ArrowNarrowDownIcon"),se=P("ArrowNarrowUpIcon"),re=P("ArrowNarrowRightIcon"),ie=P("ArrowNarrowLeftIcon");return _(),F("div",null,[e(q,{elevation:"10"},{default:a(()=>[e(G,{class:"!tw-p-4 md:!tw-p-6"},{default:a(()=>[s("h5",Te,r(l(c)("profile.changeProfile")),1),s("div",De,r(l(c)("profile.changePicture")),1),s("div",je,[s("div",Be,[s("input",{onChange:z,class:"input input__file",id:"input__file",ref_key:"file",ref:v,name:"file",type:"file",accept:"image/png, image/jpeg, image/bmp"},null,544),s("label",{class:Z([{"tw-rounded-full":!N.square,"tw-rounded-lg":N.square},"input__file-button"]),for:"input__file"},[s("div",qe,[N.image?(_(),F("img",{key:1,src:N.image,class:Z({"tw-rounded-full":!N.square,"tw-rounded-lg":N.square}),alt:"profile"},null,10,Ae)):(_(),k(j,{key:0,class:"tw-h-20 tw-w-20"}))]),s("div",{class:Z([{"tw-rounded-full":!N.square,"tw-rounded-lg":N.square},"avatar-block-blur tw-flex tw-items-center tw-justify-center"])},[s("div",Re,[ce(e(ae,{class:"tw-h-24 tw-w-24","stroke-width":"1.5",size:"20"},null,512),[[me,N.image]])])],2)],2)]),s("div",Ee,r(l(c)("profile.format")),1)])]),_:1})]),_:1}),e(fe,{modelValue:i.value,"onUpdate:modelValue":u[9]||(u[9]=I=>i.value=I),"max-width":"1300"},{default:a(()=>[e(q,null,{default:a(()=>[e(pe,null,{default:a(()=>[e(M,null,{default:a(()=>[e(Y,null,{default:a(()=>[e(b,{cols:"12",md:"9"},{default:a(()=>[s("div",Se,[s("p",Fe,r(l(c)("Edit your picture")),1),w.value?(_(),k(le,{key:0,src:w.value,aspectRatio:1,ref_key:"cropper",ref:o,class:"tw-mb-5 tw-max-h-96",alt:"Source Image",preview:".preview"},null,8,["src"])):$("",!0),e(Y,null,{default:a(()=>[e(b,{cols:"12",md:"4"},{default:a(()=>[s("p",Le,r(l(c)("profile.zoom")),1),s("div",Xe,[e(h,{onClick:u[0]||(u[0]=C(I=>m(.2),["prevent"])),class:"tw-mr-3",role:"button",variant:"tonal",color:"primary"},{default:a(()=>[p(r(l(c)("profile.zoomIn")),1)]),_:1}),e(h,{onClick:u[1]||(u[1]=C(I=>m(-.2),["prevent"])),role:"button",variant:"tonal",color:"primary"},{default:a(()=>[p(r(l(c)("profile.zoomOut")),1)]),_:1})])]),_:1}),e(b,{cols:"12",md:"4"},{default:a(()=>[s("p",Ye,r(l(c)("profile.rotate")),1),s("div",Me,[e(h,{onClick:u[2]||(u[2]=C(I=>B(90),["prevent"])),class:"tw-mr-3",role:"button",variant:"tonal",color:"primary"},{default:a(()=>[p(r(l(c)("profile.rotatePlus")),1)]),_:1}),e(h,{onClick:u[3]||(u[3]=C(I=>B(-90),["prevent"])),role:"button",variant:"tonal",color:"primary"},{default:a(()=>[p(r(l(c)("profile.rotateNegative")),1)]),_:1})])]),_:1}),e(b,{cols:"12",md:"4"},{default:a(()=>[s("p",Oe,r(l(c)("profile.flip")),1),s("div",He,[e(h,{onClick:C(ee,["prevent"]),class:"tw-mr-3",id:"flipXBtn",role:"button",variant:"tonal",color:"primary","data-scale":"1"},{default:a(()=>[p(r(l(c)("profile.flipX")),1)]),_:1}),e(h,{onClick:C(te,["prevent"]),id:"flipYBtn",role:"button",variant:"tonal",color:"primary","data-scale":"1"},{default:a(()=>[p(r(l(c)("profile.flipY")),1)]),_:1})])]),_:1}),e(b,{cols:"12",md:"6"},{default:a(()=>[s("p",Ze,r(l(c)("profile.move")),1),s("div",Ge,[e(L,{text:"Up"},{activator:a(({props:I})=>[e(h,X({onClick:u[4]||(u[4]=C(O=>g(0,-1),["prevent"]))},I,{class:"tw-mr-3",variant:"tonal",color:"primary",icon:""}),{default:a(()=>[e(oe,{class:"text-primary","stroke-width":"1.5",size:"20"})]),_:2},1040)]),_:1}),e(L,{text:"Down"},{activator:a(({props:I})=>[e(h,X({onClick:u[5]||(u[5]=C(O=>g(0,1),["prevent"]))},I,{class:"tw-mr-3",variant:"tonal",color:"primary",icon:""}),{default:a(()=>[e(se,{class:"text-primary","stroke-width":"1.5",size:"20"})]),_:2},1040)]),_:1}),e(L,{text:"Right"},{activator:a(({props:I})=>[e(h,X({onClick:u[6]||(u[6]=C(O=>g(-1,0),["prevent"]))},I,{class:"tw-mr-3",variant:"tonal",color:"primary",icon:""}),{default:a(()=>[e(re,{class:"text-primary","stroke-width":"1.5",size:"20"})]),_:2},1040)]),_:1}),e(L,{text:"Left"},{activator:a(({props:I})=>[e(h,X({onClick:u[7]||(u[7]=C(O=>g(1,0),["prevent"]))},I,{variant:"tonal",color:"primary",icon:""}),{default:a(()=>[e(ie,{class:"text-primary","stroke-width":"1.5",size:"20"})]),_:2},1040)]),_:1})])]),_:1}),e(b,{cols:"12",md:"6"},{default:a(()=>[s("p",Je,r(l(c)("profile.other")),1),s("div",Ke,[e(h,{onClick:C(S,["prevent"]),ref:"flipXBtn",role:"button",variant:"tonal",color:"primary"},{default:a(()=>[p(r(l(c)("profile.reset")),1)]),_:1},512)])]),_:1})]),_:1})])]),_:1}),e(b,{cols:"12",md:"3",class:"tw-hidden md:tw-flex"},{default:a(()=>[s("div",Qe,[s("p",We,r(l(c)("profile.preview")),1),u[10]||(u[10]=s("div",{class:"preview"},null,-1)),s("div",et,[e(h,{onClick:u[8]||(u[8]=I=>i.value=!1),color:"error"},{default:a(()=>[p(r(l(c)("cancel")),1)]),_:1}),e(h,{onClick:W,loading:d.value,color:"primary",variant:"flat"},{default:a(()=>[p(r(l(c)("save")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}}),tt={class:"text-h5 tw-mb-2"},at={class:"tw-mb-2 tw-flex tw-items-start"},lt={class:"tw-mb-2 tw-flex tw-items-start"},ot={class:"tw-mb-2 tw-flex tw-items-start"},st={class:"tw-flex tw-justify-end"},rt=A({__name:"ChangePasswordForm",setup(N){const{t:n}=R(),t=E(),{passwordRules:c}=K(),f=y(!1),V=y(!1),v=y(!1),o=y(!1),w=y(!1),i=y({password:"",newPassword:"",repeatPassword:""}),d=y([m=>!!m||n("validation.passwordEmpty"),m=>m&&m.length>=8||n("validation.password"),m=>m&&m===i.value.newPassword||n("validation.repeatPassword")]),D=async()=>{V.value=!0;try{await t.changePassword({password:i.value.password,newPassword:i.value.newPassword}),i.value={password:"",repeatPassword:"",newPassword:""},t.createNotification({title:n("notification.profilePasswordchange"),color:"success"})}catch{t.createNotification({title:n("notification.errorNotification"),color:"error"})}V.value=!1};return(m,g)=>{const S=P("EyeIcon"),B=P("EyeOffIcon");return _(),k(q,{class:"!tw-p-4 md:!tw-p-6 !tw-flex !tw-flex-col !tw-justify-between"},{default:a(()=>[e(M,{modelValue:f.value,"onUpdate:modelValue":g[6]||(g[6]=z=>f.value=z),"lazy-validation":""},{default:a(()=>[s("h5",tt,r(l(n)("profile.changePassword")),1),e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.yourPassword")),1)]),_:1}),s("div",at,[e(T,{modelValue:i.value.password,"onUpdate:modelValue":g[0]||(g[0]=z=>i.value.password=z),type:v.value?"text":"password",rules:l(c),class:"tw-mr-3",color:"primary",required:""},null,8,["modelValue","type","rules"]),e(h,{onClick:g[1]||(g[1]=z=>v.value=!v.value),color:v.value?"info":"default",variant:"tonal",icon:""},{default:a(()=>[v.value?(_(),k(S,{key:0})):$("",!0),v.value?$("",!0):(_(),k(B,{key:1}))]),_:1},8,["color"])]),e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.newPassword")),1)]),_:1}),s("div",lt,[e(T,{modelValue:i.value.newPassword,"onUpdate:modelValue":g[2]||(g[2]=z=>i.value.newPassword=z),type:w.value?"text":"password",rules:l(c),class:"tw-mr-3",color:"primary",required:""},null,8,["modelValue","type","rules"]),e(h,{onClick:g[3]||(g[3]=z=>w.value=!w.value),color:w.value?"info":"default",variant:"tonal",icon:""},{default:a(()=>[w.value?(_(),k(S,{key:0})):$("",!0),w.value?$("",!0):(_(),k(B,{key:1}))]),_:1},8,["color"])]),e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.repeatYourPassword")),1)]),_:1}),s("div",ot,[e(T,{modelValue:i.value.repeatPassword,"onUpdate:modelValue":g[4]||(g[4]=z=>i.value.repeatPassword=z),type:o.value?"text":"password",rules:d.value,class:"tw-mr-3",color:"primary",required:""},null,8,["modelValue","type","rules"]),e(h,{onClick:g[5]||(g[5]=z=>o.value=!o.value),color:o.value?"info":"default",variant:"tonal",icon:""},{default:a(()=>[o.value?(_(),k(S,{key:0})):$("",!0),o.value?$("",!0):(_(),k(B,{key:1}))]),_:1},8,["color"])]),s("div",st,[e(h,{onClick:D,loading:V.value,disabled:!f.value,color:"primary"},{default:a(()=>[p(r(l(n)("save")),1)]),_:1},8,["loading","disabled"])])]),_:1},8,["modelValue"])]),_:1})}}}),it={class:"text-h5"},nt={class:"text-subtitle-1 text-medium-emphasis mt-2"},ut={class:"mt-5"},dt={class:"tw-flex tw-justify-end"},ct=A({__name:"PersonalDetailsForm",props:{form:{default:{email:"",firstName:"",lastName:"",darkTheme:"",language:"",phone:"",birthday:"",education:"",experience:"",approach:"",avatar:"",zoneId:"",muteNotifications:""}},formModifiers:{}},emits:["update:form"],setup(N){const{t:n}=R(),t=E(),{emailRules:c,emptyRules:f}=K(),V=y(!1),v=y(!1),o=we(N,"form"),w=async()=>{v.value=!0;try{const i=await t.changeUserDetails(o.value);o.value={email:i.data.email,firstName:i.data.firstName,lastName:i.data.lastName,darkTheme:i.data.darkTheme,language:i.data.language,phone:i.data.phone,birthday:i.data.birthday,education:t.user.education,experience:t.user.experience,approach:t.user.approach,avatar:t.user.avatar,zoneId:t.user.zoneId,muteNotifications:t.user.muteNotifications},t.createNotification({title:n("notification.profileDetailschange"),color:"success"})}catch{t.createNotification({title:n("notification.errorNotification"),color:"error"})}v.value=!1};return(i,d)=>{const D=P("vue-tel-input");return _(),F("div",null,[e(M,{modelValue:V.value,"onUpdate:modelValue":d[9]||(d[9]=m=>V.value=m),class:"tw-mb-3 lg:tw-mb-6","lazy-validation":""},{default:a(()=>[e(q,{elevation:"10"},{default:a(()=>[e(G,{class:"!tw-p-4 md:!tw-p-6"},{default:a(()=>[s("h5",it,r(l(n)("profile.personalDetails")),1),s("div",nt,r(l(n)("profile.personalDetailsSubtitle")),1),s("div",ut,[e(Y,null,{default:a(()=>[e(b,{cols:"12",lg:"6"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.firstName")),1)]),_:1}),e(T,{modelValue:o.value.firstName,"onUpdate:modelValue":d[0]||(d[0]=m=>o.value.firstName=m),rules:l(f),color:"primary",type:"text",variant:"outlined",required:""},null,8,["modelValue","rules"])]),_:1}),e(b,{cols:"12",lg:"6"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.lastName")),1)]),_:1}),e(T,{modelValue:o.value.lastName,"onUpdate:modelValue":d[1]||(d[1]=m=>o.value.lastName=m),rules:l(f),color:"primary",type:"email",variant:"outlined",required:""},null,8,["modelValue","rules"])]),_:1}),e(b,{cols:"12",lg:"6"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("email")),1)]),_:1}),e(T,{modelValue:o.value.email,"onUpdate:modelValue":d[2]||(d[2]=m=>o.value.email=m),rules:l(c),color:"primary",type:"text",variant:"outlined",required:""},null,8,["modelValue","rules"])]),_:1}),e(b,{cols:"12",lg:"6"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.phoneNumber")),1)]),_:1}),e(D,{modelValue:o.value.phone,"onUpdate:modelValue":d[3]||(d[3]=m=>o.value.phone=m),class:"tw-mb-5"},null,8,["modelValue"])]),_:1}),e(b,{cols:"12",lg:"12"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.birthday")),1)]),_:1}),e(T,{modelValue:o.value.birthday,"onUpdate:modelValue":d[4]||(d[4]=m=>o.value.birthday=m),class:"tw-mb-5",type:"date",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1}),l(t).user.type==="Therapist"?(_(),k(b,{key:0,cols:"12",lg:"12"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.education")),1)]),_:1}),e(T,{modelValue:o.value.education,"onUpdate:modelValue":d[5]||(d[5]=m=>o.value.education=m),class:"tw-mb-5",color:"primary",type:"text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})):$("",!0),l(t).user.type==="Therapist"?(_(),k(b,{key:1,cols:"12",lg:"12"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.experience")),1)]),_:1}),e(T,{modelValue:o.value.experience,"onUpdate:modelValue":d[6]||(d[6]=m=>o.value.experience=m),class:"tw-mb-5",color:"primary",type:"text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})):$("",!0),l(t).user.type==="Therapist"?(_(),k(b,{key:2,cols:"12",lg:"12"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.approach")),1)]),_:1}),e(T,{modelValue:o.value.approach,"onUpdate:modelValue":d[7]||(d[7]=m=>o.value.approach=m),color:"primary",type:"text",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})):$("",!0),e(b,{cols:"12",lg:"12"},{default:a(()=>[e(U,{class:"font-weight-medium mb-2"},{default:a(()=>[p(r(l(n)("profile.emailNotification")),1)]),_:1}),e(ve,{modelValue:o.value.muteNotifications,"onUpdate:modelValue":d[8]||(d[8]=m=>o.value.muteNotifications=m),color:"primary",class:"tw-ml-3","hide-details":""},{label:a(()=>[s("p",null,r(l(n)("profile.mute")),1)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),s("div",dt,[e(h,{onClick:w,disabled:!V.value,loading:v.value,color:"primary",flat:""},{default:a(()=>[p(r(l(n)("save")),1)]),_:1},8,["disabled","loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(t).user.type==="Client"?(_(),k(Q,{key:0,form:o.value,"onUpdate:form":d[10]||(d[10]=m=>o.value=m)},null,8,["form"])):$("",!0)])}}}),mt={class:"profile__main-block tw-flex tw-w-full tw-flex-col-reverse tw-items-start tw-gap-3 lg:tw-grid lg:tw-gap-6"},gt=A({__name:"Profile",setup(N){const{t:n}=R(),t=E(),c=y(null),f=y({email:t.user.email,phone:t.user.phone,avatar:t.user.avatar,zoneId:t.user.zoneId,lastName:t.user.lastName,language:t.user.language,birthday:t.user.birthday,approach:t.user.approach,darkTheme:t.user.darkTheme,education:t.user.education,firstName:t.user.firstName,experience:t.user.experience,muteNotifications:t.user.muteNotifications}),V=async v=>{try{await t.changeUserDetails({...f.value,photoId:v}),await t.getUserDetails(),c.value&&c.value.close(),t.createNotification({title:n("notification.imageMessage"),color:"success"})}catch{t.createNotification({title:n("notification.errorNotification"),color:"error"})}};return _e(()=>t.user,()=>{console.log("update"),f.value={email:t.user.email,phone:t.user.phone,avatar:t.user.avatar,zoneId:t.user.zoneId,lastName:t.user.lastName,language:t.user.language,birthday:t.user.birthday,approach:t.user.approach,darkTheme:t.user.darkTheme,education:t.user.education,firstName:t.user.firstName,experience:t.user.experience,muteNotifications:t.user.muteNotifications}}),(v,o)=>(_(),F(ge,null,[e(Pe,{class:"tw-mb-3 lg:tw-mb-6"}),s("div",mt,[e(J,{onUpdate:o[0]||(o[0]=w=>V(w)),image:l(t).user.avatar,ref_key:"ImageUploader",ref:c,class:"profile__image-uploader tw-hidden tw-h-full lg:tw-block"},null,8,["image"]),e(rt,{class:"profile__password tw-h-full tw-w-full"}),l(t).user.type==="Therapist"?(_(),k(Q,{key:0,form:f.value,"onUpdate:form":o[1]||(o[1]=w=>f.value=w),class:"profile__timezone tw-w-full"},null,8,["form"])):$("",!0),e(ct,{form:f.value,"onUpdate:form":o[2]||(o[2]=w=>f.value=w),class:"profile__personal-details tw-w-full"},null,8,["form"]),e(J,{onUpdate:o[3]||(o[3]=w=>V(w)),image:f.value.avatar,class:"profile__image-uploader tw-h-full tw-w-full lg:tw-hidden"},null,8,["image"])])],64))}});export{gt as default};
