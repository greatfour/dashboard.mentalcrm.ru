import{d as A,aD as B,u as U,ap as q,o as n,c as r,a as s,t as u,b as f,e as m,F as v,B as D,_ as x,m as T,h as K,k as b,n as C,H as R,w as O}from"./index-BhGVanJs.js";import{_ as Y}from"./lodash-CVc3FTaT.js";import{h as p}from"./moment-zH0z38ay.js";import{_ as E,C as L,a as P}from"./CalendarPagination.vue_vue_type_style_index_0_lang-DIaFz0_w.js";import{_ as W}from"./BaseCard.vue_vue_type_script_setup_true_lang-DB97wE3d.js";import{_ as G}from"./BaseLoader.vue_vue_type_script_setup_true_lang-BuXkbLdx.js";import{_ as J}from"./BaseBreadcrumb.vue_vue_type_style_index_0_lang-BQNs6tkn.js";import{_ as j,u as Q}from"./Sessions-Bx4s6g-N.js";import{u as X}from"./Sessions-BbabeFQp.js";import"./AddEventModal.vue_vue_type_style_index_0_lang-D9lYkCIH.js";import"./maska-Cp-LWreF.js";import"./Client-Dmb9Ytlu.js";import"./Rules-CgqIM7pl.js";const Z={class:"tw-flex tw-flex-none tw-items-center tw-justify-between tw-border-b tw-border-gray-200 tw-pb-4"},tt={class:"tw-mb-2 tw-text-base tw-font-semibold tw-leading-6 tw-text-gray-900 sm:tw-mb-0"},et={datetime:"2022-01-22",class:"tw-inline"},st={class:"tw-flex tw-items-center"},at={class:"tw-flex tw-items-center"},lt=A({__name:"CalendarFilters",props:B({month:{type:Number,default:0},year:{type:Number,default:0}},{selectColors:{default:[{id:"",isActive:!1}]},selectColorsModifiers:{}}),emits:B(["back","update"],["update:selectColors"]),setup(g,{emit:h}){const{t:w}=U(),i=h,a=q(g,"selectColors");return(d,c)=>(n(),r("header",Z,[s("div",null,[s("h1",tt,[s("time",et,u(f(w)(`calendar.months[${g.month}]`))+" "+u(g.year),1)]),m(j,{selectColors:a.value,"onUpdate:selectColors":c[0]||(c[0]=t=>a.value=t),class:"sm:tw-hidden"},null,8,["selectColors"])]),s("div",st,[m(j,{selectColors:a.value,"onUpdate:selectColors":c[1]||(c[1]=t=>a.value=t),class:"tw-mr-3 tw-hidden sm:tw-block"},null,8,["selectColors"]),s("div",at,[m(E,{onBack:c[2]||(c[2]=t=>i("back")),onPreviousMonth:c[3]||(c[3]=t=>i("update")),onNextMonth:c[4]||(c[4]=t=>i("update",!0))})])])]))}}),ot={class:"tw-flex tw-bg-gray-200 tw-text-xs tw-leading-6 tw-text-gray-700 lg:tw-flex-auto"},nt={class:"tw-hidden tw-w-full lg:tw-grid lg:tw-grid-cols-7 lg:tw-gap-px"},rt=["onClick","onKeyup"],it=["datetime"],ut={key:0,class:"tw-mt-2"},wt={class:"tw-group tw-flex tw-items-center"},ct={class:"group-hover:text-primary tw-flex-auto tw-truncate tw-font-medium tw-text-gray-900"},dt=["datetime"],mt={key:0,class:"tw-text-gray-500"},ft={class:"tw-isolate tw-grid tw-w-full tw-grid-cols-7 tw-gap-px lg:tw-hidden"},gt=["onClick"],ht=["datetime"],pt={class:"tw-sr-only"},vt={key:0,class:"tw--mx-0.5 tw-mt-auto tw-flex tw-flex-wrap-reverse tw-items-center"},_t={key:1,class:"tw-text-xs tw-text-gray-400"},yt=A({__name:"CalendarTableBody",props:{days:{type:Object,required:!0}},emits:["showDay"],setup(g,{emit:h}){const{t:w}=U(),{colorType:i}=Q(),a=h;return(d,c)=>(n(),r("div",ot,[s("div",nt,[(n(!0),r(v,null,D(g.days,t=>(n(),r("div",{onClick:o=>a("showDay",t.fullDate),onKeyup:o=>a("showDay",t.fullDate),key:t.date,class:x([[t.isCurrentMonth?"tw-bg-white":"tw-bg-gray-100 tw-text-gray-500","tw-relative tw-px-3 tw-py-2"],"tw-min-h-20 tw-cursor-pointer tw-duration-100 tw-ease-in hover:tw-bg-gray-200 focus:tw-z-10"])},[s("time",{datetime:t.date,class:x(t.isToday?"tw-flex tw-h-6 tw-w-6 tw-items-center tw-justify-center tw-rounded-full bg-primary tw-font-semibold tw-text-white":void 0)},u(t.day),11,it),t.events.length>0?(n(),r("ol",ut,[(n(!0),r(v,null,D(t.events.slice(0,2),o=>(n(),r("li",{key:o.id},[s("div",wt,[s("div",{class:x([`${f(i)(o.status,o.startsAt,o.duration)!=="default"?`bg-${f(i)(o.status,o.startsAt,o.duration)}`:"tw-bg-slate-500"}`,"tw-mr-2 tw-min-h-2 tw-min-w-2 tw-rounded-full"])},null,2),s("p",ct,u(o.name),1),s("time",{datetime:o.datetime,class:"group-hover:text-primary tw-ml-3 tw-hidden tw-flex-none tw-text-gray-500 xl:tw-block"},u(o.time),9,dt)])]))),128)),t.events.length>2?(n(),r("li",mt,u(f(w)("plus"))+" "+u(t.events.length-2)+" "+u(f(w)("calendar.more")),1)):T("",!0)])):T("",!0)],42,rt))),128))]),s("div",ft,[(n(!0),r(v,null,D(g.days,t=>(n(),r("button",{onClick:o=>a("showDay",t.fullDate),key:t.date,type:"button",class:x([t.isCurrentMonth?"tw-bg-white":"tw-bg-gray-50",(t.isSelected||t.isToday)&&"tw-font-semibold",t.isSelected&&"tw-text-white",!t.isSelected&&t.isToday&&"text-primary",!t.isSelected&&t.isCurrentMonth&&!t.isToday&&"tw-text-gray-900",!t.isSelected&&!t.isCurrentMonth&&!t.isToday&&"tw-text-gray-500","tw-flex tw-h-14 tw-flex-col tw-px-3 tw-py-2 hover:tw-bg-gray-100 focus:tw-z-10"])},[s("time",{datetime:t.date,class:x([t.isSelected&&"tw-flex tw-h-6 tw-w-6 tw-items-center tw-justify-center tw-rounded-full",t.isSelected&&t.isToday&&"bg-primary",t.isSelected&&!t.isToday&&"tw-bg-gray-900","tw-ml-auto"])},u(t.day),11,ht),s("span",pt,u(t.events.length)+" "+u(f(w)("calendar.events")),1),t.events.length>0&&t.events.length<3?(n(),r("span",vt,[(n(!0),r(v,null,D(t.events.slice(0,2),o=>(n(),r("span",{key:o.id,class:"tw-mx-0.5 tw-mb-1 tw-h-1.5 tw-w-1.5 tw-rounded-full tw-bg-gray-400"}))),128))])):T("",!0),t.events.length>2?(n(),r("span",_t,u(f(w)("plus")),1)):T("",!0)],10,gt))),128))])]))}}),xt={class:"tw-grid tw-grid-cols-7 tw-gap-px tw-border-b tw-border-gray-300 tw-bg-gray-200 tw-text-center tw-text-xs tw-font-semibold tw-leading-6 tw-text-gray-700 lg:tw-flex-none"},bt={class:"sm:tw-hidden"},Ct={class:"tw-hidden sm:tw-block"},Dt=A({__name:"CalendarTableHeader",setup(g){const{t:h}=U();return(w,i)=>(n(),r("div",xt,[(n(),r(v,null,D(7,a=>s("div",{key:a,class:"tw-bg-white tw-py-2"},[s("span",bt,u(f(h)(`calendar.weekDays[${a-1}].short`)),1),s("span",Ct,u(f(h)(`calendar.weekDays[${a-1}].middle`)),1)])),64))]))}}),$t={class:"lg:tw-flex lg:tw-h-full lg:tw-flex-col"},kt={class:"tw-shadow tw-ring-1 tw-ring-black tw-ring-opacity-5 lg:tw-flex lg:tw-flex-auto lg:tw-flex-col"},Vt=A({__name:"CalendarMonth",setup(g){const h=K(),w=X(),i=b(!0),a=b(new Date().getFullYear()),d=b(new Date().getMonth()),c=b(new Date().getDate()),t=new Date().getDate(),o=new Date().getMonth(),_=b([]),$=C(()=>p(M.value[0].fullDate).valueOf()),k=C(()=>p(M.value[M.value.length-1].fullDate).add(1,"day").subtract(1,"second").valueOf()),y=C(()=>_.value.filter(e=>e.isActive).map(e=>e.id)),H=C(()=>new L({year:a.value,month:d.value,date:c.value,firstDayOfWeek:"monday"},{day:"2-digit",month:"long",year:"numeric"})),M=C(()=>H.value.daysOfMonth.map(e=>({day:e.day,date:e.date,fullDate:e.fullDate,isCurrentMonth:e.isDayInMouth,isToday:e.day===t&&e.mouth===o,events:w.list.filter(l=>p(l.startsAt).startOf("day").isSame(p(e.fullDate))).map(l=>{var S,N;return{id:l.id,status:l.status,duration:l.durationInMinutes,startsAt:l.startsAt,time:p(l.startsAt).format("HH:mm"),name:l.opponent?`${(S=l==null?void 0:l.opponent)==null?void 0:S.firstName} ${(N=l==null?void 0:l.opponent)==null?void 0:N.lastName}`:"Free space for booking",datetime:l.startsAt}})}))),z=e=>{h.push({name:"Calendar Day",query:{date:p(e).valueOf()}})},I=async()=>{i.value=!0,a.value=new Date().getFullYear(),d.value=new Date().getMonth(),await w.getSessions({from:$.value,to:k.value,status:y.value,limit:9999}),i.value=!1},V=async(e=!1)=>{i.value=!0,e?d.value>=11?(d.value=0,a.value+=1):d.value+=1:d.value<=0?(d.value=11,a.value-=1):d.value-=1,await w.getSessions({from:$.value,to:k.value,status:y.value,limit:9999}),i.value=!1},F=Y.debounce(()=>{const e={limit:9999};_.value.length&&_.value.length!==3&&(e.status=y.value),e.from=$.value,e.to=k.value,w.getSessions(e)},500);return R(y,F),w.getSessions({from:$.value,to:k.value,status:y.value,limit:9999}).then(()=>{i.value=!1}),(e,l)=>(n(),r(v,null,[m(J,{title:"sidebar.calendar"}),m(G,{isUpdate:i.value},{default:O(()=>[m(P,{onUpdate:f(F)},null,8,["onUpdate"]),m(W,null,{default:O(()=>[s("div",$t,[m(lt,{onBack:I,onUpdate:V,selectColors:_.value,"onUpdate:selectColors":l[0]||(l[0]=S=>_.value=S),month:d.value,year:a.value},null,8,["selectColors","month","year"]),s("div",kt,[m(Dt),m(yt,{onShowDay:z,days:M.value},null,8,["days"])])])]),_:1})]),_:1},8,["isUpdate"])],64))}});export{Vt as default};
